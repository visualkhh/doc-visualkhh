
예제 3.1
<canvas id="canvas1" width="300" height="200"></canvas>


예제 3.2
//canvas DOM 객체를 생성
var canvas = document.getElementById("canvas1");
//그리기 콘텍스트를 생성
var context = canvas.getContext("2d");



예제 3.3
// 사각형 그리기
context.fillRect(0, 0, 150, 100);
// 텍스트 그리기
context.fillText("Hello, Canvas!", 155, 110);
// 선 그리기 시작
context.beginPath();
// 선 그리기
context.moveTo(0, 100);
context.lineTo(300, 100);
context.moveTo(150, 0);
context.lineTo(150, 200);
// 캔버스의 윤곽을 그린다.
context.rect(0, 0, 300, 200);
// 화면에 출력
context.stroke();
// 선 그리기 종료
context.closePath();



예제 3.4
// (20, 20)을 시작점으로 하고 넓이 100px, 높이 50px인 사각형을 그립니다.
cx.strokeRect(20, 20, 100, 50);

예제 3.5
// (20, 20)을 시작점으로 하고 넓이 100px, 높이 50px인 사각형을 그립니다.
cx.fillRect(20, 20, 100, 50);



예제 3.6
// 캔버스 전체를 지웁니다.
cx.clearRect(0, 0, canvas.width, canvas.height);


예제 3.7
<html>
<body>
<canvas id="canvas1" width="300" height="400"></canvas>
<script type="text/javascript">
	// canvas 요소의 DOM 객체 생성
	var canvas = document.getElementById("canvas1");
	// 그리기 콘텍스트 생성
	var cx = canvas.getContext("2d");
	// image 요소 생성
	var image = new Image();
	// 이미지의 로딩이 끝났다면 캔버스에 출력
	image.onload = function() {
		// 캔버스에 꽉 채워 이미지를 표시
		cx.drawImage(image, 0, 0, canvas.width, canvas.height);
	};
	// 이미지 로딩 시작
	image.src = "img.jpg";
</script>
</body>
</html>


예제 3.8
// 변수 canvas가 캔버스를 참조하고, cx는 해당 그리기 콘텍스트
// 패스 초기화
cx.beginPath();
// 캔버스의 기준점으로 이동
cx.moveTo(0, 0);
// 대각선 긋기
cx.lineTo(canvas.width, canvas.height);
// 선을 출력
cx.stroke();


예제 3.9
cx.beginPath();
cx.moveTo(0, 0);
// 베지에 곡선 그리기
cx.quadraticCurveTo(50, 100, 100, 0);
cx.stroke();


예제 3.10
cx.beginPath();
cx.moveTo(0, 0);
// 베지에 곡선 그리기
cx.bezierCurveTo(0, 100, 100, 0, 100, 100);
cx.stroke();


예제 3.11
cx.beginPath();
cx.moveTo(0, 100);
// 직선과 원호를 그림
cx.arcTo(25, 25, 100, 100, 25);
cx.stroke();


예제 3.12
cx.beginPath();
// 시계 방향으로 원호를 그림
cx.arc(50, 50, 25, 0, 90 * Math.PI / 180, false);
cx.stroke();


예제 3.13
cx.beginPath();
// 반지름이 25픽셀인 원을 그림
cx.arc(50, 50, 25, 0, 2 * Math.PI, true);
cx.stroke();


예제 3.14
cx.beginPath();
// (50, 50)을 부채꼴의 중심으로 함
cx.moveTo(50, 50);
// 부채꼴의 원호를 그림. 중심에서 원호의 시작점까지의 직선은 자동으로 그어짐
cx.arc(50, 50, 25, 0, 90 * Math.PI / 180, false);
// 패스를 닫음. 원호의 종료점에서 중심점까지 직선이 자동으로 그어짐
cx.closePath();
cx.stroke();


예제 3.15
<html>
<body>
<canvas id="canvas1" width="300" height="400"></canvas>
<script type="text/javascript">
	//canvas 요소의 DOM 객체 생성
	var canvas = document.getElementById("canvas1");
	// 그리기 콘텍스트 생성
	var cx = canvas.getContext("2d");
	// 클리핑 영역 지정
	cx.beginPath();
	cx.arc(85, 160, 50, 0, 2 * Math.PI, true);
	cx.clip();
	// 이미지 삽입
	var image = new Image();
	image.onload = function() {
		cx.drawImage(image, 0, 0, canvas.width, canvas.height);
	};
	image.src = "img.jpg";
</script>
</body>
</html>


예제 3.16
// 선형 그러데이션 만들기
var g = cx.createLinearGradient(0, 0, 200, 0);
// 시작점을 흰색으로 끝점을 검은색으로 지정
g.addColorStop(0, "white");
g.addColorStop(1, "black");
// 채우기 스타일로서 그러데이션을 세팅
cx.fillStyle = g;
// 사각형 채우기
cx.fillRect(0, 0, 200, 200);



예제 3.17
// 원형 그러데이션 만들기
var g = cx.createRadialGradient(90, 90, 0, 50, 50, 200);
g.addColorStop(0, "white");
g.addColorStop(1, "black");
cx.fillStyle = g;
// 원을 그린 후 채우기
cx.arc(100, 100, 50, 0, 2 * Math.PI, true);
cx.fill();



예제 3.18
// img 요소 생성
var image = new Image();
// 이미지 로딩이 끝나면 캔버스에 삽입
image.onload = function() {
	// 이미지를 반복해서 패턴 만들기
	var pattern = cx.createPattern(image, "repeat");
	// 채우기 패턴으로 지정
	cx.fillStyle = pattern;
	// 사각형 그리기
	cx.fillRect(0, 0, 100, 100);
};
// 이미지 로딩 시작
image.src = "whatwg.png";



예제 3.19
//반투명 사각형 그리기
cx.globalAlpha = 0.5;
cx.fillRect(0, 0, 100, 100);


예제 3.20
cx.shadowOffsetX = 5;
cx.shadowOffsetY = 5;
cx.shadowColor = "gray";
cx.shadowBlur = 2;
cx.fillRect(10, 10, 50, 50);





예제 3.21
var message = "안녕하세요!";
var textHeight = 32;
cx.font = textHeight + 'px "맑은 고딕"';
// 표시할 텍스트의 폭을 구함
var textWidth = cx.measureText(message).width;
// 텍스트 배경 그리기
cx.fillStyle = "pink";
cx.fillRect(0, 0, textWidth, textHeight);
// 텍스트 삽입
cx.fillStyle="black";
cx.textBaseline = "bottom";
cx.fillText(message, 0, textHeight);


예제 3.22
cx.fillText("안녕하세요!", 30, 30);
// 확대
cx.scale(2, 1.5);
cx.fillText("안녕하세요! scale()", 30, 30);
// 확대 취소
cx.scale(1/2, 1/1.5);
// 회전
var angle = 20 * Math.PI / 180;
cx.rotate(angle);
cx.fillText("안녕하세요! rotate()", 30, 30);
// 회전 취소
cx.rotate(-angle);
// 이동
cx.translate(50, 50);
cx.fillText("안녕하세요! translate()", 30, 30);
// 이동 취소
cx.translate(-50, -50);


예제 3.23
// img 요소 생성
var image = new Image();
// 이미지 로딩이 완료되었다면
image.onload = function() {
	// 이미지 표시
	cx.drawImage(image, 0, 0);
	// 이미지를 반투명하게 만들고서 반전시켜 표시
	cx.globalAlpha = .3;
	cx.transform(1, 0, 0, -0.5, 0, image.height * 1.5) ;
	cx.drawImage(image, 0, 0);
};
// URL을 이용하여 이미지 로딩 시작
image.src = "w3c_home.png";


예제 3.24
cx.fillText("안녕하세요!", 30, 30);
// 상태 저장
cx.save() ;
// 확대
cx.scale(2, 1.5);
cx.fillText("안녕하세요! scale()", 30, 30);64
// 확대 전의 상태를 복원
cx.restore() ;
// 이전 코드에서는 확대 전 상태로 돌리기 위해 명시적으로 축소율을 지정
// cx.scale(1 / 2, 1 / 1.5);
cx.save() ;
var angle = 20 * Math.PI / 180;
// 회전
cx.rotate(angle);
cx.fillText("안녕하세요! rotate()", 30, 30);
cx.restore() ;
cx.save() ;
// 이동
cx.translate(50, 50);
cx.fillText("안녕하세요! translate()", 30, 30);
cx.restore() ;



예제 3.25
// x, y, w, h로 지정된 범위의 투명도를 alpha로 지정된 값으로 변경
// alpha에는 0.0~1.0 사이의 값을 지정할 수 있다. 
function alphaRect(context, alpha, x, y, w, h) {
	// 캔버스로부터 이미지 데이터 얻음
	var imageData = context.getImageData(x, y, w, h);
	// 비트맵 주사
	for ( var i = 0; i < imageData.data.length; i ++) {
		// 투명도 변경
		if( i % 4 == 3){
			// 픽셀 조작의 경우는 투명도도 0~255 범위의 값으로 지정
			imageData.data[i] = 255 * alpha;
		}
	}
	// 변경된 비트맵을 캔버스에 다시 그림
	context.putImageData(imageData, x, y);
}



예제 3.26
// 투명도 변경
if( i % 4 == 3){
	// 픽셀 조작의 경우는 투명도도 0~255 범위의 값으로 지정
	imageData.data[i] = 255 * alpha;
}



예제 3.27
cx.fillStyle = "red";
cx.fillRect(20, 20, 100, 100);
cx.fillStyle = "green";
cx.fillRect(50, 50, 100, 100);




예제 3.28
alphaRect(cx, 0.5, 40, 60, 80, 40);


예제 3.29
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAA……



예제 3.30
data:<이미지 MIME 타입>;base64, <이미지 데이터를 Base64로 인코딩한 문자열>



예제 3.31
data:image/jpeg;base64,TLIi1H9QEC2LtBzXBglj7QU2wINZ+UBMsiLUf……


예제 3.32
<html>
<body>
<canvas id="clockCanvas" width="300" height="300"></canvas>
<script type="text/javascript">
	var canvas = document.getElementById("clockCanvas");
	var cx = canvas.getContext("2d");
	var centerX = centerY = 150;
	//0.5초마다 반복
	setInterval (function() {
		// 캔버스 지우기
		canvas.width = canvas.width;
		cx.beginPath();
		// 바깥쪽 원을 그림
		cx.arc(centerX, centerY, 100, 0, 2 * Math.PI, true);
		// 이후 시계 중심 좌표를 기초로 초침을 그릴 수 있도록 설정
		cx.translate(centerX, centerY);
		// 초침을 회전시킴
		var seconds = new Date().getSeconds();
		var angle = 360 / 60 * seconds * Math.PI / 180;
		cx.rotate(angle);
		// (0, 0)을 시작점으로 초침을 그림
		cx.moveTo(0, 0);
		cx.lineTo(0, 0 - 80);
		cx.stroke();
	}, 500);
</script>
</body>
</html>