V.Widget={currentOpenLayer:null,init:function(a,d,b,c){jQuery("a.link_subscription").click(function(){currentOpenLayer=jQuery("div#subscription_layer");currentOpenLayer.show();jQuery("div#share_layer").hide();return false});jQuery("a.link_sns").click(function(){currentOpenLayer=jQuery("div#share_layer");currentOpenLayer.show();jQuery("div#subscription_layer").hide();return false});jQuery("a.widget_btn_close").click(function(){currentOpenLayer.hide();return false});jQuery("a.btn_widget").click(function(){var g=jQuery(this);var h="add";var e="Add";if(g.hasClass("btn_restore")){h="withdraw";e="Withdraw"}if(!b){if(confirm("로그인이 필요한 서비스입니다.\n로그인 하시겠습니까?")){var f="url=http://v.daum.net/subscription/redirectAfter"+e+"?values="+d+"|http://v.daum.net/my/subscription?refreshWidget=true";window.open("http://login.daum.net/accounts/loginform.do?"+f)}return false}jQuery.post("/subscription/"+h,{userId:d},function(i){if(i.error==true){alert(i.msg)}else{if(g.hasClass("btn_restore")){g.removeClass("btn_restore");g.addClass("btn_reader");jQuery(".txt_reader").text("구독");jQuery(".txt_reader").removeClass("txt_g");jQuery(".txt_bloger .txt_g").text("님을 구독해 보세요!");jQuery(".link_subscription .num_count").removeClass("subscripted")}else{g.removeClass("btn_reader");g.addClass("btn_restore");jQuery(".txt_reader").text("구독중");jQuery(".txt_reader").addClass("txt_g");jQuery(".txt_bloger .txt_g").text("님을 구독중입니다.");jQuery(".link_subscription .num_count").addClass("subscripted")}}})});jQuery("a.btn_recomm").click(function(){jQuery.post("/api/news/"+a+"/recommend.json",{key:c},function(e){if(e.error){V.Widget.showMessage(e.error)}else{jQuery("#recomm_count").text(e.result);jQuery("#recomm_count").addClass("recommended")}})})},showMessage:function(a){currentOpenLayer=jQuery("div#message_layer");if(currentOpenLayer.length>0){currentOpenLayer.show();jQuery("div#subscription_layer").hide();jQuery("div#share_layer").hide();jQuery("p.txt_message").text(a)}else{alert(a)}},showSubLayer:function(){currentOpenLayer=jQuery("div#subscription_layer");currentOpenLayer.show()}};V.Widget.SocialShares={share:function(a,c,d,b){V.Widget.SocialShares.services[a].handler({link:c,prefix:d,image:b,service_name:"[Daum view]"})},services:{twitter:{handler:function(a){var b="https://twitter.com/intent/tweet?url="+encodeURIComponent(a.link)+"&text="+encodeURIComponent(a.prefix);if(a.service_name){b+=encodeURIComponent(" | "+a.service_name)}window.open(b)}},facebook:{handler:function(a){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(a.link))}}}};