var TripleSRequester=$Class({request:function(f,h,a,g){var e=blogURL+"/BlogTripleSUpdateAsync.nhn";var b={key:f,value:h};this._doAjax(e,b,a,g)},_doAjax:function(e,b,a,g){var f=$Ajax(e,{method:"post",onload:a,onerror:g});f.request(b)}});var tripleSRequester=new TripleSRequester();var detect=navigator.userAgent.toLowerCase();var isSafari=(detect.indexOf("safari")!=-1?true:false);var isOpera=(detect.indexOf("opera")!=-1?true:false);var max_depth=4;var server="cc.naver.com";var module="cc";if(!nsc){var nsc="shopping.main"}function clickcr(u,H,m,G,z){var g,a,A,E,r;var D="";var f=window.event?window.event:z;var B=sy=px=py=-1;var n,h,F;var v,q;var C,s,p,t;var J;try{t=xWindowSize(window);F=checkIframe(u);if(F){var k=findPos(document.getElementById(F));if(f.clientX&&f.clientX!="undefined"){n=document.body;if(n.clientLeft&&n.clientTop){ifrSx=f.clientX-n.clientLeft;ifrSy=f.clientY-n.clientTop}else{ifrSx=f.clientX;ifrSy=f.clientY}}px=k[0]+ifrSx;py=k[1]+ifrSy;if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){n=document.body;B=px-n.scrollLeft;sy=py-n.scrollTop}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){h=document.documentElement;B=px-h.scrollLeft;sy=py-h.scrollTop}else{B=px;sy=py}}}else{if(f.clientX&&f.clientX!="undefined"){n=document.body;if(n.clientLeft&&n.clientTop){B=f.clientX-n.clientLeft;sy=f.clientY-n.clientTop}else{B=f.clientX;sy=f.clientY}}if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){px=document.body.scrollLeft+(B<0?0:B);py=document.body.scrollTop+(sy<0?0:sy)}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){h=document.documentElement;if(h.scrollLeft!="undefined"){px=h.scrollLeft+(B<0?0:B)}if(h.scrollTop!="undefined"){py=h.scrollTop+(sy<0?0:sy)}}else{px=(B<0?0:B);py=(sy<0?0:sy)}}if(f.pageX){px=f.pageX}if(f.pageY){py=f.pageY}}}catch(I){}if(H!=""){r=H.split(".");D=r[0]+"."+r[1]}else{s=u.parentNode;p=s.parentNode;a=getparent(u);if(a==null){return false}g=getparent(a);if(g==null){return false}D=g.id+"."+a.id}if(u.href){if((u.target&&u.target!="_self")||(u.href.toLowerCase().indexOf("javascript:")!=-1)||u.getAttribute("href",2).charAt(0)=="#"||(u.href.indexOf("#")!=-1&&(u.href.substr(0,u.href.indexOf("#"))==document.URL))){v=0}else{v=1}}else{v=0}if(u.href){if(u.href.indexOf("http://"+server)==0){q=u.href}else{q="http://"+server+"/"+module+"?a="+D+"&r="+G+"&i="+m+"&nsc="+nsc+"&w="+t+"&px="+px+"&py="+py+"&sx="+B+"&sy="+sy+"&m="+v+"&u="+encodeURIComponent(u.href)}}else{q="http://"+server+"/"+module+"?a="+D+"&r="+G+"&i="+m+"&nsc="+nsc+"&w="+t+"&px="+px+"&py="+py+"&sx="+B+"&sy="+sy+"&m="+v+"&u=''"}if(v==1){J=u.innerHTML;u.href=q;if(u.innerHTML!=J){u.innerHTML=J;u.innerHTML=J}}else{if(document.images){var l=new Date().getTime();q+="&time="+l;if(isSafari&&!u.href){var K=c=new Date();while((K.getTime()-c.getTime())<100){K=new Date()}(new Image()).src=q}else{(new Image()).src=q}}}return true}function getparent(b){var a=b.parentNode;var e=0;while(1){if(a.id!=null&&a.id!=""){return a}else{e++;a=a.parentNode}if(e>=max_depth){return null}}}function xWindowSize(e){if(!e){e=window}var a=0;if(e.innerWidth){a=e.innerWidth;if(typeof(e.innerWidth)=="number"){var b=getScrollBarWidth();a=e.innerWidth-b}}else{if(document.documentElement&&document.documentElement.clientWidth){a=document.documentElement.clientWidth}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){a=document.body.clientWidth}}}return a}function getScrollBarWidth(){var e=document.createElement("p");e.style.width="200px";e.style.height="200px";var f=document.createElement("div");f.style.position="absolute";f.style.top="0px";f.style.left="0px";f.style.visibility="hidden";f.style.width="200px";f.style.height="150px";f.style.overflow="hidden";f.appendChild(e);document.body.appendChild(f);var b=e.offsetWidth;f.style.overflow="scroll";var a=e.offsetWidth;if(b==a){a=f.clientWidth}document.body.removeChild(f);return(b-a)}function findPos(a){var b=curtop=0;if(a.offsetParent){do{b+=a.offsetLeft;curtop+=a.offsetTop}while(a=a.offsetParent)}else{if(a.x||a.y){if(a.x){b+=a.x}if(a.y){curtop+=a.y}}}return[b,curtop]}function checkIframe(g){var e=document.URL;var f=g.parentNode;var a;var b;while(1){if(f.nodeName.toLowerCase()=="#document"){if(f.parentWindow){a=f.parentWindow}else{a=f.defaultView}if(a.frameElement!=null&&a.frameElement!="undefined"){if(a.frameElement.nodeName.toLowerCase()=="iframe"){b=a.frameElement.id;if(!b){return false}return b}else{return false}}else{return false}}else{f=f.parentNode;if(f==null||f=="undefined"){return false}}}}if(typeof nclk=="undefined"){nclk={}}if(typeof nclkMaxDepth=="undefined"){var nclkMaxDepth=8}if(typeof ccsrv=="undefined"){var ccsrv="cc.naver.com"}if(typeof nclkModule=="undefined"){var nclkModule="cc"}if(typeof nsc=="undefined"){var nsc="decide.me"}if(typeof g_pid=="undefined"){var g_pid=""}if(typeof g_sid=="undefined"){var g_sid=""}var nclkImg=[];if(typeof nclkMaxEvtTarget=="undefined"){var nclkMaxEvtTarget=4}if(typeof nclk_evt=="undefined"){var nclk_evt=0}nclk.nclktagVersion="1.0.6";nclk.addEvent=function(h,f,g){if(h.addEventListener){h.addEventListener(f,g,false)}else{if(h.attachEvent){h["e"+f+g]=g;h[f+g]=function(){h["e"+f+g](window.event)};h.attachEvent("on"+f,h[f+g])}}};nclk.generateCC=function(z){var e=z||window.event;var F=e.target||e.srcElement;var w=F.nodeName;var y,v;var u;var G="",I="",A="",E="";var H=0,x=0;var D,J;var C;var B=-1;if(e.button==2){return}if(F.nodeType==3){F=F.parentNode}if(F.parentNode&&F.parentNode.nodeName=="A"){F=F.parentNode}v=F;while(B<=nclkMaxEvtTarget){if(B>=nclkMaxEvtTarget){if(nclk_evt==2||nclk_evt==4){D=0;y=v;break}else{return}}else{C=nclk.getTag(F);D=C[0];J=C[1];if(D==0){if(F.parentNode){F=F.parentNode;B++}else{D=0;y=v;break}}else{y=F;break}}}switch(D){case 0:case 1:case 2:case 3:if(nclk_evt==2||nclk_evt==4){G="ncs.blank"}else{return}break;case 4:G=nclk.findArea(y,1);if(G==undefined){G=""}u=nclk.parseNCStr(D,J);G=G+"."+u[0];break;case 5:G=nclk.findArea(y,2);if(G==undefined){G=""}u=nclk.parseNCStr(D,J);break;case 6:u=nclk.parseNCStr(D,J);G=u[0];break;default:return}if(D==4||D==5||D==6){A=u[1];I=u[2];E=u[3];x=u[4]}if(x=="2"){return}else{H=x}if(E){clickcr(y,G,I,A,e,H,E)}else{clickcr(y,G,I,A,e,H)}};nclk.searchNextObj=function(f){var e=f.nextSibling;if(e&&e.nodeType==3){e=e.nextSibling}return e};nclk.getTag=function(o){var k=0;if(!o){return 0}var m;var p;var n;var l="";if(nclk_evt==1||nclk_evt==2){var q=nclk.searchNextObj(o);if(q){if(q!=null&&q.nodeType==8&&q.data.indexOf("=")>0){l=nclk.trim(q.data)}else{return[0,""]}}else{return[0,""]}}else{if(nclk_evt==3||nclk_evt==4){if(o.className){l=nclk.getClassTag(o.className);if(!l){return[0,""]}}else{return[0,""]}}}l=nclk.trim(l);m=l.split("=");p=m[0].charAt(0);n=m[0].substring(1);if(p!="N"){return[0,""]}if(n=="E"){k=1}else{if(n=="I"){k=2}else{if(n=="EI"||n=="IE"){k=3}else{if(n=="IP"||n=="PI"){k=4}else{if(n=="P"){k=5}else{if(m[0].length==1){k=6}else{k=0}}}}}}return[k,l]};nclk.findArea=function(w,s){var q=0;var t;var p;var n,u;var v="";var x=0;var o;var r;if(!w){return}if(s==1){x=1}else{if(s==2){x=0}}while(w=w.parentNode){t=w;while(1){if(nclk_evt==1||nclk_evt==2){t=t.previousSibling;if(t){if(t.nodeType==8){p=nclk.trim(t.data)}else{continue}}else{break}}else{if(nclk_evt==3||nclk_evt==4){p=w.className;if(p){p=nclk.getClassTag(p)}else{break}}}if(p.indexOf("=")>0){n=p.split("=");if(n[0].charAt(0)!="N"){continue}r=n[0].substring(1);if(r=="I"&&x==0){u=n[1].split(":");if(u[0]=="a"){if(u[1]!=""&&u[1]!=undefined){v=u[1]}}x++;break}else{if(r=="E"&&x==1){if(x==1){u=n[1].split(":");if(u[0]=="a"){if(v==""){v=u[1]}else{v=((u[1]==undefined)?"":u[1])+"."+v}}}x++;break}else{if((r=="EI"||r=="IE")&&x==0){u=n[1].split(":");if(u[0]=="a"){v=u[1]}x+=2;break}}}}if(nclk_evt==3||nclk_evt==4){break}}q++;if(x>=2){o=v;break}if(q>=nclkMaxDepth){o=false;break}}return o};nclk.getServiceType=function(){var b;if(typeof g_ssc!="undefined"&&typeof g_query!="undefined"){b=1}else{b=0}return b};nclk.parseNCStr=function(x,r){var C;var t;var u;var A;var B="",v="",q="",z="",s=0;var y=2;r=nclk.trim(r);switch(x){case 4:y=4;break;case 5:y=3;break;case 6:y=2;break;case 1:case 2:case 3:default:return}t=r.substring(y);u=t.split(",");for(var w=0;w<u.length;w++){A=u[w].split(":");if(A[0]=="a"){B=A[1]}else{if(A[0]=="r"){v=A[1]}else{if(A[0]=="i"){q=A[1]}else{if(A[0]=="g"){z=A[1]}else{if(A[0]=="t"){s=A[1]}}}}}}return[B,v,q,z,s]};nclk.trim=function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};nclk.getClassTag=function(k){var g=new RegExp("N[^=]*=([^ $]*)");var l=k.match(g);var h=false;if(l){h=l[0]}return h};function nclk_do(){if(nclk_evt==1||nclk_evt==2||nclk_evt==3||nclk_evt==4){nclk.addEvent(document,"click",nclk.generateCC)}}nclk.getScrollBarWidth=function(){var l=document.createElement("p");l.style.width="200px";l.style.height="200px";var k=document.createElement("div");k.style.position="absolute";k.style.top="0px";k.style.left="0px";k.style.visibility="hidden";k.style.width="200px";k.style.height="150px";k.style.overflow="hidden";k.appendChild(l);document.body.appendChild(k);var g=l.offsetWidth;k.style.overflow="scroll";var h=l.offsetWidth;if(g==h){h=k.clientWidth}document.body.removeChild(k);return(g-h)};nclk.findPos=function(e){var h=curtop=0;try{if(e.offsetParent){do{h+=e.offsetLeft;curtop+=e.offsetTop}while(e=e.offsetParent)}else{if(e.x||e.y){if(e.x){h+=e.x}if(e.y){curtop+=e.y}}}}catch(g){}return[h,curtop]};nclk.windowSize=function(h){if(!h){h=window}var g=0;if(h.innerWidth){g=h.innerWidth;if(typeof(h.innerWidth)=="number"){var f=nclk.getScrollBarWidth();g=h.innerWidth-f}}else{if(document.documentElement&&document.documentElement.clientWidth){g=document.documentElement.clientWidth}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){g=document.body.clientWidth}}}return g};nclk.checkIframe=function(l){var o=document.URL;var m=l.parentNode;var k;var e;if(m==null||m==undefined){return false}while(1){if(m.nodeName.toLowerCase()=="#document"){if(m.parentWindow){k=m.parentWindow}else{k=m.defaultView}try{if(k.frameElement!=null&&k.frameElement!=undefined){if(k.frameElement.nodeName.toLowerCase()=="iframe"){e=k.frameElement.id;if(!e){return false}return e}else{return false}}else{return false}}catch(n){return false}}else{m=m.parentNode;if(m==null||m==undefined){return false}}}};nclk.absPath=function(h){var l=window.location;var k=l.href;var g=l.protocol+"//"+l.host;if(h.charAt(0)=="/"){if(h.charAt(1)=="/"){return l.protocol+h}else{return g+h}}if(/^\.\//.test(h)){h=h.substring(2)}while(/^\.\./.test(h)){if(g!=k){k=k.substring(0,k.lastIndexOf("/"))}h=h.substring(3)}if(g!=k){if(h.charAt(0)!="?"&&h.charAt(0)!="#"){k=k.substring(0,k.lastIndexOf("/"))}}if(h.charAt(0)=="/"){return k+h}else{if(h.charAt(0)=="?"){k=k.split("?")[0];return k+h}else{if(h.charAt(0)=="#"){k=k.split("#")[0];return k+h}else{return k+"/"+h}}}};function clickcr(aw,X,aj,ab,aa,ae,ag){if(arguments.length==1){if(typeof nclk.generateCC!="undefined"){nclk.generateCC(arguments[0])}return}var Z=navigator.userAgent.toLowerCase();var at=(Z.indexOf("safari")!=-1?true:false);var ac=/msie/.test(Z)&&!/opera/.test(Z);var ar=(window.location.protocol=="https:")?"https:":"http:";var ay=ccsrv.substring(ccsrv.indexOf(".")+1);var ak=window.event?window.event:aa;var al=-1;var an=-1;var ao=-1;var ap=-1;var b,ax,av;var am,au,aq;var y,V,W,T,af,ad,ah;var o;var Y=0;if(!ae){ae="0"}else{ae=String(ae)}if(!ag){ag=""}if(ae.indexOf("n")==0){Y=0}else{if(window.g_ssc!=undefined&&window.g_query!=undefined){Y=1}else{Y=0}}try{T=nclk.windowSize(window);av=nclk.checkIframe(aw);if(av){var ai=nclk.findPos(document.getElementById(av));if(ak.clientX&&ak.clientX!=undefined){b=document.body;if(b.clientLeft&&b.clientTop){ifrSx=ak.clientX-b.clientLeft;ifrSy=ak.clientY-b.clientTop}else{ifrSx=ak.clientX;ifrSy=ak.clientY}}ao=ai[0]+ifrSx;ap=ai[1]+ifrSy;if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){b=document.body;al=ao-b.scrollLeft;an=ap-b.scrollTop}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){ax=document.documentElement;al=ao-ax.scrollLeft;an=ap-ax.scrollTop}else{al=ao;an=ap}}}else{if(ak.clientX&&ak.clientX!=undefined){b=document.body;if(b.clientLeft&&b.clientTop){al=ak.clientX-b.clientLeft;an=ak.clientY-b.clientTop}else{al=ak.clientX;an=ak.clientY}}if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){ao=document.body.scrollLeft+(al<0?0:al);ap=document.body.scrollTop+(an<0?0:an)}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){ax=document.documentElement;if(ax.scrollLeft!=undefined){ao=ax.scrollLeft+(al<0?0:al)}if(ax.scrollTop!=undefined){ap=ax.scrollTop+(an<0?0:an)}}else{ao=(al<0?0:al);ap=(an<0?0:an)}}if(ak.pageX){ao=ak.pageX}if(ak.pageY){ap=ak.pageY}}}catch(h){}if(X==""||typeof X=="undefined"){return}if(ae.indexOf("1")!=-1){am=0}else{if(aw.href){af=aw.nodeName.toLowerCase();ad=aw.href.toLowerCase();if((aw.target&&aw.target!="_self"&&aw.target!="_top"&&aw.target!="_parent")||(ad.indexOf("javascript:")!=-1)||(aw.getAttribute("href",2)&&aw.getAttribute("href",2).charAt(0)=="#")||(ad.indexOf("#")!=-1&&(ad.substr(0,ad.indexOf("#"))==document.URL))||af.toLowerCase()=="img"||ac&&window.location.host.indexOf(ay)==-1){am=0}else{am=1}}else{am=0}}if(aw.href&&aw.href.indexOf(ar+"//"+ccsrv)==0){au=aw.href}else{au=ar+"//"+ccsrv+"/"+nclkModule+"?a="+X+"&r="+ab+"&i="+aj;au+="&bw="+T+"&px="+ao+"&py="+ap+"&sx="+al+"&sy="+an+"&m="+am;if(Y==0){au+="&nsc="+nsc}else{if(Y==1){au+="&ssc="+g_ssc+"&q="+encodeURIComponent(g_query)+"&s="+g_sid+"&p="+g_pid+"&g="+ag}}if(ad&&ad.indexOf(ar+"//"+ccsrv)!=0&&af.toLowerCase()!="img"){var x=aw.href;if(aw.outerHTML&&!window.XMLHttpRequest){x=(/\shref=\"([^\"]+)\"/i.test(aw.outerHTML)&&RegExp.$1).replace(/\\/g,"\\\\").replace(/%([A-Z0-9]{2})/ig,"\\$1");(d=document.createElement("div")).innerHTML=x;x=d.innerText.replace(/\\([A-Z0-9]{2})/gi,"%$1").replace(/\\\\/g,"\\")}ad=x.toLowerCase();if(ad.indexOf("http:")==0||ad.indexOf("https:")==0||ad.indexOf("javascript:")==0){au+="&u="+encodeURIComponent(x)}else{ah=nclk.absPath(x);au+="&u="+encodeURIComponent(ah)}}else{if(aw.href){if(aw.href.length>0){au+="&u="+encodeURIComponent(aw.href)}else{au+="&u=about%3Ablank"}}else{au+="&u=about%3Ablank"}}}if(am==1){o=aw.innerHTML;aw.href=au;if(aw.innerHTML!=o){aw.innerHTML=o}}else{if(document.images){var U=new Date().getTime();au+="&time="+U;if(at&&!aw.href){var e=c=new Date();while((e.getTime()-c.getTime())<100){e=new Date()}var y=new Image();nclkImg.push(y);y.src=au}else{var y=new Image();nclkImg.push(y);y.src=au}}}return true}var ReadOnly=$Class({checkReadOnly:function(e){var f=e.element;var b=utility.getElement(f,"a")||f;var a=$Element(f);var g=$Element(b);if((a.hasClass("_rosRestrictAll"))||(g.hasClass("_rosRestrictAll"))){if(readOnlyStatusAll){alert(readOnlyLinkErrorMsg);e.stop();return true}}if((a.hasClass("_rosRestrict"))||(g.hasClass("_rosRestrict"))){if(readOnlyStatus){alert(readOnlyLinkErrorMsg);e.stop();return true}}if(a.hasClass("_commentRosButton")){if(isCommentReadOnly){alert(sCommentReadOnlyBlockSubmit);e.stop();return true}}return false},populateMsgToCommentWriteForm:function(a,b){if(readOnlyStatus==true){this._populateMsgToCommentWriteForm(a,b,readOnlyCommentMsg)}if(!readOnlyStatus&&isCommentReadOnly){this._populateMsgToCommentWriteForm(a,b,sCommentReadOnlyWriteMsg)}},_populateMsgToCommentWriteForm:function(a,e,b){for(i=0;i<a.length;i++){a[i].value=b;$Element(a[i]).attr("readOnly","readOnly");$Element(a[i]).removeClass("textarea");$Element(a[i]).addClass("readonly_textarea");e[i]._checkHeight()}}});var oReadOnly=new ReadOnly();var Exif=$Class({htExifCache:null,$init:function(){this.htExifCache={};this.rxImageUrl=/http:\/\/(.*).naver.net/;this.rxImageUrlForFileName=/http:\/\/(.*).naver.net.*[//]/;this.sExifInfoDomain=exifURL;this.sAttachDomain=attachURL;this.sImageViewerHandler="popview";this.sApiOption="?exif";this.elLayerOpenImageSrc="";this.bOriginSave=(blogOwner==false&&(rightClickOpenYn==true))},checkPostImage:function(a){return(a.tagName.toLowerCase()=="img"&&!$$.getSingle("!dt",a)&&$$.getSingle("!div.post-view",a)&&$Element(a).hasClass("_photoImage"))},getElExifInfoButton:function(){if(!this.elExifInfoBtn){this.elExifInfoBtn=$("ExifInfoBtn")}return this.elExifInfoBtn},getElExifInfoWithDirectSaveButton:function(){if(!this.elExifInfoWithDirectSaveBtn){this.elExifInfoWithDirectSaveBtn=$("ExifInfoBtnWithDirectSave")}return this.elExifInfoWithDirectSaveBtn},getElExifInfoLayer:function(){if(!this.elExifInfoLayer){this.elExifInfoLayer=$("ExifInfoLayer")}return this.elExifInfoLayer},getElExifInfoArea:function(){if(!this.elExifInfoArea){this.elExifInfoArea=$("exifInfoArea")}return this.elExifInfoArea},showButton:function(f){var g,e,b,a;if(!this.checkUploadImage(f)){return}this.elCurrentImage=f;b=$Element(f);e=b.offset();a=this.bOriginSave?95:178;oPosLayer={top:(e.top+b.height())-35,left:(e.left+b.width())-a};if(oPosLayer.top<0){oPosLayer.top=0}if(oPosLayer.left<0){oPosLayer.left=0}g=$Element(this.getButton());g.show();g.css({top:oPosLayer.top+"px",left:oPosLayer.left+"px",zIndex:100});g=e=b=a=null},getButton:function(){var a=null;if(this.bOriginSave){a=this.getElExifInfoButton()}else{a=this.getElExifInfoWithDirectSaveButton()}return a},hideButton:function(){this.elCurrentImage=null;$Element(this.getButton()).hide()},checkExif:function(b,a){var e=this.getCache(a);if(e){b(e)}else{this.loadExifData(a,b)}},getCache:function(a){return this.htExifCache[a]},showExifLayer:function(h){var g,a,b,e,f;this.elLayerOpenImageSrc=this.elCurrentImage.src;f=this.getElExifInfoLayer();g=$Element(f);this.setValue(h);b=$Element(this.elCurrentImage);a=b.offset();g.show();e={top:(a.top+b.height())-g.width()-66,left:(a.left+b.width())-g.width()-15};if(e.top<0){e.top=0}if(e.left<0){e.left=0}g.css({top:e.top+"px",left:e.left+"px",zIndex:300});this.ellipsisTitle($$.getSingle("._model",f));this.ellipsisTitle($$.getSingle("._ttl",f));this.ellipsisTitle($$.getSingle("._date",f));a=f=e=b=f=null},hideExifLayer:function(){$Element(this.getElExifInfoLayer()).hide();this.elLayerOpenImageSrc=""},ellipsisTitle:function(g){var f,b,a,e;f=this.getElExifInfoLayer();e=$$.getSingle("._ellipsisHelper",f);b=$Element(e);a=$Element(g);b.text(a.text());b.show();utility.ellipsisPage(f);a.text(b.text());g.title=e.title;e.title="";b.hide(e);f=a=b=g=e=null},setValue:function(b){var a=this.getElExifInfoLayer();$Element($$.getSingle("._model",a)).text(b.exif.Model||"");$Element($$.getSingle("._resolution",a)).text((b.info.width&&b.info.height)?b.info.width+" x "+b.info.height:"");$Element($$.getSingle("._exposure",a)).text(b.exif.ExposureTime?b.exif.ExposureTime:"");$Element($$.getSingle("._correct",a)).text(b.exif["exposure bias"]?b.exif["exposure bias"]:"");$Element($$.getSingle("._program",a)).text(b.exif.ExposureProgram||"");$Element($$.getSingle("._iso",a)).text(b.exif.ISOSpeedingRatings?"ISO "+b.exif.ISOSpeedingRatings:"");$Element($$.getSingle("._iris",a)).text(b.exif.FNumber?b.exif.FNumber:"");$Element($$.getSingle("._focus",a)).text(b.exif.FocalLength?b.exif.FocalLength:"");$Element($$.getSingle("._ttl",a)).text(b.exif.MeteringMode||"");$Element($$.getSingle("._date",a)).text(b.exif.DateTimeOriginal||"");a=null},changeValue:function(a,b){var e=a.split("/");if(e.length==2){nFirst=parseFloat(e[0],10);nSecond=parseFloat(e[1],10);if(nFirst!=0&&nFirst<nSecond&&nFirst>0){a=1+"/"+(nSecond/nFirst).toFixed(b||0)}else{if(nFirst>0){a=(nFirst/nSecond).toFixed(b||0)}}}return a},loadExifData:function(b,e){if(this._sCurrentImageSrc==b){return}else{this._sCurrentImageSrc=b}var a=encodeURI(this.changeExifInfoUrl(b));new $Ajax(a,{type:"flash",sendheader:false,method:"post",onerror:$Fn(function(){this._sCurrentImageSrc=null;alert("서버와의 통신이 원활하지 않아, 사진정보를 받아오지 못했습니다.\n 잠시후 다시 이용해주세요.")},this).bind(),onload:$Fn(this._onResponse,this).bind(e)}).request({})},changeExifInfoUrl:function(a){return a.replace(this.rxImageUrl,this.sExifInfoDomain).replace(/\?.*$/,"")+this.sApiOption},checkUploadImage:function(a){return(this.rxImageUrl.test(a.src)&&(a.onclick&&a.onclick.toString().indexOf(this.sImageViewerHandler)>=0))},_onResponse:function(b,a){var e=a.json();if(typeof e!="object"){return}this.htExifCache[this._sCurrentImageSrc]=e;this._sCurrentImageSrc=null;b(e)},showExifInfoArea:function(){var a=$Element(this.getElExifInfoArea());if(!a){return}a.show();a=null},hideExifInfoArea:function(){var a=$Element(this.getElExifInfoArea());if(!a){return}a.hide();a=null},mouseoutCloseButton:function(b){var a=$Element(b);a.addClass("close");a.removeClass("close_over")},mouseoverCloseButton:function(b){var a=$Element(b);a.addClass("close_over");a.removeClass("close")},toggleExifInfoLayer:function(){if($Element(this.getElExifInfoLayer()).visible()&&this.elCurrentImage&&this.elLayerOpenImageSrc==this.elCurrentImage.src){this.hideExifLayer()}else{this.checkExif($Fn(this.showExifLayer,this).bind(),this.elCurrentImage.src)}},changeImageSaveInfoUrl:function(a){return a.replace(this.rxImageUrl,this.sAttachDomain).replace(/\?.*$/,"")+"?type=attachment"},getOnlyImageName:function(a){return a.replace(this.rxImageUrlForFileName,"").replace(/\?.*$/,"")}});var oExif=new Exif();var ConfigMenu=$Class({$init:function(){this.logNo=0;this.welContextLayer},_isVisibleContextMenu:function(){if(this.welContextLayer){return this.welContextLayer.visible()}return false},showLayer:function(f,k,e){this.logNo=e;var b=$Element(cssquery.getSingle("!a",f)?cssquery.getSingle("!a",f):f);var a=$Element($("postConfig"+k));a.show();var h=b.offset().top+b.height()+7;var g=b.offset().left-a.width()+b.width()-1;a.offset(h,g);this.welContextLayer=a},hideLayers:function(){if(this._isVisibleContextMenu()){this.welContextLayer.hide()}},noticePostAdd:function(b,a){var e=new Array(b,a);noticePostController.add(e)},noticePostRemove:function(e,b,a){var f=new Array(e,b,a);noticePostController.remove(f)},addPrologue:function(a){window.open("","prologue","width=440,height=160");var b=$("addProloguePopupForm");if(b==null){b=document.createElement("form");b.id="addProloguePopupForm";document.body.appendChild(b)}b.target="prologue";b.method="post";b.action=prologueURL+"/prologue/PrologueFrontSetting.nhn?blogId="+blogId+"&logno="+a;b.submit()},printPost:function(a){var b=open("/PostPrint.nhn?blogId="+blogId+"&logNo="+a,"printWin","width=610, height=600, resizable=no, scrollbars=yes")},openScrapHistory:function(a,b){open("/ScrapHistory.nhn?blogId="+blogId+"&logNo="+a+"&scrapTotCnt="+b,"IdMenuPop","width=380, height=460,scrollbars=yes")},exportPostTransToFile:function(a){window.top.location.href=adminURL+"/"+blogId+"/config/postexport/"+a}});var configMenu=new ConfigMenu();var IdMenu=$Class({$init:function(){this._setEvent()},_setEvent:function(){this.wfOnClickDocument=$Fn(this._onClickDocument,this);this.wfOnMouseOverOrOut=$Fn(this._onMouseOverOrOut,this)},_onClickDocument:function(b){var e=b.element;var a=$Element(utility.getElement(e,"a")||e);if(!a.hasClass("_popMenu")){this.disablePopMenu()}},_onMouseOverOrOut:function(b){var f=b.element;var a=utility.getElement(f,"td");var e=$Element(a);if(e&&e.hasClass("_profileValidate")){if(b.type=="mouseover"){e.addClass("menu-over")}else{e.removeClass("menu-over")}}},disablePopMenu:function(){var a=$Element($("idMenuDiv"));a.hide();a.css({top:"0px"});this.wfOnClickDocument.detach(document,"click");this.wfOnMouseOverOrOut.detach(document,"mouseover");this.wfOnClickDocument.detach(document,"mouseout")},enablePopMenu:function(g,k){this.disablePopMenu();var e=$Element(g);var a=e.offset();var f=$("idMenuDiv");var l=$Element(f);this.wfOnClickDocument.attach(document,"click");this.wfOnMouseOverOrOut.attach(f,"mouseover");this.wfOnMouseOverOrOut.attach(f,"mouseout");l.show();var b=document.body?document.body.clientHeight:document.documentElement.clientHeight;var h=l.$value().offsetHeight;if(b<h+a.top+15){a.top=a.top-h-15}l.css({top:(a.top+15)+"px",left:k?a.left+"px":""})}});var oIdMenu=new IdMenu();var errorCallBack=function(l){try{l="위젯을";var k=this.ownObject.element;var b=false;if(k.id.match(/exchange/gi)){b=true}switch(k.id){case"widget-saying":l="명언을";break;case"widget-weather":l="날씨를";break;case"widget-currency":l="환율을";break;default:l="위젯을";break}if(!$(k.id+"_error")){var h=[];h.push("<div id='"+k.id+"_error' class='error_box' style='height:87px'>");h.push("<table cellpadding='0' cellspacing='0' width='100%' height='100%'>");h.push("<tr>");h.push("<td>");h.push("<p>일시적인 서버 불안으로 <br>"+l+" 불러올 수 없습니다.</p>");h.push("<p><a id = '"+k.id+"_re' href='#' ><img src='http://blogimgs.naver.com/nblog/skins/error/btn_reload.gif' width='49' height='18' alt=''></a></p>");h.push("</td>");h.push("</tr>");h.push("</table>");h.push("</div><div class='error_box_b'></div>");var a=$Element($("<div>"));a.attr("id",k.id+"_error");a.html(h.join(""));if(b){a.after($("widget-currency"))}else{a.after(k)}k.style.display="none";var g=this;$(k.id+"_re").onclick=function(){g.ownObject.callData();return false}}}catch(f){utility.nvl_error(f,blogURL+"/widget.js/errorCallBack ",f.lineNumber);throw f}};var widget=$Class({$init:function(g,f){$JE("widget.init");try{this.options={setUrl:"",getData:"html",flashvars:"",width:171,height:121,onload:function(e){},onerror:function(){alert("Error while loading ")}};f=f||{};for(var a in f){this.options[a]=f[a]}this.id=g;this.element=$(g);this.callData(this.options.getData)}catch(b){utility.nvl_error(b,blogURL+"/widget.js/__init ",b.lineNumber);throw b}},callData:function(a){$JE("widget.callData");a=a||this.options.getData;if(a=="html"){this._callHtml()}if(a=="flash"){this._callFlash()}if(a=="xml"){this._callXML()}},_callHtml:function(){$JE("widget._callHtml");try{var f=this.options;var a=this.element;new $Ajax(f.setUrl,{charset:"utf-8",onload:$Fn(function(e){this._cleanError();a.innerHTML=e.text();f.state=true},this).bind(),onerror:f.onerror}).request()}catch(b){utility.nvl_error(b,blogURL+"/widget.js/widget/_callHtml ",b.lineNumber);throw b}},_callFlash:function(){$JE("widget._callFlash");if(userAgentUtil.isIPadRequest()==true){var f=this.element;f.innerHTML="<div class='guid_ipad_area2'><p>위젯을 지원하지 않습니다.<br>PC에서 이용해주세요.</p></div>";return}try{var k=this.options;var f=this.element;var h=this.id.replace("-","_")+"_swf";var b=k.setUrl;var a=[];a.push('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="'+k.width+'" height="'+k.height+'" id="'+h+'" align="middle">');a.push('<param name="allowScriptAccess" value="always" />');a.push('<param name="flashvars" value="'+k.flashvars+'" />');a.push('<param name="quality" value="high" />');a.push('<param name="movie" value="'+b+'" />');a.push('<param name="wmode" value="transparent" />');a.push('<embed swLiveConnect="true" quality="high" wmode="transparent" src="'+b+'" flashvars="'+k.flashvars+'" width="'+k.width+'" height="'+k.height+'" name="'+h+'" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />');a.push("</object>");f.innerHTML=a.join("")}catch(g){utility.nvl_error(g,blogURL+"/widget.js/widget/_callFlash ",g.lineNumber);throw g}},_callXML:function(){$JE("widget._callXML");try{var g=this.options;var b=this.element;var a=g.setUrl;new $Ajax(a,{charset:"utf-8",onerror:g.onerror,onload:$Fn(function(e){this._cleanError();g.onLoad($Json(e.xml()).toObject())},this).bind()}).request()}catch(f){utility.nvl_error(f,blogURL+"/widget.js/widget/_callXML ",f.lineNumber)}},_cleanError:function(){$JE("widget._cleanError");var b=this.element;var a=$(b.id+"_error");if(a){a.style.display="none";b.style.display=""}}});var setPng24=function(b){$JE("setPng24");try{if(typeof b=="undefined"||b==null){return}if(($Agent().IE)){if($Agent().IE55){if(b.offsetWidth!=0){b.width=b.offsetWidth}}b.className=b.className.replace(/\bpng24\b/i,"");b.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b.src+"',sizingMethod='image');"}if($Agent().IE55){setTimeout(function(){pngIE55(b)},100)}return false}catch(a){utility.nvl_error(a,blogURL+"/widget.js/setPng24",a.lineNumber);throw a}};var pngIE55=function(a){$JE("pngIE55");if(a.offsetWidth!=0){a.width=a.offsetWidth}};var Stat=$Class({$init:function(){try{this.elBlogStat=$("blog-stat");this.elWidgetStat=$("widget-stat");if(this.elBlogStat){this._setEvent()}}catch(a){utility.nvl_error(a,blogURL+"/stat.js/Stat/__init",a.lineNumber);throw a}},_setEvent:function(){$Fn(this._onClick,this).attach(this.elBlogStat,"click")},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(l.className());if(l.hasClass("_viewReverage")){this.viewReverage()}else{if(l.hasClass("_viewScrap")){this.viewScrap()}}if((b.hasClass("_returnFalse"))||(l.hasClass("_returnFalse"))){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/stat.js/Stat/_onClick",h.lineNumber);throw h}},replaceHTML:function(a){try{this.elWidgetStat.innerHTML=a}catch(b){utility.nvl_error(b,blogURL+"/stat.js/Stat/replaceHTML",b.lineNumber);throw b}},viewScrap:function(){window.open(blogURL+"/ScrapList.nhn?blogId="+blogId,"scrapinfo","width=360, height=400, resizable=no, scrollbars=no")},viewNeighbor:function(){window.open(blogURL+"/BuddyMeList.nhn?blogId="+blogId,"buddyMe","width=450 ,height=430, resizable=no, scrollbars=no")},viewReverage:function(){window.open(blogURL+"/MyLeverageList.nhn?blogId="+blogId,"LeveragePop","width=450, height=495, resizable=no, scrollbars=no")}});var Counter=$Class({$init:function(){try{this.elCounterBody=$("blog-counter")}catch(a){utility.nvl_error(a,blogURL+"/counter.js/counter/__init",a.lineNumber);throw a}},replaceHTML:function(a){try{if(this.elCounterBody){this.elCounterBody.innerHTML=a}}catch(b){throw b}}});var Buddy=$Class({$init:function(){try{this.alreadyOpenedFlagArray=[];this.elBlogBuddy=$("blog-buddy-event-area");this.buddyGroupList=$("buddy-list");this.welBuddyGroupList=$Element(this.buddyGroupList);this.moreButton=$("buddy-list-i");if(!isBuddyOpen&&this.buddyGroupList&&this.moreButton){$Element(this.moreButton).addClass("listdown");$Element(this.buddyGroupList).hide()}if(this.elBlogBuddy){this._setEvent()}}catch(a){utility.nvl_error(a,blogURL+"/buddy.js/Buddy/__init",a.lineNumber);throw a}},_setEvent:function(){$Fn(this._onClick,this).attach(this.elBlogBuddy,"click")},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(b.className());if(b.hasClass("_viewMore")){this.moreButton.blur();this.viewMore()}else{if(b.hasClass("_viewBuddyListByGroup")){this.viewBuddyListByGroup(k[0],k[1])}else{if(b.hasClass("_viewNextBuddyListByGroup")){this.viewNextBuddyListByGroup(k[0],k[1],k[2])}}}if((b.hasClass("_returnFalse"))||(l.hasClass("_returnFalse"))||bIsRemocon||bIsPreview){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/buddy.js/Buddy/__init",h.lineNumber);throw h}},viewMore:function(){try{var a=$Element(this.moreButton);var g=$Element(this.buddyGroupList);var b=this.moreButton.title;if(a.hasClass("cm-icol")){if(a.hasClass("listdown")){g.show();this.moreButton.title=b.replace("닫힘","열림")}else{g.hide();this.moreButton.title=b.replace("열림","닫힘")}a.toggleClass("listdown","listup")}a=null;g=null}catch(f){utility.nvl_error(f,blogURL+"/buddy.js/Buddy/viewMore",f.lineNumber);throw f}},viewBuddyListByGroup:function(f,b){try{var a=$Element($("buddy"+b));var h=$Element($("buddyIcon"+b));if(!a.visible()){if(typeof this.alreadyOpenedFlagArray[b]=="undefined"){this.alreadyOpenedFlagArray[b]=true;this.requestAjax(f,b)}a.toggle();if(h.hasClass("buddydw")){h.removeClass("buddydw");h.addClass("buddyup")}else{h.addClass("buddyup")}}else{a.toggle();if(h.hasClass("buddyup")){h.removeClass("buddyup");h.addClass("buddydw")}else{h.addClass("buddydw")}}}catch(g){utility.nvl_error(g,blogURL+"/buddy.js/Buddy/viewBuddyListByGroup",g.lineNumber);throw g}},viewNextBuddyListByGroup:function(b,a,e){this.requestAjax(b,a,e)},replaceHTML:function(a,b){$(b).innerHTML=a},requestAjax:function(f,b,g){try{var a="/NBuddyList.nhn?blogId="+f+"&groupId="+b;a+=g?"&page="+g:"";new $Ajax(a,{method:"post",onerror:function(){alert("요청이 일시적으로 정상처리되지 못했습니다.\n잠시 후에 다시 시도해 주세요.")},onload:$Fn(function(k){var e=k.text();if(typeof e=="undefined"||e.indexOf("error_content")>-1){alert("요청이 일시적으로 정상처리되지 못했습니다.\n잠시 후에 다시 시도해 주세요.")}else{this.replaceHTML(e,"buddy"+b)}},this).bind()}).request()}catch(h){utility.nvl_error(h,blogURL+"/buddy.js/Buddy/requestAjax",h.lineNumber);throw h}},replaceBuddyGroupHTML:function(a){this.welBuddyGroupList.html(a)}});var Tag=$Class({tplTagPageUrl:jindo.$Template("/BlogPrivateTagCloud.nhn?blogId={=sBlogId}&logType={=sLogType}&sortoption={=sSortOption}"),$init:function(){try{this.elBlogTag=$("blog-tag");this.elRecent=$("recent");this.elPopular=$("popular");this.elWidgetTag=$("widget-tag");if(this.elBlogTag){this._setEvent()}}catch(a){utility.nvl_error(a,blogURL+"/tag.js/Tag/__init",a.lineNumber);throw a}},_setEvent:function(){$Fn(this._onClick,this).attach(this.elBlogTag,"click")},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(l.className());if(l.hasClass("_viewSmallTagCloud")){this.viewSmallTagCloud(k[0],k[1])}if(l.hasClass("_redirectTagPage")){this.redirectTagPage(k[0],k[1])}if((b.hasClass(g,"_returnFalse"))||(l.hasClass("_returnFalse"))||bIsRemocon||bIsPreview){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/tag.js/Tag/_onClick",h.lineNumber);throw h}},redirectTagPage:function(e,b){var a={sBlogId:e,sLogType:b,sSortOption:this.isRecentSort()?"2":"1"};self.location.href=this.tplTagPageUrl.process(a)},isRecentSort:function(){var a=$Element(this.elRecent);return a.hasClass("on")},viewSmallTagCloud:function(h,a){try{var g=$Element(this.elRecent);var k=$Element(this.elPopular);if(a==1){if(g){g.removeClass("on")}if(k){k.addClass("on")}}else{if(g){g.addClass("on")}if(k){k.removeClass("on")}}var f="/NTag4Ajax.nhn";var b=(isMemolog?"memolog":"mylog");var m={blogId:h,sortOption:a,logType:b};new $Ajax(f,{method:"post",onerror:function(){},onload:$Fn(function(e){if(this.elWidgetTag){this.elWidgetTag.innerHTML=e.text()}},this).bind()}).request(m)}catch(l){utility.nvl_error(l,blogURL+"/tag.js/Tag/viewSmallTagCloud",l.lineNumber);throw l}},replaceHTML:function(e){var a=$Element(this.elRecent);var b=$Element(this.elPopular);if(a){a.removeClass("on")}if(b){b.addClass("on")}if(this.elWidgetTag){this.elWidgetTag.innerHTML=e}}});var Category=$Class({$init:function(){this.el=$("blog-category");this.elCategoryNo=$("categoryNo")},_checkExceptionLayout:function(){var a=$Element($("right-area"));var b=$Element($("left-area"));return((a&&a.hasClass("_bLayout7"))||(b&&b.hasClass("_bLayout8")))},_setEvent:function(){$Fn(this._onClick,this).attach(this.el,"click")},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(l.className());if(b.hasClass("_viewMore")){this.elMoreButton.blur();this.viewMore()}else{if(b.hasClass("_folderToggle")){this.folderToggle(k[0],g)}else{if(b.hasClass("_categoryViewBlockLayer")){this.viewBlockLayer(g)}else{if(b.hasClass("_categoryHideBlockLayer")){this.closeBlockLayer()}else{if(l.hasClass("_selectCurrentCategory")){this._selectCurrentCategory(k[3])}}}}}if((b.hasClass("_returnFalse"))||(l.hasClass("_returnFalse"))||bIsRemocon||bIsPreview){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/category.js/Category/_onClick",h.lineNumber);throw h}},doTasksAfterCategoryLoad:function(){this._selectCurrentCategory(currentCategoryNo)},_selectCurrentCategory:function(b){try{var a;b=b||0;a=$("category"+this.selectedCategoryNo);this.elCurrentSelect=$("category"+b);if(a){$Element(a).removeClass("on")}if(this.elCurrentSelect){$Element(this.elCurrentSelect).addClass("on")}this.selectedCategoryNo=b;a=null}catch(f){utility.nvl_error(f,blogURL+"/category.js/Category/_selectCurrentCategory",f.lineNumber);throw f}},folderToggle:function(o,g){try{this.closeBlockLayer();var k,p,b,a,f,h;h=$Element(g);b=$$("."+o,this.el);var m=h.toggleClass("f_icoclosed","f_icoopen");this._setImgBtnAltValue(m);for(k=0,p=b.length;b.length>k;k++){$Element(b[k]).toggle()}k=p=b=a=f=h=null}catch(l){utility.nvl_error(l,blogURL+"/category.js/Category/folderToggle",l.lineNumber);throw l}},_setImgBtnAltValue:function(e){if(e==null){return}var a=e.attr("alt");var g;if(a==null||a==""){return}if(e.hasClass("f_icoopen")){g=true}else{if(e.hasClass("f_icoclosed")){g=false}else{return}}var b=a.lastIndexOf(g?"열림":"닫힘");var f=a.substring(0,b)+(g?"닫힘":"열림");e.attr("alt",f)},viewBlockLayer:function(f){try{var m,g,a,b,l;var n=$Element(f);m=n.offset();g=$Element($("body")).offset();oPosWidget=$Element($("blog-category")).offset();oWidgetWidth=$Element($("blog-category")).width();nPostLayer=(oWidgetWidth>>1)-90;a=oPosWidget.left-g.left+nPostLayer;b=m.top-g.top+n.width()+2+(this.bExceptionLayout?-50:0);var h=$Element(this.elCategoryBlockLayer);h.show();l=h.width();if(a+l+g.left>document.body.clientWidth){a=a-l}h.css({top:b+"px",left:a+"px"});m=g=a=b=l=null}catch(k){utility.nvl_error(k,blogURL+"/category.js/Category/viewBlockLayer",k.lineNumber);throw k}},closeBlockLayer:function(){if(this.isVisibledBlockLayer()){$Element(this.elCategoryBlockLayer).hide()}},viewMore:function(){if(this.isOpened()){this.closeBlockLayer();this.close()}else{this.open()}},open:function(){$Element(this.elCategoryList).show();$Element(this.elMoreButton).addClass("listup");$Element(this.elMoreButton).removeClass("listdown");var a=this.elMoreButton.title;this.elMoreButton.title=a.replace("닫힘","열림")},close:function(){$Element(this.elCategoryList).hide();$Element(this.elMoreButton).addClass("listdown");$Element(this.elMoreButton).removeClass("listup");var a=this.elMoreButton.title;this.elMoreButton.title=a.replace("열림","닫힘")},isOpened:function(){return $Element(this.elMoreButton).hasClass("listup")},isVisibledBlockLayer:function(){return $Element(this.elCategoryBlockLayer).visible()},replaceHTML:function(a){try{if(this.el){this.el.innerHTML=a}this.elCurrentCategory=$("category"+this.elCategoryNo.value);if(this.elCurrentCategory){$Element(this.elCurrentCategory).addClass("on")}this.elCategoryBlockLayer=$("category_block_layer");this.elCategoryList=$("category-list");this.elMoreButton=$("category-list-i");this.selectedCategoryNo=selectCategoryNo||0;this.alreadyOpenedFlagArray=[];if(this.el){this._setEvent()}this.elWriteBtn=$$.getSingle("._checkBlock",$("post-admin"));this.bExceptionLayout=this._checkExceptionLayout()}catch(b){utility.nvl_error(b,blogURL+"/category.js/Category/__init",b.lineNumber);throw b}}});var blockType=0;var item=1;var GMSG={ACTION_MESSAGE:{VALIDE_ERROR:["등록할 내용을 입력해 주세요.","ID형식이 올바르지 않습니다.","IP형식이 올바르지 않습니다.","URL형식이 올바르지 않습니다.","키워드 형식이 올바르지 않습니다.\n한글 1~10자이거나 영어 4자~20까지 입력할 수 있습니다."],CONFIRM_DELETE_ALL:["","ID 차단함을 모두 삭제 하시겠습니까?","등록된 내용을 모두 삭제하시겠습니까?","URL 차단함을 모두 삭제 하시겠습니까?","키워드 차단함을 모두 삭제 하시겠습니까?"],RESTORE:"선택한 덧글을 모두 복구 합니다.",RESTORE_ADD_WHITELIST:"선택한 덧글을 복구하며, 앞으로는 차단되지 않도록 화이트 리스트에 추가합니다.",DELETE_ADD_BLACKLIST:"선택한 덧글을 삭제하며, 앞으로는 차단되도록 블랙 리스트에 추가합니다.",DELETE:"정말 삭제하시겠습니까? 삭제한 덧글은 복구할 수 없습니다.",MOVE_TO_TRASH:"덧글을 삭제하겠습니까? 삭제한 덧글은 복구하실 수 없습니다.",BLOCK_AND_DELETE:"선택한 덧글을 차단 후 삭제하시겠습니까?\n\n로그인한 작성자의 덧글은  ID로 차단하고,\n로그인하지 않은 작성자의 덧글은 IP로 차단합니다.",EMPTY_SEARCH:"검색할  값이 비어 있습니다.",CONFIRM_BLOCK_ID:"이 ID가 남긴 덧글은 자동으로 차단합니다.",CONFIRM_BLOCK_IP:"이 IP에서 남기는 덧글은 자동으로 차단합니다.",LIMIT_BLOCK_MYBLOG:"내 아이디는 차단할 수 없습니다."},SERVER_MESSAGE:{SERVER_ERROR:"일시적인 서버 장애가 발생하였습니다.",ERROR:"실패하였습니다.",SUCCESS:"등록되었습니다.",OVERCOUNT:[["","블랙리스트 ID 최대 등록건수 1000개를 초과하여 해당 id는 블랙리스트 등록에 실패했습니다."]],BLACKLIST:[["","이미 차단된 ID 입니다."]],WHITELIST:[["","화이트리스트는 블랙리스트에 등록할 수 없습니다. 등록을 해제한 후에 차단해 주세요.","화이트리스트는 블랙리스트에 등록할 수 없습니다. 등록을 해제한 후에 차단해 주세요.","화이트리스트는 블랙리스트에 등록할 수 없습니다. 등록을 해제한 후에 차단해 주세요.","화이트리스트는 블랙리스트에 등록할 수 없습니다. 등록을 해제한 후에 차단해 주세요."],["","이미 등록된 ID입니다."]],SELFID:["내 아이디는 차단할 수 없습니다.","본인의 ID는 등록하지 않아도 차단되지 않습니다.","본인의 ID는 등록되지 않습니다. "],NEIGHBORID:["나의 이웃은 블랙리스트에 등록할 수 없습니다. 이웃을 해제한 후에 차단해 주세요.","이웃 ID는 등록하지 않아도 차단되지 않습니다."],WAIT_BOTH_NEIGHBOR:["상대방에게 서로이웃 신청을 하신 상태입니다.\n서로이웃 신청을 취소하신 후, 블랙리스트 추가가 가능합니다."],SUCCESS_REGIST:"등록되었습니다.",BEFORE_REGIST:"이미 등록되어 있습니다.",ERROR_REGIST_NEIGHBOR:"이웃은 차단 할 수 없습니다. 이웃을 해제한 후 차단하실 수 있습니다.",TRANSFER_SUCCESS:"성공적으로 반영되었습니다.",SELFIP:"내 IP는 차단할 수 없습니다."},RESULT_CODE:{ERROR:0,SUCCESS:1,OVERCOUNT:2,BLACKLIST:3,WHITELIST:4,UNKNOWNLIST:5,UNKNOWNITEM:6,EMPTY:7,SELFID:8,NEIGHBORID:9,EACH_NEIGHBORID:10,WAIT_BOTH_NEIGHBOR:11}};var G_ajaxHandler=function(b){if(b==null){alert(GMSG.SERVER_MESSAGE.SERVER_ERROR);return false}var a=parseInt(b,10);switch(a){case GMSG.RESULT_CODE.ERROR:alert(GMSG.SERVER_MESSAGE.ERROR);break;case GMSG.RESULT_CODE.SUCCESS:return true;case GMSG.RESULT_CODE.OVERCOUNT:alert(GMSG.SERVER_MESSAGE.OVERCOUNT[blockType][item]);return false;case GMSG.RESULT_CODE.BLACKLIST:alert(GMSG.SERVER_MESSAGE.BLACKLIST[blockType][item]);break;case GMSG.RESULT_CODE.WHITELIST:alert(GMSG.SERVER_MESSAGE.WHITELIST[blockType][item]);break;case GMSG.RESULT_CODE.SELFID:alert(GMSG.SERVER_MESSAGE.SELFID[blockType]);break;case GMSG.RESULT_CODE.NEIGHBORID:alert(GMSG.SERVER_MESSAGE.NEIGHBORID[blockType]);break;case GMSG.RESULT_CODE.EACH_NEIGHBORID:alert(GMSG.SERVER_MESSAGE.EACH_NEIGHBORID);break;case GMSG.RESULT_CODE.WAIT_BOTH_NEIGHBOR:alert(GMSG.SERVER_MESSAGE.WAIT_BOTH_NEIGHBOR[blockType]);break}alert(GMSG.SERVER_MESSAGE.ERROR);return false};var Visitor=$Class({$init:function(){this.elBlogVisitorWidget=$("blog-visitor");this.elMoreButton=$("visitor-list-i");this.welVisitorList=$Element($("visitor-list"));this.elBlockCheck=$("visited-blog-del");this.elVisitorBlock=$("visitor_block");if(this.elBlogVisitorWidget){this._setEvent()}},_setEvent:function(){$Fn(this._onClick,this).attach(this.elBlogVisitorWidget,"click")},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(l&&l.className()!=""?l.className():b.className());if(b.hasClass("_viewMore")){this.elMoreButton.blur();this.viewMore()}else{if(b.hasClass("_deleteVisitor")){this.deleteVisitor()}else{if(l.hasClass("_deleteFormClose")){this.deleteFormClose()}else{if(l.hasClass("_deleteVisitorWithBlock")){this.deleteVisitorWithBlock(k[0],k[1],k[2],k[3],k[4])}else{if(l.hasClass("_deleteVisitorByGuest")){this.deleteVisitorByGuest(k[0],k[1],k[2],k[3],k[4])}else{if(l.hasClass("_deleteVisitorLayer")){this.deleteVisitorLayer(g,k[0],k[1],k[2],k[3],k[4])}}}}}}if(b.hasClass("_returnFalse")||l.hasClass("_returnFalse")||bIsRemocon||bIsPreview){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/visitor.js/Visitor/_onClick",h.lineNumber);throw h}},deleteVisitorLayer:function(b,h,a,q,l,n){try{$("delete_btn").innerHTML='<a href="#" class="_returnFalse _deleteVisitorWithBlock _param('+h+"|"+a+"|"+q+"|"+l+"|"+n+')" ><img src="'+imageURL+'/imgs/btn_confirm_pop2.gif" width="55" height="27" alt="확인" /></a><a href="#" class="_deleteFormClose _returnFalse"><img src="'+imageURL+'/imgs/btn_cancel_pop2.gif" width="55" height="27" alt="취소" /></a>';this.elBlockCheck.checked=false;var p=$Element(b).offset();var g;var o=$Element(this.elVisitorBlock);o.show();var f=this.elVisitorBlock.offsetWidth;var m=this.elBlogVisitorWidget.offsetWidth;if(!this.nBasisLayer){this.nBasisLayer=o.offset().left}if(!this.nBasisWidget){this.nBasisWidget=$Element(this.elBlogVisitorWidget).offset().left}g=this.nBasisWidget-this.nBasisLayer-f;g=g<0?m:g;o.css({position:"absolute",top:p.top+"px",left:g+"px",zIndex:"100"})}catch(k){utility.nvl_error(k,blogURL+"/visitor.js/Visitor/deleteVisitorLayer",k.lineNumber);throw k}},deleteFormClose:function(){$Element(this.elVisitorBlock).hide()},deleteVisitorWithBlock:function(f,m,l,b,k){try{if(this.elBlockCheck.checked){var a="/NVisitorBlock4Ajax.nhn?blogId="+f+"&blockId="+k;var g=new $Ajax(a,{method:"post",onerror:function(){alert("요청이 일시적으로 정상처리되지 못했습니다.\n잠시 후에 다시 시도해 주세요.")},onload:$Fn(function(e){if(G_ajaxHandler(e.text())){this.deleteVisitor(f,m,l,b,k);this.deleteFormClose();if(confirm("신고가 완료되었습니다.\n\n스팸차단 설정 페이지로 이동하시겠습니까?\n추가된 블랙리스트를 확인하실 수 있습니다.")){document.location=adminURL+"/"+f+"?Redirect=UserFilter"}}else{this.deleteVisitor(f,m,l,b,k);this.deleteFormClose()}},this).bind()}).request()}else{this.deleteVisitor(f,m,l,b,k);this.deleteFormClose()}}catch(h){utility.nvl_error(h,blogURL+"/visitor.js/Visitor/deleteVisitorWithBlock",h.lineNumber);throw h}},deleteVisitor:function(g,m,l,f,a){try{var b="/NVisitorDelete.nhn?blogId="+g+"&visitNo="+m+"&listNumVisitor="+l+"&isVisitorOpen="+f+"&visitId="+a;var h=new $Ajax(b,{method:"post",onerror:function(){alert("요청이 일시적으로 정상처리되지 못했습니다.\n잠시 후에 다시 시도해 주세요.")},onload:$Fn(function(e){if(typeof e!="undefined"){this.replaceHTML(e.json().visitorContent)}},this).bind()}).request()}catch(k){utility.nvl_error(k,blogURL+"/visitor.js/Visitor/deleteVisitor",k.lineNumber);throw k}},deleteVisitorByGuest:function(e,g,f,b,a){if(confirm("다녀간 블로거를 삭제하시겠습니까?")){this.deleteVisitor(e,g,f,b,a)}},viewMore:function(){if(this.isOpened()){this.close()}else{this.open()}},replaceHTML:function(a){this.welVisitorList.html(a);this.saveContents(a);this.open()},open:function(){try{if(!this.sContents){var a="/NVisitor4Ajax.nhn?blogId="+blogId+"&listNumVisitor="+listNumVisitor+"&isVisitorOpen="+isVisitorOpen;var f=new $Ajax(a,{method:"post",onerror:function(){alert("요청이 일시적으로 정상처리되지 못했습니다.\n잠시 후에 다시 시도해 주세요.")},onload:$Fn(function(e){if(typeof e!="undefined"){this.replaceHTML(e.json().visitorContent)}},this).bind()}).request();f=null}else{this.welVisitorList.show();var b=$Element(this.elMoreButton);var h=this.elMoreButton.title;b.addClass("listup");b.removeClass("listdown");this.elMoreButton.title=h.replace("닫힘","열림")}}catch(g){utility.nvl_error(g,blogURL+"/visitor.js/Visitor/open",g.lineNumber);throw g}},close:function(){this.welVisitorList.hide();var a=$Element(this.elMoreButton);var b=this.elMoreButton.title;a.addClass("listdown");a.removeClass("listup");this.elMoreButton.title=b.replace("열림","닫힘")},isOpened:function(){return $Element(this.elMoreButton).hasClass("listup")},saveContents:function(a){this.sContents=a;return a}});var Calendar=$Class({$init:function(){this.elCalendarWidget=$("blog-calendar")},_setEvent:function(){if(this.elCalendarWidget){$Fn(this._onClick,this).attach(this.elCalendarWidget,"click")}},_onClick:function(f){try{var g=f.element;var b=utility.getElement(g,"a")||g;var a=$Element(g);var l=$Element(b);var k=utility.getParam(l&&l.className()!=""?l.className():a.className());if(a.hasClass("_reload")){this.reload(k[0],k[1],parseInt(k[2],10))}else{if(a.hasClass("_viewMonthly")){this.viewMonthly()}else{if(a.hasClass("_viewCalendar")){this.viewCalendar()}}}if(l.hasClass("_setTop")&&(!bIsRemocon||!bIsPreview)){utility.setTop()}if(a.hasClass("_returnFalse")||l.hasClass("_returnFalse")||bIsRemocon||bIsPreview){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/calendar.js/Calendar/_onClick",h.lineNumber);throw h}},reload:function(f,b,k){try{var a="/NCalendar4Ajax.nhn?blogId="+f+"&calType="+k+"&cdate="+b;var g=new $Ajax(a,{method:"post",onerror:function(){alert("요청이 일시적으로 정상처리되지 못했습니다.\n잠시 후에 다시 시도해 주세요.")},onload:k==1?$Fn(this.replaceCalendarHTML,this).bind():$Fn(this.replaceMonthlyHTML,this).bind()});g.request();g=null}catch(h){utility.nvl_error(h,blogURL+"/calendar.js/Calendar/reload",h.lineNumber);throw h}},viewMonthly:function(){if(this.sCachedMonthly==""){this.reload(blogId,"",2)}else{this.showMonthlyLayer()}},viewCalendar:function(){if(this.sCachedCalendar==""){this.reload(blogId,"",1)}else{this.showCalendarLayer()}},replaceHTML:function(a){try{if(this.elCalendarWidget){this.elCalendarWidget.innerHTML=a}calType=$("calType").value;this.welMonthlyView=$Element($("Postinfo"));this.welCalendarView=$Element($("CalFrame"));this.sCachedMonthly="";this.sCachedCalendar="";if(calType=="2"){if(this.welMonthlyView){this.sCachedMonthly=this.welMonthlyView.html();this.showMonthlyLayer()}}else{if(this.welCalendarView){this.sCachedCalendar=this.welCalendarView.html();this.showCalendarLayer()}}this._setEvent()}catch(b){utility.nvl_error(b,blogURL+"/calendar.js/Calendar/__init",b.lineNumber);throw b}},replaceCalendarHTML:function(b){var a=b.text();this.welCalendarView.html(a);this.sCachedCalendar=a;this.showCalendarLayer()},replaceMonthlyHTML:function(b){var a=b.text();this.welMonthlyView.html(a);this.sCachedMonthly=a;this.showMonthlyLayer()},showMonthlyLayer:function(){this.welCalendarView.hide();this.welMonthlyView.show()},showCalendarLayer:function(){this.welMonthlyView.hide();this.welCalendarView.show()}});var Comment=$Class({$init:function(){this.elBlogRecentComment=$("blog-recent-comment")},_setEvent:function(){$Fn(this._onClick,this).attach(this.elBlogRecentComment,"click")},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(l&&l.className()!=""?l.className():b.className());if(oReadOnly.checkReadOnly(f)==true){return}if(b.hasClass("_viewMore")){this.moreButton.blur();this.viewMore()}else{if(b.hasClass("_viewAll")){if(!bIsRemocon||!bIsPreview){this.viewAll(k[0])}}}if(b.hasClass("_returnFalse")||l.hasClass("_returnFalse")||bIsRemocon||bIsPreview){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/comment.js/Comment/_onClick",h.lineNumber);throw h}},viewMore:function(){try{var a=$Element(this.moreButton);var b=this.moreButton.title;if(a.hasClass("listup")){a.removeClass("listup");a.addClass("listdown");this.moreButton.title=b.replace("열림","닫힘")}else{a.removeClass("listdown");a.addClass("listup");this.moreButton.title=b.replace("닫힘","열림")}if(this.commentList){$Element(this.commentList).toggle()}utility.ellipsisPage()}catch(f){utility.nvl_error(f,blogURL+"/comment.js/Comment/viewMore",f.lineNumber);throw f}},viewAll:function(a){window.open(adminURL+"/AdminMain.nhn?blogId="+blogId+"&Redirect=CommentManage",a,"")},replaceHTML:function(a){try{if(this.elBlogRecentComment){this.elBlogRecentComment.innerHTML=a}this.moreButton=$("comment-list-i");this.commentList=$("comment-list");if(isCommentOpen&&this.commentList&&this.moreButton){$Element(this.commentList).show();$Element(this.moreButton).removeClass("listdown");$Element(this.moreButton).addClass("listup");utility.ellipsisPage()}if(this.elBlogRecentComment){this._setEvent()}}catch(b){utility.nvl_error(b,blogURL+"/comment.js/Comment/__init",b.lineNumber);throw b}}});var Shortcut=$Class({$init:function(){this.welDirectlyDiv=$Element($("Directlydiv"));this.welShortcut=$Element($("shortcut"));this.hide();this._meCountUpdated=false},doClick:function(){try{if(this.welDirectlyDiv&&this.welShortcut){if(!this.welDirectlyDiv.visible()){this._getMeCount();this.welDirectlyDiv.show();this.welShortcut.addClass("go-up");this.welShortcut.removeClass("go-down");this.welDirectlyDiv.css({visibility:"visible"})}else{this.welDirectlyDiv.hide();this.welShortcut.addClass("go-down");this.welShortcut.removeClass("go-up");this.welDirectlyDiv.css({visibility:"hidden"})}}}catch(a){utility.nvl_error(a,blogURL+"/gnb.js/Shortcut/doClick",a.lineNumber);throw a}},hide:function(){if(this.welShortcut&&this.welDirectlyDiv&&this.welDirectlyDiv.visible()){this.welDirectlyDiv.hide();this.welShortcut.addClass("go-down");this.welShortcut.removeClass("go-up");this.welDirectlyDiv.css({visibility:"hidden"})}},show:function(){if(this.welShortcut&&this.welDirectlyDiv&&!this.welDirectlyDiv.visible()){this._getMeCount();this.welDirectlyDiv.show();this.welShortcut.addClass("go-up");this.welShortcut.removeClass("go-down");this.welDirectlyDiv.css({visibility:"visible"})}},_getMeCount:function(){if(this._meCountUpdated){return}var a="http://gn.naver.com/getLoginStatus.nhn?svc=blog&gnb_community_utf8&charset=utf8";var b=new $Ajax(a,{type:"jsonp",onload:$Fn(function(f){var e=f.json();if(e.loginStatus=="Y"){this._showMeCount(Number(e.meCount)+Number(e.talkCount));this._meCountUpdated=true}},this).bind(),callbackname:"callback"});b.request()},_showMeCount:function(b){if(b<=0){return}if(b>99){b="99+"}var a=$Element($$.getSingle("._naverMe",$("Directlydiv")));a.html(a.html()+" <span><em><i>"+b+"</i></em></span>")}});var MyMenu=$Class({$init:function(){this.welMyMenuDiv=$Element($("MyMenudiv"));this.welMyMenu=$Element($("mymenu"));this.hide()},doClick:function(){try{if(this.welMyMenuDiv&&this.welMyMenu){if(!this.welMyMenuDiv.visible()){this.welMyMenuDiv.show();this.welMyMenu.addClass("go-up");this.welMyMenu.removeClass("go-down");this.welMyMenuDiv.css({visibility:"visible"})}else{this.welMyMenuDiv.hide();this.welMyMenu.addClass("go-down");this.welMyMenu.removeClass("go-up");this.welMyMenuDiv.css({visibility:"hidden"})}}}catch(a){utility.nvl_error(a,blogURL+"/gnb.js/MyMenu/doClick",a.lineNumber);throw a}},hide:function(){if(this.welMyMenu&&this.welMyMenuDiv&&this.welMyMenuDiv.visible()){this.welMyMenuDiv.hide();this.welMyMenu.addClass("go-down");this.welMyMenu.removeClass("go-up");this.welMyMenuDiv.css({visibility:"hidden"})}},show:function(){if(this.welMyMenu&&this.welMyMenuDiv&&!this.welMyMenuDiv.visible()){this.welMyMenuDiv.show();this.welMyMenu.addClass("go-up");this.welMyMenu.removeClass("go-down");this.welMyMenuDiv.css({visibility:"visible"})}}});var Neighborhood=$Class({$init:function(){this.welBuddyDiv=$Element($("buddydiv"));this.welBuddyList=$Element($("buddylist"));this.hide()},doClick:function(){try{window.focus();if(!this.welBuddyDiv&&!this.welBuddyList){return}if(!this.welBuddyDiv.visible()){this.welBuddyList.html("<iframe id='buddyListiframe' name='buddyListiframe' scrolling='no' width='355' height='535' src='"+blogURL+"/BuddyListLayer.nhn?blogId="+blogId+"' frameborder='0' style='overflow:hidden' title='이웃리스트'></iframe>");this.welBuddyDiv.show();this.welBuddyDiv.css({display:"block"});this.welBuddyList.addClass("up");this.welBuddyList.removeClass("down");utility.writeNewLcsNonGdid("sti","blog_gnbneighbor")}else{this.hide()}}catch(a){utility.nvl_error(a,blogURL+"/gnb.js/Neighborhood/doClick",a.lineNumber);throw a}},hide:function(){if(this.welBuddyDiv&&this.welBuddyList){this.welBuddyDiv.hide(this.elBuddyDiv);this.welBuddyList.removeClass("up");this.welBuddyList.addClass("down");this.welBuddyDiv.css({display:"none"})}}});var Gnb=$Class({$init:function(){try{this.elBlogGnb=$("blog-gnb");this.elShortcutLink=$("shortcutLink");this.elDirectlydiv=$("Directlydiv");this.elMyMenuLink=$("myMenuLink");this.elMyMenudiv=$("MyMenudiv");this.sc=new Shortcut();this.nbh=new Neighborhood();this.mm=new MyMenu();this.shortcutLinkMouseoverTop=false;this.shortcutLinkMouseoverMenu=false;this.mymenuLinkMouseoverTop=false;this.mymenuLinkMouseoverMenu=false;if(this.elBlogGnb){this._setEvent()}}catch(a){utility.nvl_error(a,blogURL+"/gnb.js/Gnb/__init",a.lineNumber);throw a}},_pause:function(b){var a=new Date();var e=a.getTime()+b;while(true){a=new Date();if(a.getTime()>e){return}}},_setEvent:function(){$Fn(this._onClick,this).attach(this.elBlogGnb,"click");$Fn(this._shortcutClickShow,this).attach(this.elShortcutLink,"click");$Fn(this._showTop,this).attach(this.elShortcutLink,"mouseover");$Fn(this._hideTop,this).attach(this.elShortcutLink,"mouseout");$Fn(this._showMenu,this).attach(this.elDirectlydiv,"mouseover");$Fn(this._hideMenu,this).attach(this.elDirectlydiv,"mouseout");var b=$$("a",this.elDirectlydiv);if(b.length>0){$Fn(this._hideMenu,this).attach(b[b.length-1],"focusout")}if(this.elMyMenuLink){$Fn(this._mymenuClickShow,this).attach(this.elMyMenuLink,"click");$Fn(this._mymenushowTop,this).attach(this.elMyMenuLink,"mouseover");$Fn(this._mymenuhideTop,this).attach(this.elMyMenuLink,"mouseout")}if(this.elMyMenudiv){$Fn(this._mymenushowMenu,this).attach(this.elMyMenudiv,"mouseover");$Fn(this._mymenuhideMenu,this).attach(this.elMyMenudiv,"mouseout");var a=$$("a",this.elMyMenudiv);if(a.length>0){$Fn(this._mymenuhideMenu,this).attach(a[a.length-1],"focusout")}}},_shortcutClickShow:function(){this.sc.doClick()},_showTop:function(){this.shortcutLinkMouseoverTop=true;this._showElement()},_hideTop:function(){this.shortcutLinkMouseoverTop=false;setTimeout("gnb._hideElement()",200)},_showMenu:function(){this.shortcutLinkMouseoverMenu=true;this._showElement()},_hideMenu:function(){this.shortcutLinkMouseoverMenu=false;setTimeout("gnb._hideElement()",100)},_showElement:function(){this.shortcut()},_hideElement:function(){if(this.shortcutLinkMouseoverTop==true||this.shortcutLinkMouseoverMenu==true){}else{this.sc.hide()}},_mymenuClickShow:function(){this.mm.doClick()},_mymenushowTop:function(){this.mymenuLinkMouseoverTop=true;this._mymenushowElement()},_mymenuhideTop:function(){this.mymenuLinkMouseoverTop=false;setTimeout("gnb._mymenuhideElement()",100)},_mymenushowMenu:function(){this.mymenuLinkMouseoverMenu=true;this._mymenushowElement()},_mymenuhideMenu:function(){this.mymenuLinkMouseoverMenu=false;setTimeout("gnb._mymenuhideElement()",100)},_mymenushowElement:function(){this.mymenu()},_mymenuhideElement:function(){if(this.mymenuLinkMouseoverTop==true||this.mymenuLinkMouseoverMenu==true){}else{this.mm.hide()}},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(l.className());if(l.hasClass("_buddyList")){if(!bIsRemocon||!bIsPreview){this.buddyList()}}if((b.hasClass("_returnFalse"))||(l.hasClass("_returnFalse"))){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/gnb.js/Gnb/_onClick",h.lineNumber);throw h}},buddyList:function(){this.sc.hide();this.mm.hide();this.nbh.doClick()},shortcut:function(){this.sc.show();this.nbh.hide();this.mm.hide()},mymenu:function(){this.mm.show();this.nbh.hide();this.sc.hide()}});var Search=$Class({$init:function(){this.elSearchForm=$("searchfrm");if(this.elSearchForm){this.elSearchText=this.elSearchForm.SearchText}if(this.elSearchForm&&this.elSearchText){this._setEvent()}},_setEvent:function(){$Fn(this._onSubmit,this).attach(this.elSearchForm,"submit");$Fn(this._onFocus,this).attach(this.elSearchText,"focus");$Fn(this._onBlur,this).attach(this.elSearchText,"blur")},_onFocus:function(a){utility.bSelectPrevent=true;this.elSearchText.select()},_onBlur:function(a){utility.checkRClickYN(rightClickOpenYn,blogOwner)},_onSubmit:function(a){if(!this.validate()){a.stop();return false}this.elSearchForm.submit()},validate:function(){var a=this.elSearchText.value;if(a.split(" ").join("")==""){alert("검색할 내용을 넣어주세요");return false}return true}});var Emblem=$Class({$init:function(){},showPowerblogEmblemControlPop:function(f,h){try{this.elPowerBlogEmblem=f;this.elEmblemCloseLayer=h;var g=$Agent();var m=$Element(this.elPowerBlogEmblem).offset();var a=parseInt(g.IE?m.left-348-143:m.left-348);var l=a<0?0:a;var b=$Element(this.elEmblemCloseLayer);b.css({top:m.top+"px",left:l+"px"});b.show()}catch(k){utility.nvl_error(k,blogURL+"/emblem.js/Emblem/showPowerblogEmblemControlPop",k.lineNumber);throw k}},hideEmblem:function(){try{var a="/PowerBlogUpdateEmblemDisplayAsync.nhn";var f={blogId:blogId,isDisplayEmblem:false};new $Ajax(a,{method:"post",onload:$Fn(function(g){var e=g.json();if(e.result=="success"){$Element(this.elEmblemCloseLayer).hide();$Element(this.elPowerBlogEmblem).hide()}},this).bind()}).request(f)}catch(b){utility.nvl_error(b,blogURL+"/emblem.js/Emblem/hideEmblem",b.lineNumber);throw b}},hideEmblemLayer:function(){$Element(this.elEmblemCloseLayer).hide()}});var emblem=new Emblem();var Profile=$Class({openType:null,isDomain:null,domainUrl:null,$init:function(){this.welProfileBody=$Element($("blog-profile"))},replaceHTML:function(a){if(this.welProfileBody){this.welProfileBody.html(a)}this.elBlogProfile=$("blog-profile");this.readOnlyLinkErrorMsg=$("readOnlyLinkErrorMsg");this.elPowerBlogYearList=$("gsPowerBlogYearList");if(this.elPowerBlogYearList){if(typeof(this.elPowerBlogYearList)!="undefined"){var b=new PowerBlogYearList()}}this.elPowerBlogEmblem=$("power_blog_emblem");this.elEmblemCloseLayer=$("emblem_close");if(this.elBlogProfile){this._setEvent()}},_setEvent:function(){$Fn(this._onClick,this).attach(this.elBlogProfile,"click")},_onClick:function(f){try{if(bIsRemocon||bIsPreview){return}var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(l&&l.className()!=""?l.className():b.className());if(oReadOnly.checkReadOnly(f)==true){return}if(l.hasClass("_zoomIn")){utility.zoomIn(k[0],k[1],k[2])}else{if(b.hasClass("_profileValidate")){this.validate(k[0])}else{if(l.hasClass("_conBuddy")){this.conBuddy()}else{if(l.hasClass("_addBuddyPop")){this.addBuddyPop()}else{if(l.hasClass("_sendNote")){this.sendNote()}else{if(l.hasClass("_remoconOpen")){this.remoconOpen()}else{if(l.hasClass("_checkBlock")){this.checkBlock(f)}else{if(l.hasClass("_showPowerblogEmblemControlPop")){emblem.showPowerblogEmblemControlPop(this.elPowerBlogEmblem,this.elEmblemCloseLayer)}else{if(l.hasClass("_hideEmblemLayer")){emblem.hideEmblemLayer()}else{if(b.hasClass("_hideEmblem")){emblem.hideEmblem()}}}}}}}}}}if((b.hasClass("_returnFalse"))||(l.hasClass("_returnFalse"))){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/profile.js/Profile/_onClick",h.lineNumber);throw h}},sendNote:function(){loginObj.isLogin(function(){var a=window.open(noteURL+"/note/sendForm.nhn?targetUserId="+blogId+"&svcType=1&popup=1","IdMenuPop","width=390,height=440,scrollbars=no,resizable=no");popupEnableChecker.checkOpenedWindowAndAlertWhenDisabledStatus(a,userAgentUtil.isIPadRequest())},loginObj.openLayeredLogin)},inviteCafe:function(){window.open(cafeURL+"/CafeInviteView.nhn?m=view&inviteid="+blogId,"IdMenuPop","width=350,height=390,scrollbars=no,resizable=no")},addBuddy:function(){loginObj.isLogin($Fn(function(){this.checkBlackList(function(){var b=window.open("","IdMenuPop","width=420,height=288,scrollbars=yes");if(popupEnableChecker.checkOpenedWindowAndAlertWhenDisabledStatus(b,userAgentUtil.isIPadRequest())){var a=$("addBuddyPopupForm");if(a==null){a=document.createElement("form");a.id="addBuddyPopupForm";document.body.appendChild(a)}a.target="IdMenuPop";a.method="post";a.action=blogURL+"/buddy/BuddyAdd.nhn?blogId="+blogId;a.submit()}})},this).bind(),loginObj.openLayeredLogin)},addBuddyPop:function(){loginObj.isLogin($Fn(function(){this.checkBlackList($Fn(function(){var b=window.open("","addBuddy","width=420,height=288,scrollbars=yes");if(popupEnableChecker.checkOpenedWindowAndAlertWhenDisabledStatus(b,userAgentUtil.isIPadRequest())){var a=$("addBuddyPopupForm");if(a==null){a=document.createElement("form");a.id="addBuddyPopupForm";document.body.appendChild(a)}a.target="addBuddy";a.method="post";a.action=blogURL+"/BuddyAdd.nhn?blogId="+blogId;a.submit()}},this).bind())},this).bind(),loginObj.openLayeredLogin)},checkBlackList:function(f){try{var b=this.isHappyLogId(userId);if(b){alert("해피로그ID는 블로그 이웃 추가 기능을 사용할 수 없습니다.");return}var a="/AddBuddyBlackIdListCheck.nhn?blogId="+userId;new $Ajax(a,{header:{ajax:"true"},async:"false",method:"post",onload:$Fn(function(h){var e=h.json();if(e){alert("나의 블랙리스트에 등록된 블로거 입니다.\n이웃추가를 원하시면 내블로그 관리>기본설정>스팸차단설정의\n블랙리스트 ID에서 먼저 삭제해주세요.")}else{f.call()}},this).bind()}).request({nPaperId:blogId})}catch(g){utility.nvl_error(g,blogURL+"/profile.js/Profile/checkBlackList",g.lineNumber);throw g}},happyLogIdPrefix:"hlog_",isHappyLogId:function(a){return a&&a.indexOf(this.happyLogIdPrefix)==0},conBuddy:function(){this.checkBlackList(function(){window.open(blogURL+"/buddy/addBuddyPop.jsp?blogId="+blogId,"addBuddy","width=348,height=390,scrollbars=yes")})},makeGift:function(){window.open(itemURL+"/itembag/GiftPop.jsp?userid="+blogId,"IdMenuPop","width=400 height=500 status=no scroll=no")},viewBlog:function(){var a=blogURL+"/"+blogId;switch(this.openType){case"0":document.location.href=a;break;case"1":parent.location.href=a;break;case"2":top.location.href=a;break;case"3":window.open(a,"PopBlog","width=800,height=700");break;default:document.location.href=a;break}},viewBlogByDomain:function(a){switch(this.openType){case"0":document.location.href=this.domainUrl;break;case"1":parent.location.href=this.domainUrl;break;case"2":top.location.href=this.domainUrl;break;case"3":window.open(this.domainUrl,"PopBlog","width=800,height=700");break;default:document.location.href=this.domainUrl;break}},checkBlock:function(a){a.stop();if(bIsRemocon||bIsPreview){return}if(penalty.isBlocked()){penalty.showMessage()}else{if($Element(a.element).hasClass("_blocked")){alert("이용제한 중인 카테고리는\n새 글 작성 및 글 이동을 하실 수 없습니다")}else{loginObj.isLogin(function(){location.href=a.element.href},loginObj.openLayeredLogin)}}},remoconOpen:function(){alert("리모콘 사용 중에는 포스트 쓰기를 하실 수 없습니다.\n리모콘을 닫으신 후 포스트 쓰기를 해주세요.")},validate:function(a){switch(a){case"EVENT1":if(this.isDomain=="true"){this.viewBlogByDomain(blogId)}else{this.viewBlog(blogId)}break;case"EVENT2":if(blogOwner){alert("자신에게 쪽지를 보낼 수 없습니다.")}else{this.sendNote()}break;case"EVENT3":if(blogOwner){alert("자신을 카페에 초대할 수 없습니다.")}else{this.inviteCafe()}break;case"EVENT4":if(blogOwner){alert("자신을 이웃추가 할 수 없습니다.")}else{this.addBuddy()}break;case"EVENT5":if(blogOwner){alert("자신에게 선물할 수 없습니다.")}else{this.makeGift()}break;case"EVENT6":this.makeGift();break}}});var PowerBlogYearList=$Class({elList:null,elPrevButton:null,elNextButton:null,powerBlogYearListData:null,powerBlogYearListTotalCount:0,powerBlogYearListCurrentPage:1,powerBlogYearListPageSize:5,prevButtonEnableHTML:'<a href="#" class="col fil7 prev" id="prevButton">이전</a>',prevButtonDisableHTML:'<span class="col fil3 prev" id="prevButton">이전</span>',nextButtonEnableHTML:'<a href="#" class="col fil7 next" id="nextButton">다음</a>',nextButtonDisableHTML:'<span class="col fil3 prev next" id="nextButton">다음</span>',$init:function(){this.elPowerBlogYearList=$("gsPowerBlogYearList");if(typeof(this.elPowerBlogYearList)=="undefined"){return}this.elList=$("powerBlogYearList");this.elListPaging=$("powerblog_year_list_paging");this.powerBlogYearListData=$Json(this.elPowerBlogYearList.value).toObject();this.elPrevButton=$("powerblog_year_list_prev_button");this.elNextButton=$("powerblog_year_list_next_button");if(this.powerBlogYearListData){this.powerBlogYearListTotalCount=$Json(this.powerBlogYearListData).toObject().length;if(this.powerBlogYearListTotalCount<=this.powerBlogYearListPageSize){$Element(this.elListPaging).hide()}this._setListDataView();this._setEvent()}},_setEvent:function(){$Fn(this._onClick,this).attach(this.elPrevButton,"click");$Fn(this._onClick,this).attach(this.elNextButton,"click")},_onClick:function(b){var e=b.element;var a=$Element(e);if(a.$value().id=="prevButton"){if(this.powerBlogYearListCurrentPage>1){this.powerBlogYearListCurrentPage=this.powerBlogYearListCurrentPage-1}}else{if(a.$value().id=="nextButton"){if(this.powerBlogYearListPageSize*this.powerBlogYearListCurrentPage<this.powerBlogYearListTotalCount){this.powerBlogYearListCurrentPage=this.powerBlogYearListCurrentPage+1}}}this._setListDataView()},_setListDataView:function(){if(this.powerBlogYearListData){this._setListData();this._setPrevButtonViewVisible();this._setNextButtonViewVisible()}},_setListData:function(){if(this.powerBlogYearListData){var a="";for(var b=(this.powerBlogYearListCurrentPage-1)*this.powerBlogYearListPageSize;b<this.powerBlogYearListCurrentPage*this.powerBlogYearListPageSize;b++){if(this.powerBlogYearListData[b]==null){break}a=a+'<li class="col"><em class="fil5">'+this.powerBlogYearListData[b]["year"]+'</em><span class="fil7">'+this.powerBlogYearListData[b]["childGroupName"]+"</span></li>"}$Element(this.elList).html(a)}},_setPrevButtonViewVisible:function(){if($Element(this.elPrevButton).visible()){if(this.powerBlogYearListCurrentPage>1){$Element(this.elPrevButton).html(this.prevButtonEnableHTML)}else{$Element(this.elPrevButton).html(this.prevButtonDisableHTML)}}},_setNextButtonViewVisible:function(){if($Element(this.elNextButton).visible()){if(this.powerBlogYearListPageSize*this.powerBlogYearListCurrentPage<this.powerBlogYearListTotalCount){$Element(this.elNextButton).html(this.nextButtonEnableHTML)}else{$Element(this.elNextButton).html(this.nextButtonDisableHTML)}}}});var Profilecategory=$Class({$init:function(){this.elBlogCategory=$("blog-category");this.selectedCategoryNo=1;this.welProfileCategory=$Element($("category"+this.selectedCategoryNo));if(this.elBlogCategory){this._setEvent()}},_setEvent:function(){$Fn(this._onClick,this).attach(this.elBlogCategory,"click")},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(l.className());if(l.hasClass("_selectCurrentCategory")){this.selectCurrentCategory(k[0])}if((b.hasClass(g,"_returnFalse"))||(l.hasClass("_returnFalse"))){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/profile_category.js/Profilecategory/_onClick",h.lineNumber);throw h}},selectCurrentCategory:function(a){try{this.selectedCategoryNo=a;utility.setTop()}catch(b){utility.nvl_error(b,blogURL+"/profile_category.js/Profilecategory/selectCurrentCategory",b.lineNumber);throw b}}});var Menu=$Class({$init:function(){this.el=$("blog-menu");this.elAppMenu=$("appMenu");if(!this.el){return}this._setEvent();this._setMenuData()},_setEvent:function(){$Fn(this._onClick,this).attach(this.el,"click")},_onClick:function(b){try{var f=b.element;var a=utility.getElement(f,"a");if(bIsRemocon||bIsPreview){b.stop()}else{if(a){if($Element(a).attr("id")=="appMenu"){this._excuteApp(a);b.stop()}else{a.href=a.href+"&userSelectMenu=true"}}}if($Element(f).hasClass("_doNclick")){var k=utility.getParam(a.className);var g=k[1];if(g==null||g==""){return}if(g=="mapview"){clickcr(f,"LNB.map","","",b.$value())}else{if(g=="library"){clickcr(f,"LNB.library","","",b.$value())}else{if(g=="social game"){clickcr(f,"LNB.socialgame","","",b.$value())}else{if(g=="memolog"){clickcr(f,"LNB.memo","","",b.$value())}else{if(g=="tag"){clickcr(f,"LNB.tags","","",b.$value())}else{if(g=="guestbook"){clickcr(f,"LNB.guest","","",b.$value())}}}}}}}}catch(h){utility.nvl_error(h,blogURL+"/menu.js/Menu/_onClick",h.lineNumber);throw h}},_excuteApp:function(m){var e=1000;var g=screen.availHeight;var a=m.href;var h=(screen.availWidth-e)/2;var f=0;var l="left="+h+", top="+f+",";var k=utility.getParam(m.className);var b="";if(k[3]!=""){if(blogOwner){b="appPlayer"+k[3]}else{b="appPlayer"+blogId}}window.open(a,b,l+" scrollbars=yes, toolbar=no, location=no, status=no, menubars=no, resizable=yes, width="+e+", height="+g)},_setMenuData:function(){try{var b=$$("a",this.el);this.htMenu={};this.htCategoryMenu=[];for(var f=0,a=b.length;f<a;f++){var h=utility.getParam(b[f].className);if(h&&h[1]){if(h[1]=="category"){this.htMenu["category"+h[2]]=b[f];this.htCategoryMenu.push(h[2])}else{this.htMenu[h[1]]=b[f]}}h=null}b=null}catch(g){utility.nvl_error(g,blogURL+"/menu.js/Menu/_setMenuData",g.lineNumber);throw g}},hasCategoryMenu:function(e){if(!e){return false}for(var b=0,a=this.htCategoryMenu.length;b<a;b++){if(this.htCategoryMenu[b]==e){return true}}return false},selectMenu:function(b){try{if(!this.htMenu[b]){return}this.deselectMenu(b);var a=$Element(this.htMenu[b]);a.addClass("on");a.removeClass("off");var f=$("selectedMenu");if(f){f.innerHTML=a.html()}}catch(g){utility.nvl_error(g,blogURL+"/menu.js/Menu/selectMenu",g.lineNumber);throw g}},syncMenu:function(k,a){try{var f,b,h;if(isPrologue){f="prologue"}else{if(isMemolog){f="memolog"}else{b=this.hasCategoryMenu(a);h=this.hasCategoryMenu(k);if(k==0||(!h&&!b)){f="blog"}else{f="category"+((b&&!h)?a:k)}}}this.selectMenu(f);f=b=null}catch(g){utility.nvl_error(g,blogURL+"/menu.js/Menu/syncMenu",g.lineNumber);throw g}},deselectMenu:function(g){try{var a=null;var f=$$("a",this.el);for(var h=0,b=f.length;h<b;h++){if(g&&f[h]==this.htMenu[g]){continue}a=$Element(f[h]);a.addClass("off");a.removeClass("on")}f=null}catch(k){utility.nvl_error(k,blogURL+"/menu.js/Menu/deselectMenu",k.lineNumber);throw k}}});var Content=$Class({$init:function(){this.elMainDiv=$("MainDiv");if(this.elMainDiv){this._setEvent()}},_setEvent:function(){$Fn(this.onScroll,this).attach(this.elMainDiv,"scroll")},onScroll:function(){try{var b=this.elMainDiv.scrollLeft;var a=papermain.document.body.scrollLeft;var k=Math.abs(b-a);var h=b>a?1:-1;for(var f=0;f<k;f++){papermain.document.body.scrollLeft+=h}}catch(g){utility.nvl_error(g,blogURL+"/content.js/Content/onScroll",g.lineNumber);throw g}},copyScroll:function(){try{if(isPaySkin||templateType!=1){var g=new Array(500,1000,2000,5000);var b=this;for(var a=0;a<g.length;a++){setTimeout("t._copyScroll()",g[a])}}}catch(f){utility.nvl_error(f,blogURL+"/content.js/Content/copyScroll",f.lineNumber);throw f}},_copyScroll:function(){try{var a=papermain.document.body.scrollWidth+(papermain.document.body.offsetWidth-papermain.document.body.clientWidth);if(this.elMainDiv!=null){this.elMainDiv.innerHTML="<table height=10 width="+parseInt(a)+" border=0><tr><td></td></tr></table>"}}catch(b){utility.nvl_error(b,blogURL+"/content.js/Content/_copyScroll",b.lineNumber)}}});var Externalwidget=$Class({$init:function(){var a=$Fn(function(){this.doAction()},this);if(navigator.userAgent.indexOf("Chrome")==-1){setTimeout(a.bind(),500)}else{a.attach(window,"load")}},doAction:function(){try{if(!oExternalWidget){return}var f=document.ExternalWidgetForm;if(!f){return}var l,b,r,k,p,g,q,o,m;for(l=0,b=oExternalWidget.length;l<b;l++){r=oExternalWidget[l];k=r.seq;p=r.blogId;g=$("externalwidget_"+k);o=$Element(g);if(!o){continue}if(r.serviceTerminated){var h='<div class="wzd_wrap"><p class="info_txt">'+r.teminationMessageHtml+'</p><a href="http://section.blog.naver.com/sub/Notice.nhn?board=/read/1000003326/10000000000026692738" target="_blank" class="info_a">자세히보기</a><a href="'+adminURL+"/LayoutSelect.nhn?blogId="+blogId+"&focusingElementId=op_"+k+'" target="_top" class="info_a">위젯바로삭제</a></div>';o.html(h);o.height(82);continue}if(r.blockYn){o.html('<img src="'+imageURL+'/exwidget/blocked_widget_r2.gif" width="171px" height="57"/>');o.height("");continue}q=$$.getSingle("iframe",g);m=$Element(q);if(!m){continue}if(!o.height()){o.height(150);m.height(150)}else{m.height(o.height())}f.target="ExternalWidgetIframe_"+k;f.blogId.value=p;f.reversedWidgetCode.value=r.reversedWidgetCode;f.isSocialAppProfileWidget.value=r.socialAppProfileWidget&&true;m.show();f.submit();if(bIsRemocon||bIsPreview){var a=$("<div>");g.insertBefore(a,g.firstChild);$Element(a).css({background:"black",width:"170px",height:(g.offsetHeight||150)+"px",position:"absolute",opacity:0,filter:"Alpha(Opacity=0)"})}}a=r=b=l=k=p=g=q=null}catch(n){JEagleEyeClient.raiseError(n,this)}}});var Ccl=$Class({$init:function(){try{this.el=$("widget-ccl");this.welWidgetCclLayer=$Element($("widget-ccl-layer"));if(this.el){this._setEvent();setTimeout($Fn(function(){$Element(this.el).css("zoom",1)},this).bind(),0)}}catch(a){utility.nvl_error(a,blogURL+"/ccl.js/Ccl/__init",a.lineNumber);throw a}},_setEvent:function(){$Fn(this._onClick,this).attach(this.el,"click");$Fn(this._onMouseOverOrOut,this).attach(this.el,"mouseover");$Fn(this._onMouseOverOrOut,this).attach(this.el,"mouseout")},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"div")||g;var l=$Element(a);var k=utility.getParam(l.className());if(l.hasClass("_cclInfoWindow")){this.cclInfoWindow(k[0])}if((b.hasClass("_returnFalse"))||(l.hasClass("_returnFalse"))){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/ccl.js/Ccl/_onClick",h.lineNumber);throw h}},_clearTimer:function(){if(this.nTimer){clearTimeout(this.nTimer);this.nTimer=null}},_onMouseOverOrOut:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"img")||g;var k=$Element(a);if(f.type=="mouseover"){if(k.hasClass("_cclLayerOpen")){this._clearTimer();this.showCclLayer(f)}}else{if(k.hasClass("_cclLayerOpen")){this._clearTimer();this.nTimer=setTimeout($Fn(function(){this.hideCclLayer();this.nTimer=null},this).bind(),200)}}}catch(h){utility.nvl_error(h,blogURL+"/ccl.js/Ccl/_onMouseOverOrOut",h.lineNumber);throw h}},showCclLayer:function(f){try{var b=f.element;var a=$Element(b);var l=utility.getElement(b,"div");var k=$Element(l);var m=utility.getParam(k.className());var n=k.offset();this.welWidgetCclLayer.show();var h=this.welWidgetCclLayer.height()-n.top;if(h>0){this.welWidgetCclLayer.addClass("top_position");this.welWidgetCclLayer.css({top:this.el.offsetHeight+"px"})}else{this.welWidgetCclLayer.css("top","-"+this.welWidgetCclLayer.height()+"px")}}catch(g){utility.nvl_error(g,blogURL+"/ccl.js/Ccl/showCclLayer",g.lineNumber);throw g}},hideCclLayer:function(){this.welWidgetCclLayer.hide()},cclInfoWindow:function(a){window.open("http://creativecommons.org/licenses/"+a+"/2.0/kr/","_blank","")}});var Title=$Class({$init:function(){this.elBlogTitle=$("blog-title");this.elAnchor=$("blog-title-anchor");if(this.elBlogTitle){this._setEvent()}},_setEvent:function(){$Fn(this._onClick,this).attach(this.elBlogTitle,"click")},_onClick:function(e){var f=e.element;var b=$Element(f);var a=utility.getElement(f,"a")||f;var k=$Element(a);var h=utility.getParam(k.className());try{if(a!=this.elAnchor&&(!bIsRemocon||!bIsPreview)){window.open(this.elAnchor.href,"_self","")}}catch(g){utility.nvl_error(g,blogURL+"/title.js/Title/_onClick",g.lineNumber)}if((b.hasClass(f,"_returnFalse"))||(k.hasClass("_returnFalse"))||bIsRemocon||bIsPreview){e.stop()}}});var Music=$Class({$init:function(a){try{this.title="";this.volume=80;this.isPause=false;this.currentSongIdx=null;this.currentSongInfo=null;this.playStatus=true;this.postMusicPlayList=null;this.postMusicPlayIdx=null;this.clickTime=0;if($Agent().navigator().ie){this.setPageStatus();this.setPostMusic();this.setPlayList();if($("blog-music")){this.flashUI=new Music.FlashUI(this)}this.jsUI=new Music.JsUI(this);this.gogsweb=this.getGogsweb();var b=(playerType=="1")?playerSrc1:playerSrc2;if(typeof this.gogsweb=="undefined"){this.playStatus=false;if(this.flashUI&&this.playlist&&this.playlist.length&&this.playlist.length>0){this.flashUI.displayMusicPlayer(playerType,playerDesign,blogOwner,"true",playerXmlSrc,b);this.flashUI.setInstallYN(this.playStatus)}}else{var g=true;this.playStatus=true;if(this.flashUI&&this.playlist&&this.playlist.length&&this.playlist.length>0){var g=this.flashUI.checkMusicPlayerFlashObject();if(!g){g=this.flashUI.displayMusicPlayer(playerType,playerDesign,blogOwner,"false",playerXmlSrc,b)}this.flashUI.setInstallYN(this.playStatus)}if(g==false){return}this.ax=new Music.AX(this);if(a!="setup"){this._playBlogMusic()}else{if(this.ax){this.ax.realAutoPlay()}}this.setEvent()}if(isParentHiddenFrame()&&typeof parent.oFramesetMusicController!="undefined"&&parent.oFramesetMusicController){parent.oFramesetMusicController.setMusicConstructor()}}}catch(f){utility.nvl_error(f,blogURL+"/music.js/Music/$init",f.lineNumber);throw f}},setPageStatus:function(){try{this.pageStatus="etc";if(isParentHiddenFrame()){this.pageStatus="blogMain"}else{if(isOpenerParent()){if(opener.parent.parent.hiddenFrame){this.pageStatus="writePreview"}else{this.pageStatus="adminPreview"}}}}catch(a){utility.nvl_error(a,blogURL+"/music.js/Music/setPageStatus",a.lineNumber);throw a}},setPostMusic:function(){try{if(this.pageStatus=="blogMain"){this.postMusic=(isParentHiddenFrame()&&parent.hiddenFrame.playType=="postMusic")?true:false}else{this.postMusic=false}}catch(a){utility.nvl_error(a,blogURL+"/music.js/Music/setPostMusic",a.lineNumber);throw a}},setPlayList:function(){try{if(this.pageStatus=="blogMain"&&isParentHiddenFrame()){this.playlist=parent.hiddenFrame.setMusicList}else{if(this.pageStatus=="writePreview"&&isOpenerParentHiddenFrame()){this.playlist=opener.parent.parent.hiddenFrame.setMusicList}else{this.playlist=["empty"]}}}catch(a){utility.nvl_error(a,blogURL+"/music.js/Music/setPlayList",a.lineNumber);throw a}},getGogsweb:function(){if(this.pageStatus=="blogMain"&&isParentHiddenFrame()){return parent.hiddenFrame.gogsweb}else{if(this.pageStatus=="writePreview"&&isOpenerParentHiddenFrame()){return opener.parent.parent.hiddenFrame.gogsweb}}return null},_playBlogMusic:function(){var a=this._getCurLog();if(a!="blog"&&a!="prologue"){if(this.ax){this.ax.realAutoPlay()}if(isParentHiddenFrame()){parent.hiddenFrame.playType="blogMusic"}}},_getCurLog:function(){try{var a="blog";if(typeof curLog!="undefined"){a=curLog.replace(/http:\/\/(dev\.||local\.)*(.*)\.naver.com.*/i,"$2");var b=a.split(".");a=b.length>1?b[1]:b[0]}return a}catch(f){utility.nvl_error(f,blogURL+"/music.js/Music/_getCurLog",f.lineNumber);throw f}},resetMusic:function(a){var b=this._getCurLog();if(b=="blog"||b=="prologue"){if(a=="setup"){this.$init("setup")}else{if(a=="install"){parent.mainFrame.location.reload()}else{this.playBlogMusic()}}}else{this.$init()}},setCurrentSongIdx:function(a){if(isParentHiddenFrame()){parent.hiddenFrame.SongIdx=a}},getCurrentSongIdx:function(){if(isParentHiddenFrame()){return parent.hiddenFrame.SongIdx}},getPlayList:function(){if(this.playlist==null){return null}return this.playlist},makeTitle:function(b){try{var f=artist=null;if(b){f=(typeof b.itemName!="undefined")?b.itemName:""}if(b){artist=(typeof b.artistName!="undefined")?b.artistName:""}if(b&&b.artistId!="0"){f+=" - "+artist}return f}catch(a){utility.nvl_error(a,blogURL+"/music.js/Music/makeTitle",a.lineNumber);throw a}},flashPlay:function(a){var b=this.getPlayList()[a];if(this.flashUI){this.flashUI.playWithTitle(this.makeTitle(b))}},play:function(f,a,l,b){try{var h=null;if(this.pageStatus!="blogMain"){return}if(this.getPlayList()!=null&&this.getPlayList().length>0&&this.playStatus&&b!="post"){if(this.getCurrentSongIdx()==null){this.setCurrentSongIdx(0)}if(typeof a=="undefined"||a==null){h=this.getPlayList()[this.getCurrentSongIdx()];if(this.flashUI){this.flashUI.playWithTitle(this.makeTitle(h))}this.jsUI.stop();this.postMusic=false;this.currentSongInfo=h}else{if(b&&b=="popup"){h=a;if(this.flashUI){this.flashUI.playWithTitle(this.makeTitle(h))}this.jsUI.stop();this.postMusic=false;this.currentSongInfo=h;for(var g=0;g<this.playlist.length;g++){if(this.playlist[g].trackId==h.trackId){this.setCurrentSongIdx(g)}}}else{h=a;this.postMusic=true;this.jsUI.playWithTitle(this.makeTitle(h),l)}}if(f!="auto"){this.ax.play(h)}}else{if(typeof a=="undefined"||a==null){if(this.currentSongInfo){this.flashUI.play();this.jsUI.stop();this.postMusic=false;this.ax.play(this.currentSongInfo)}}else{if(b&&b=="popup"){this.currentSongInfo=a;this.flashUI.playWithTitle(this.makeTitle(this.currentSongInfo));this.jsUI.stop();this.postMusic=false}else{if(b&&b=="post"){h=a;this.postMusic=true;this.jsUI.playWithTitle(this.makeTitle(h),l);this.ax.play(h)}else{if(this.currentSongInfo){this.flashUI.play();this.jsUI.stop();this.postMusic=false;this.ax.play(this.currentSongInfo)}}}}}}catch(k){utility.nvl_error(k,blogURL+"/music.js/Music/play",k.lineNumber);throw k}},stop:function(a){try{if(!$Agent().navigator().ie){return false}if(this.pageStatus=="blogMain"){if(this.playStatus){if(!this.postMusic){if(a!="js"){if(this.flashUI){this.flashUI.stop()}this.ax.stop()}}else{if(a!="flash"){this.postMusic=false;this.jsUI.stop();this.ax.stop()}}}}}catch(b){utility.nvl_error(b,blogURL+"/music.js/Music/stop",b.lineNumber);throw b}},pause:function(){if(this.playStatus){if(this.flashUI){this.flashUI.stop()}this.ax.pause()}},nextPlay:function(b){try{if(this.pageStatus=="blogMain"){if(this.playStatus){if(!this.postMusic){if(b!="js"){var f=this.getPlayList();var a=this.getCurrentSongIdx()+1;if(f.length>=a+1){this.setCurrentSongIdx(a)}else{this.setCurrentSongIdx(0)}this.play()}}else{if(b!="flash"){var f=this.postMusicPlayList;var a=Number(this.postMusicPlayIdx)+1;if(f.length<a+1){a=0}this.postMusicPlayIdx=a+1;this.postPlay(this.postMusicPlayIdx,f.join("|"))}}f=null}else{}}}catch(g){utility.nvl_error(g,blogURL+"/music.js/Music/nextPlay",g.lineNumber);throw g}},prevPlay:function(b){try{if(this.pageStatus=="blogMain"){if(this.playStatus){if(!this.postMusic){if(b!="js"){var f=this.getPlayList();var a=this.getCurrentSongIdx()-1;if(a>=0){this.setCurrentSongIdx(a)}else{this.setCurrentSongIdx(f.length-1)}this.play()}}else{if(b!="flash"){var f=this.postMusicPlayList;var a=Number(this.postMusicPlayIdx)-1;if(a+1<=0){a=f.length-2}if(a+1>0){this.postMusicPlayIdx=a+1;this.postPlay(this.postMusicPlayIdx,f.join("|"))}}}f=null}}}catch(g){utility.nvl_error(g,blogURL+"/music.js/Music/prevPlay",g.lineNumber);throw g}},postPlay:function(b,a,h){try{if(typeof this.ax=="undefined"){return}if(this.pageStatus=="etc"){return}if(!isParentHiddenFrame()){return}var f=parent.hiddenFrame.totalPlayList;if(this.pageStatus=="blogMain"){if(f&&f.length>0){this.postPlayReal(b,a,h)}else{parent.hiddenFrame.setMusiclistForHidden();setTimeout($Fn(function(){this.postPlayReal(b,a,h)},this).bind(),1000)}}}catch(g){utility.nvl_error(g,blogURL+"/music.js/Music/postPlay",g.lineNumber);throw g}},postPlayReal:function(f,b,m){try{if(typeof this.ax=="undefined"){return}if(this.pageStatus=="etc"){return}if(!isParentHiddenFrame()){return}this.stop();this.postStop("realStop");var h=this._removeLastVerticalBar(b);var g=h.split("|");var k=parent.hiddenFrame.totalPlayList;if(!k){return}var a=this.findSongObj(k,g[f-1]);if(!a){return}this.play(null,a,m,"post");this.postMusicPlayList=g;this.postMusicPlayIdx=f-1}catch(l){utility.nvl_error(l,blogURL+"/music.js/Music/postPlayReal",l.lineNumber);throw l}},findSongObj:function(e,a){for(var b=0;b<e.length;b++){if(a.indexOf("_")==-1){if(a==e[b].trackId){return e[b]}}else{if(a==e[b].sourceId){return e[b]}}}return null},_removeLastVerticalBar:function(b){var a=b;if(b!=null&&b.length!=null&&b.charAt(b.length-1)=="|"){a=b.substring(0,b.length-1)}return a},postStop:function(a){try{if(typeof this.ax=="undefined"){return}if(this.pageStatus=="etc"){return}if(this.jsUI.status){this.stop("js")}}catch(b){utility.nvl_error(b,blogURL+"/music.js/Music/postStop",b.lineNumber);throw b}},postNextPlay:function(){if(typeof this.ax=="undefined"){return}if(this.pageStatus=="etc"){return}this.postMusic=true;this.nextPlay("js")},postPrevPlay:function(){if(typeof this.ax=="undefined"){return}if(this.pageStatus=="etc"){return}this.postMusic=true;this.prevPlay("js")},setVolume:function(a){if(typeof this.ax=="undefined"){return}if(this.pageStatus=="writePreview"){return}if(this.pageStatus=="etc"){return}if(typeof a=="undefined"||a=="undefined"){return}if(this.playStatus){this.ax.volume(a)}},onKeyDown:function(a){if(typeof a=="undefined"){return}if(a.key().keyCode==27){this.stop()}},setEvent:function(){try{$Fn(this.onKeyDown,this).attach(document,"keydown")}catch(a){}},setEventBody:function(){try{$Fn(this.onKeyDown,this).attach(document,"keydown");document.body.focus()}catch(a){}},onUnload:function(){if(this.ax){this.ax.onUnload()}},AXPlay:function(a){if(this.flashUI){this.flashUI.AXPlay(a)}},popBlogMusicList:function(){if(this.pageStatus=="blogMain"&&this.playStatus){window.open(mylogURL+"/blogMusicBGMPlayList.nhn?blogId="+blogId,"playlist","scrollbars=yes,status=yes")}},setBlogMusicList:function(){if(this.pageStatus=="blogMain"){try{parent.document.location.href=adminURL+"/AdminMain.nhn?blogId="+blogId+"&Redirect=ItembagMu"}catch(a){}}},playBlogMusic:function(g){try{var h=false;if(g){var f=this.getPostMutimediaList("EMBED");var a=this.getPostMutimediaList("OBJECT");for(var b=0;b<f.length&&h==false;b++){if(f[b].PlayState==2||f[b].PlayState==3){h=true;break}}for(var b=0;b<a.length&&h==false;b++){if(a[b].PlayState==2||a[b].PlayState==3){h=true;break}}if(!h&&this.ax){this.ax.realAutoPlay()}else{this.stop("flash")}}else{if(this.ax){this.ax.realAutoPlay()}}}catch(k){utility.nvl_error(k,blogURL+"/music.js/Music/playBlogMusic",k.lineNumber);throw k}},getPostMutimediaList:function(b){try{var g=null;var a=parent.mainFrame;if(!a){return new Array()}if(a.papermain!=null){g=parent.mainFrame.papermain}else{g=parent.mainFrame}return g.document.getElementsByTagName(b)}catch(f){utility.nvl_error(f,blogURL+"/music.js/Music/getPostMutimediaList",f.lineNumber);throw f}}});Music.FlashUI=$Class({$init:function(a){this._upObj=a;this.isPlay=false},displayMusicPlayer:function(k,g,b,a,l,f){var h=vH=0;var e=new Array();if(k=="1"){h="213",vH="20"}else{if(k=="0"){h="171",vH="38"}}e.push('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" id="flashPlayer" width="'+h+'" height="'+vH+'" align="middle" type="application/x-shockwave-flash">');e.push('<param name="FlashVars" value="xmlURL='+l+"&mType="+g+"&mOwn="+b+"&mAct="+a+'" />');e.push('<param name="allowScriptAccess" value="always" />');e.push('<param name="movie" value="'+f+'" />');e.push('<param name="quality" value="high" />');e.push('<param name="wmode" value="transparent" />');e.push('<param name="bgcolor" value="#ffffff" />');e.push('<embed src="'+f+'" flashvars="mType='+g+"&mOwn="+b+"&mAct="+a+'" quality="high" wmode="transparent" bgcolor="#006699" width="'+h+'" height="'+vH+'" swLiveConnect=true id="flashPlayer" name="flashPlayer" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />');e.push("</object>");$("blog-music").innerHTML=e.join("");$Element($("blog-music")).show();if(!$("flashPlayer")||typeof $("flashPlayer").setVariable=="undefined"){return false}this.setInfo()},checkMusicPlayerFlashObject:function(){if(!$("flashPlayer")||typeof $("flashPlayer").setVariable=="undefined"){return false}else{return true}},setVariable:function(a,b){if($("flashPlayer")&&(typeof $("flashPlayer").setVariable!="undefined")&&(b!=null||b!=undefined)){$("flashPlayer").setVariable(a,b)}},setInfo:function(){try{this.setVariable("tVolume",this.volume);this.setVariable("watchobj","volume");if(this.title!=""){this.setVariable("mTitle",this.title)}if(this.isPause){this.setVariable("watchobj","pause")}else{this.setVariable("watchobj","play")}}catch(a){utility.nvl_error(a,blogURL+"/music.js/Music.FlashUI/setInfo",a.lineNumber);throw a}},setInstallYN:function(a){if(!a){this.setVariable("watchobj","activeXmode")}else{this.setVariable("watchobj","activeXcancel")}},setTitle:function(a){this.setVariable("mTitle",a)},play:function(){this.isPlay=true;if(isParentHiddenFrame()){parent.hiddenFrame.playType="blogMusic"}this.setVariable("watchobj","play")},playWithTitle:function(a){this.setTitle(a);this.play()},stop:function(){this.isPlay=false;this.setVariable("watchobj","pause")},AXPlay:function(a){if(a){this.play()}else{this.stop()}}});Music.JsUI=$Class({$init:function(a){this._upObj=a;this.title=null;this.id=null;this.status=false},setId:function(a){this.id=a},getId:function(){return this.id},play:function(a){if(typeof a!="undefined"){this.setId(a)}this.realPlay();if(isParentHiddenFrame()){parent.hiddenFrame.playType="postMusic"}},realPlay:function(){try{var f=this.getId();var b=$("bgmname"+f);if($("playimg1"+f)){$("playimg1"+f).style.display="none"}if($("playimg2"+f)){$("playimg2"+f).style.display="inline"}if(b){this.toggleTitle("play")}this.status=true}catch(a){utility.nvl_error(a,blogURL+"/music.js/Music.JsUI/realPlay",a.lineNumber);throw a}},stop:function(){var b=this.getId();if(b!=null){var a=$("bgmname"+b);if(a){if($("playimg1"+b)){$("playimg1"+b).style.display="inline"}if($("playimg2"+b)){$("playimg2"+b).style.display="none"}this.toggleTitle("stop")}this.status=false}},toggleTitle:function(b){try{var g=$("bgmname"+this.getId());var f=g.className=="mp01b"?true:false;var h="";var l=function(p,n,o){var e=0;for(var m=0;m<p.length;m++){e+=(p.charCodeAt(m)>128)?2:1;if(e>n){return p.substring(0,m)+o}}return p};if(b=="play"){g.innerHTML="<marquee scrollAmount=1 scrollDelay=90 scrollLeft=100 direction=left height='13' style='white-space:nowrap; word-wrap: normal;'>"+this.title+"</marquee>"}else{var a=f?10:24;var h=l(this.title,a,"..");g.innerHTML="<span>"+h+"</span>"}}catch(k){utility.nvl_error(k,blogURL+"/music.js/Music.JsUI/toggleTitle",k.lineNumber);throw k}},setTitle:function(a){this.title=a},playWithTitle:function(a,b){this.setTitle(a);this.play(b)}});Music.AX=$Class({$init:function(g){try{this._upObj=g;this.isGogswebInit=true;var b=this._upObj.pageStatus;var a=null;if(b=="blogMain"&&isParentHiddenFrame()){this.gogsweb=parent.hiddenFrame.gogsweb}else{if(b=="writePreview"&&isOpenerParentHiddenFrame()){this.gogsweb=opener.parent.parent.hiddenFrame.gogsweb}else{this.gogsweb=null}}if(this.gogsweb==null){return}if(typeof this.gogsweb.Init=="undefined"){this.isGogswebInit=false;return}this.gogsweb.Init("id","pw","param");this.gogsweb.setPath("http://bgm.music.naver.net/streaming/play.nhn?path=$SONGPATH$","http://ibgm.music.naver.com/bgm/info.nhn?trackId=$TRACKID$")}catch(f){utility.nvl_error(f,blogURL+"/music.js/Music.AX/$init",f.lineNumber);throw f}},realAutoPlay:function(){try{var a=this._upObj.pageStatus;if(a=="blogMain"){if(parent.hiddenFrame.isPlayMusic==null){setTimeout($Fn(function(){if(isParentHiddenFrame()&&!parent.hiddenFrame.bPostEmbedPlay){this.autoPlay()}},this).bind(),600)}else{if(parent.hiddenFrame.isPlayMusic&&parent.hiddenFrame.playType=="postMusic"){this.stop()}else{if(parent.hiddenFrame.isPlayMusic&&parent.hiddenFrame.playType=="blogMusic"){setTimeout($Fn(function(){this.autoPlay()},this).bind(),100)}}}}}catch(b){utility.nvl_error(b,blogURL+"/music.js/Music.AX/realAutoPlay",b.lineNumber);throw b}},isPlaying:function(){if(this.isGogswebInit==true){return this.gogsweb.nState}},autoPlay:function(){if(this.isGogswebInit==true){if(this.isPlaying()==0){this._upObj.play()}else{this._upObj.play("auto")}}},onUnload:function(){if(this.isGogswebInit==true){this.stop();if(isParentHiddenFrame()){parent.hiddenFrame.document.getElementById("axArea").innerHTML=""}}},play:function(a){if(this.isGogswebInit==true){if(!this._upObj.postMusic){this._upObj.AXPlay(true)}if(this.currentPlayingTrackId==a.trackId&&this.gogsweb.nState==1){this.gogsweb.pause()}else{if(this.gogsweb.nState!=0){this.gogsweb.Stop()}this.gogsweb.AddMnetID_Track(a.trackId);this.gogsweb.Play()}this.currentPlayingTrackId=a.trackId;if(isParentHiddenFrame()){parent.hiddenFrame.isPlayMusic=true}}},stop:function(){if(this.isGogswebInit==true){if(this.gogsweb!=null){this.gogsweb.Stop()}this._upObj.AXPlay(false);if(isParentHiddenFrame()){parent.hiddenFrame.isPlayMusic=false}}},pause:function(){if(this.isGogswebInit==true){if(this.gogsweb!=null){this.gogsweb.Pause()}this._upObj.AXPlay(false);if(isParentHiddenFrame()){parent.hiddenFrame.isPlayMusic=false}}},volume:function(a){if(this.isGogswebInit==true){if(this.gogsweb&&this.gogsweb.nVolume){if(a==0){a=1}this.gogsweb.nVolume=a}}}});function isParentHiddenFrame(){try{if(!parent||!parent.hiddenFrame||!parent.hiddenFrame.document||typeof parent=="undefined"||typeof parent.hiddenFrame=="undefined"){return false}}catch(a){return false}return true}function isOpenerParent(){try{if(!opener||opener.closed||typeof opener=="undefined"||typeof opener.parent=="undefined"||typeof opener.parent.parent=="undefined"){return false}}catch(a){return false}return true}function isOpenerParentHiddenFrame(){try{if(!opener||!opener.parent||!opener.parent.parent||!opener.parent.parent.hiddenFrame||!opener.parent.parent.hiddenFrame.document||typeof opener=="undefined"||typeof opener.parent=="undefined"||typeof opener.parent.parent=="undefined"||typeof opener.parent.parent.hiddenFrame=="undefined"){return false}}catch(a){return false}return true}function DoFSMusicPlayerCommand(e,a){if(music!=null&&music.gogsweb!=null&&typeof music.gogsweb!="undefined"&&typeof music.gogsweb.Init=="undefined"&&e!="showmenu"&&a!="undefined"){alert("브라우저에서 뮤직 플레이어가 사용안함으로 설정되어 있습니다\n다시 사용하고 싶으신 경우 설정을 사용으로 변경해주세요\n(도구>인터넷옵션>프로그램>추가기능관리에서 bgmplayer Class와 NaverAXguide Class를 사용으로 변경)");return}switch(e){case"play":if(music){music.play("flash")}break;case"pause":if(music){music.pause("flash")}break;case"stop":if(music){music.stop("flash")}break;case"prev":if(music){music.prevPlay("flash")}break;case"next":if(music){music.nextPlay("flash")}break;case"volume":if(music){music.setVolume(a)}break;case"setMusic":if(music){music.setBlogMusicList()}break;case"listMusic":if(music){music.popBlogMusicList()}break;case"activeXinstall":var b=parent.hiddenFrame;if(b){b.setRequestInstallType("install");b.axGuideInstall()}break}}var MusicIframe=function(){this.PlayPost1=function(b,a,e){music.postPlay(b,a,e)},this.PlayPost=function(b,a,e){if(music){music.postPlay(b,a,e)}},this.StopPost=function(){if(music){music.postStop()}},this.PrevPost=function(){if(music){music.postPrevPlay()}},this.NextPost=function(){if(music){music.postNextPlay()}}};var musiciframe=new MusicIframe();var Happybean=$Class({isEnabled:false,iFundNo:null,bUserAdmin:false,$init:function(){try{this.el=$("widget-happybean");if(!this.el){return}this.welPutListLayer=$Element($$.getSingle(".put_list",this.el));this._setEvent();this.iLayerPos={};this.getLayerPopupPos();this.setConnectApiServer()}catch(a){utility.nvl_error(a,blogURL+"/happybean.js/Happybean/__init",a.lineNumber);throw a}},replaceHTML:function(a){try{this.el=$("widget-happybean");if(!this.el){return}this.el.innerHTML=a;this.welPutListLayer=$Element($$.getSingle(".put_list",this.el));this._setEvent();this.iLayerPos={};this.getLayerPopupPos();this.setConnectApiServer()}catch(b){utility.nvl_error(b,blogURL+"/happybean.js/Happybean/__init",b.lineNumber);throw b}},_setEvent:function(){$Fn(this._onClick,this).attach(this.el,"click");this.fOnClose_HappyPopLayer=$Fn(this._LayerClose,this)},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(l.className());if(this.isEnabled&&(!bIsRemocon||!bIsPreview)){if($Agent().IE55){this._ie55link(f)}else{if(l.hasClass("_link")){this._link(k[0])}else{if(this.oFund.fundstatus!=1){if(l.hasClass("_donationHappybean")){this._happybeanDonation()}else{this._happybeanStop()}}else{if(l.hasClass("_openHappybeanPut")){this.doLayerOpen()}else{if(l.hasClass("_saveHappybean")){this._happybeanSave()}else{if(l.hasClass("_donationHappybean")){this._happybeanDonationLink()}}}}}}}if((b.hasClass("_returnFalse"))||(l.hasClass("_returnFalse"))){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/happybean.js/Happybean/_onClick",h.lineNumber);throw h}},getLayerPopupPos:function(){var a=this.welPutListLayer.offset();this.iLayerPos={x1:a.left,y1:a.top-5,x2:a.left+106,y2:a.top+81}},setConnectApiServer:function(){try{var f=this;var a="happybeanScriptInclude";if(typeof(this.el.callback=="undefined")){this.el.callback=$Fn(function(e){this.isEnabled=true;this.setConnectDone(e);if($(a)){$Fn(function(){this.el.removeChild($(a))},this).delay(0.1)}},this).bind()}if($(this.sAjax)==null){var b=document.createElement("script");b.id=a;b.charset="euc-kr";this.el.appendChild(b)}this.setConnectDone([]);$Fn(function(){$(a).src=HAPPYBEAN_API_URL+"/fund/FundInfoWidget.nhn?callback=$('"+this.el.id+"').callback&info=blog&sid="+blogId+"&outputtype=proxy&enctype=euckr"},this).attach(window,"load")}catch(g){utility.nvl_error(g,blogURL+"/happybean.js/Happybean/setConnectApiServer",g.lineNumber);throw g}},chgShortitle:function(a){try{var b="";var f=$("<div>");f.innerHTML=a;b=typeof(f.innerText)=="undefined"?f.textContent:f.innerText;f=null;return b}catch(g){utility.nvl_error(g,blogURL+"/happybean.js/Happybean/chgShortitle",g.lineNumber);throw g}},setConnectDone:function(b){var l=b;try{if(l&&l.length!=0&&l.happybean&&l.happybean.result&&l.happybean.result.list){var k=l.happybean.result.list[0].fund;this.oFund=k;var f=$$.getSingle(".happy_title",this.el);var m=$$.getSingle(".happy_collectamount",this.el);var a=$$.getSingle(".happy_collectcount",this.el);var g=$Element($$.getSingle(".admin_area",this.el));if(userId!=k.creatorid){g.hide();this.bUserAdmin=false}else{if(userId==k.creatorid){g.show();this.bUserAdmin=true}}this.iFundNo=k.fundno;m.innerHTML=k.collectamount;a.innerHTML=k.collectcount;f.innerHTML="<a href='"+HAPPYBEAN_FUND_URL+"/"+this.iFundNo+"' target='_blank'>"+k.shorttitle+"</a>";if(k.fundstatus!=1){this._iconDisabled();this.el.title="이 저금통은 개설자의 요청으로 저금이 잠시 중단된 상태입니다.\n저금 중단상태에서는 저금하기, 담아가기가 불가합니다."}else{this._iconEnabled();this.el.title=this.chgShortitle(k.title)}}else{this._iconDisabled();this.isEnabled=false;this.el.title="일시적으로 표시할 수 없습니다"}}catch(h){utility.nvl_error(h,blogURL+"/happybean.js/Happybean/setConnectDone",h.lineNumber);throw h}},_iconEnabled:function(){var e=$$("div.btns img",this.el);for(var b=0,a=e.length;b<a;b++){if(e[b].src.indexOf("-off")>-1){e[b].src=e[b].src.replace("-off","")}}},_iconDisabled:function(){var e=$$("div.btns img",this.el);for(var b=0,a=e.length;b<a;b++){if(e[b].src.indexOf("-off")==-1){e[b].src=e[b].src.replace(/(btn-[\S]*)(.gif$)/,"$1-off$2")}}},_ie55link:function(f){try{var b=f.element;var a=b.parentNode.className;var h=(a=="btns"?$$.getSingle("img",b).title:b.title);var g="";if(h=="저금하기"){g="저금하기"}else{if(h=="담아가기"){g="담아가기"}else{if(h=="콩저금통 기부하기"){g="기부하기"}}}alert("IE 5.5에서는 "+g+"를 할 수 없습니다.\n\n추후 지원 예정입니다.")}catch(f){utility.nvl_error(f,blogURL+"/happybean.js/Happybean/_ie55link",f.lineNumber);throw f}},_link:function(b){var a="";try{if(b=="1"){if(this.bUserAdmin==true){alert("관리자는 담을수 없습니다.");this._LayerClose();return}else{a=HAPPYBEAN_FUND_URL+"/scrap/FundScrap.nhn?fundno="+this.iFundNo+"&info=blog"}}else{if(b=="2"){a=HAPPYBEAN_FUND_URL+"/scrap/FundScrap.nhn?fundno="+this.iFundNo+"&info=cafe"}else{if(b=="3"){if(this.bUserAdmin==true){alert("관리자는 담을수 없습니다.");this._LayerClose();return}else{a=HAPPYBEAN_FUND_URL+"/scrap/FundScrap.nhn?fundno="+this.iFundNo+"&info=my"}}}}this.doPopup({url:a,width:"400",height:"267"});this._LayerClose()}catch(f){utility.nvl_error(f,blogURL+"/happybean.js/Happybean/_link",f.lineNumber);throw f}},doLayerOpen:function(a){this.welPutListLayer.css({display:"block",marginBottom:"-21px"});$Fn(this.fOnClose_HappyPopLayer,this).attach(document.body,"click")},_LayerClose:function(f){try{if(typeof(f)=="undefined"){this.welPutListLayer.hide();return}var g=this.iLayerPos;var b=f.page_x;var a=f.page_y;if(g.x1<b&&g.y1<a&&g.x2>b&&g.y2>a){return}this.welPutListLayer.hide();$Fn(this.fOnClose_HappyPopLayer,this).detach(document.body,"click")}catch(f){utility.nvl_error(f,blogURL+"/happybean.js/Happybean/_LayerClose",f.lineNumber);throw f}},_happybeanStop:function(){try{if(this.bUserAdmin==true){if(confirm("이 저금통을 중단하셨습니다.\n\n저금하기, 담아가기, 기부하기를 하려면\n\n저금통을 진행중 상태로 변경하셔야 합니다.\n\nMY 해피빈에서 저금통 설정을 변경하시겠습니까?")){this.doNewWindow(HAPPYBEAN_DONATION_URL+"/donation/DonateFundSummary.nhn")}else{return false}}else{this.el.title="이 저금통은 개설자의 요청으로 저금이 잠시 중단된 상태입니다.";alert("이 저금통은 개설자의 요청으로 저금이 잠시\n\n중단된 상태 입니다. 저금 중단상태에서는 저금하기, 담아가기가 불가합니다.")}}catch(a){utility.nvl_error(a,blogURL+"/happybean.js/Happybean/_happybeanStop",a.lineNumber);throw a}},_happybeanDonationLink:function(){this.doNewWindow(HAPPYBEAN_DONATION_URL+"/donation/ThemeDonate.nhn")},_happybeanDonation:function(){if(this.bUserAdmin==true){if(confirm("이 저금통을 중단하셨습니다.\n\n저금하기, 담아가기, 기부하기를 하려면 저금통을 진행중\n\n상태로 변경하셔야 합니다.\n\nMY 해피빈에서 저금통 설정을 변경하시겠습니까?")){this.doNewWindow(HAPPYBEAN_DONATION_URL+"/donation/DonateFundSummary.nhn")}else{return false}}else{this.el.title="이 저금통은 개설자의 요청으로 저금이 잠시 중단된 상태입니다.\n\n저금 중단상태에서는 저금하기, 담아가기가 불가합니다.";alert("이 저금통은 개설자의 요청으로 저금이 잠시 중단된 상태입니다.\n\n저금 중단상태에서는 저금하기, 담아가기가 불가합니다.")}},_happybeanSave:function(){this.doPopup({url:HAPPYBEAN_FUND_URL+"/deposit/FundDepositPopupForm.nhn?reloadYN=N&info=blog&blogId="+blogId+"&fundno="+this.iFundNo,width:"400",height:"320",scroll:"yes"})},doPopup:function(b){var e=b.width;var a=b.height;var f=window.open(b.url,"happybean","width="+b.width+",height="+b.height+",directories=no,location=no,menubar=no,status=no,toolbar=no,resizable=no,scrollbars="+(b.scroll?b.scroll:"no"));f.focus()},doNewWindow:function(b){var a=window.open(b,"happybean","directories=yes,location=yes,menubar=yes,scrollbars=yes,status=yes,toolbar=yes,resizable=yes");a.focus()}});var Currency=$Class({$init:function(){try{this.el=$("widget-currency");if(!this.el){return}this._welEnquiry=$Element($("widget_exchange0"));this._welCalculation=$Element($("widget_exchange1"));this.exchangeDisplay(0)}catch(a){utility.nvl_error(a,blogURL+"/currency.js/Currency/__init",a.lineNumber);throw a}},_setEvent:function(){$Fn(this._onClick,this).attach(this.el,"click")},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(l.className());if(l.hasClass("_exchangeDisplay")){this.exchangeDisplay(k[0])}else{if(l.hasClass("_currency_exchange")){this.currency_exchange()}}if((b.hasClass(g,"_returnFalse"))||(l.hasClass("_returnFalse"))){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/currency.js/Currency/_onClick",h.lineNumber);throw h}},replaceHTML:function(a){this._welEnquiry.html(a);this.el=$("widget-currency");if(!this.el){return}this._setEvent()},loadCalculation:function(){try{new $Ajax("/NCurrency4AjaxCal.nhn?blogId="+blogId+"&skinType="+skinType+"&skinId="+skinId,{method:"post",onerror:function(){},onload:$Fn(function(b){if(b.text()){this._welCalculation.html(b.text());this.showcalculation()}},this).bind()}).request()}catch(a){utility.nvl_error(a,blogURL+"/currency.js/Currency/loadCalculation ",a.lineNumber);throw a}},exchangeDisplay:function(g){try{var b=$$(".bg-head h3.on a",$("widget-currency"));if(b&&b[0]&&$Element(b[0]).visible()){var a=$$("#widget_exchange1 .bg-head h3",$("widget_exchange1"));if(a.length>1){a[0].className=="on"?a[0].className="":a[0].className="on";a[1].className=="on"?a[1].className="":a[1].className="on"}}}catch(f){utility.nvl_error(f,blogURL+"/currency.js/Currency/exchangeDisplay ",f.lineNumber)}if(g==0){this.showEnquiry()}else{if(this._welCalculation.html()==""){this.loadCalculation()}else{this.showcalculation()}}},showEnquiry:function(){this._welEnquiry.show();this._welCalculation.hide()},showcalculation:function(){this._welEnquiry.hide();this._welCalculation.show()},currency_exchange:function(){try{var m=$("ex_from");var h=$("ex_to");var o=$("ex_amount");var k=m.value;var l=h.value;var b=o.value;b=b.replace(/ |,|\t/g,"");if(isNaN(b)||b==""){alert("숫자를 입력하세요.");o.value="";o.focus();return false}else{var a=m.options[m.selectedIndex].text;var g=h.options[h.selectedIndex].text;if(a=="일본(JPY)"||a=="인도네시아(IDR)"){k/=100}if(g=="일본(JPY)"||g=="인도네시아(IDR)"){l/=100}var n=((b*k)/l).toFixed(2);$("ex_result").value=Number(n).toLocaleString()}}catch(f){utility.nvl_error(f,blogURL+"/currency.js/Currency/currency_exchange ",f.lineNumber);throw f}}});var Watch=$Class({$init:function(){this.el=$("widget-watch");if(!this.el){return}new widget("widget-watch",{setUrl:watch_vars.setUrl(),getData:"flash",flashvars:watch_vars.flashvars(),height:watch_vars.height()})}});var Visitorgp=$Class({$init:function(){if(!$("widget-visitorgp")){return}new widget("widget-visitorgp",{setUrl:visitorgp_vars.setUrl,getData:"flash",flashvars:visitorgp_vars.flashvars(),height:visitorgp_vars.height})}});var Wisesaying=$Class({$init:function(){this.el=$("widget-saying");if(!this.el){return}this._setEvent()},_setEvent:function(){$Fn(this._onClick,this).attach(this.el,"click")},_onClick:function(f){try{var g=f.element;var b=$Element(g);var a=utility.getElement(g,"a")||g;var l=$Element(a);var k=utility.getParam(b.className());if(b.hasClass("_paging")){this.paging(parseInt(k[0],10))}if(b.hasClass("_returnFalse")||l.hasClass("_returnFalse")){f.stop()}}catch(h){utility.nvl_error(h,blogURL+"/wisesaying.js/Wisesaying/_onClick",h.lineNumber);throw h}},replaceHTML:function(a){try{var f=$Json.fromXML(a).toObject()["naver"];if(f.contents!=undefined){this._content=f.contents;this._name=f.name;this._len=this._content.length-1;this._currnetNum=Math.floor(Math.random()*this._len);$$("#widget-saying #wisesaying1")[0].innerHTML=this._content[this._currnetNum];$$("#widget-saying #wisesaying2")[0].innerHTML="- "+this._name[this._currnetNum]}else{$$("#widget-saying #wisesaying1")[0].innerHTML="";$$("#widget-saying #wisesaying2")[0].innerHTML=""}this._setEvent()}catch(b){utility.nvl_error(b,blogURL+"/wisesaying.js/Wisesaying/calldata",b.lineNumber);throw b}},paging:function(b){try{if(this._content!=undefined){this._currnetNum+=b;if(this._currnetNum<0){this._currnetNum=this._len}else{if(this._currnetNum>this._len){this._currnetNum=0}}$("wisesaying1").innerHTML=this._content[this._currnetNum];$("wisesaying2").innerHTML="- "+this._name[this._currnetNum]}}catch(a){utility.nvl_error(a,blogURL+"/wisesaying.js/Wisesaying/paging",a.lineNumber);throw a}}});var Weather=$Class({$init:function(){this.elWeather=$("widget-weather")},replaceHTML:function(a){try{if(!this.elWeather){return}this.elWeather.innerHTML=a}catch(b){utility.nvl_error(b,blogURL+"/weather.js/Weather/replaceHTML",b.lineNumber);throw b}}});var Challengemastertrack=$Class({$init:function(){},replaceHTML:function(f,a){try{this.elCwg_master=$("cwg_master_"+f);if(this.elCwg_master){this.elCwg_master.innerHTML=a}}catch(b){utility.nvl_error(b,blogURL+"/masterTracker.js/MasterTracker/replaceHTML",b.lineNumber);throw b}}});var Challengegoaltrack=$Class({$init:function(){},replaceHTML:function(g,b){try{this.elCwg_goaltracker=$("cwg_goal_"+g);if(this.elCwg_goaltracker){this.elCwg_goaltracker.innerHTML=b}var a=jsMVC.getController("goalTrackerController");a.start()}catch(f){utility.nvl_error(f,blogURL+"/goaltracker.js/Challengegoaltrack/replaceHTML",f.lineNumber);throw f}}});var GoalTrackerController=$Class({$jsMVC:jsMVC.$Controller,$init:function(){},start:function(){this.vGoalTrackerView=jsMVC.getView("goalTrackerController","goalTrackerView");var b=$$("ol._goalWidgetGridArea");for(var a=0;a<b.length;a++){$Fn(this._onMouseover,this).attach(b[a],"mouseover")}},_onMouseover:function(b){var e=b.element;var a=$Element(e);if(a.hasClass("_goalWidgetGrid")){var f=utility.getParam(e.className);this.vGoalTrackerView.setGridTitle(e,f[0])}}});var GoalTrackerView=$Class({setGridTitle:function(h,k){var g=$Element(h);var f=g.attr("index")-1;var b=$$.getSingle("!._goalTrackWidgetArea",h);var e=$$.getSingle("._challengeGoalStartDate",b).innerHTML;var a=new Date();a.setTime(e/1+(f*(24*60*60*1000))/1);h.title=a.getFullYear()+"."+(a.getMonth()+1)+"."+a.getDate()}});jsMVC.setController("goalTrackerController",GoalTrackerController);jsMVC.setView("goalTrackerController","goalTrackerView",GoalTrackerView);var Business=$Class({$init:function(){this.eBusiness=$("widget_business");this.nTipLayerTop=0},replaceHTML:function(a){if(this.eBusiness){this.eBusiness.innerHTML=a}},bindSaleTipEvent:function(){var b=$("businessSaleTipButton");if(!b){return}var a=$("saleTipLayer");$Fn(function(e){$Element(a).toggle();if($Element(a).visible()&&this.nTipLayerTop==0){this.nTipLayerTop=parseInt($Element(b).offset().top)-parseInt($Element(a).offset().top)-parseInt(60)+"px";a.style.top=this.nTipLayerTop}e.stop()},this).attach(b,"click")}});var MapWidgetModel=$Class({$init:function(){this._nLatitudeRatioPerPixel=0;this._nLongitudeRatioPerPixel=0;this._oForeignMarker=null;this.notifyForeignMarkerLoadComplete=new jsMVC.Event();this.mapRegionType="local";this._noLocationPostLayerDisplay={local:"none",foreign:"none"};this._markerCount={local:null,foreign:null}},$static:{MAP_LEFT_TOP_LOCATION:{LATITUDE:38.83,LONGITUDE:125.525},MAP_RIGHT_BOTTOM_LOCATION:{LATITUDE:32.8183,LONGITUDE:131.06},LOCAL_MAP_WIDGET:{DEFAULT_SCROLL:0},FOREIGN_MAP_WIDGET:{SCROLL_LEFT_OFFSET:85,DEFAULT_SCROLL:144}},getForeignMarkerAjaxCall:function(b,a){var e=new $Ajax(b,{onload:$Fn(function(f){this._oForeignMarker=f.json();this.notifyForeignMarkerLoadComplete.notify()},this).bind()});e.request(a)},calculateRatioPerPixel:function(b,a){this._nLatitudeRatioPerPixel=(MapWidgetModel.MAP_LEFT_TOP_LOCATION.LATITUDE-MapWidgetModel.MAP_RIGHT_BOTTOM_LOCATION.LATITUDE)/a;this._nLongitudeRatioPerPixel=(MapWidgetModel.MAP_RIGHT_BOTTOM_LOCATION.LONGITUDE-MapWidgetModel.MAP_LEFT_TOP_LOCATION.LONGITUDE)/b},convertOffsetToLatLngForLocalMap:function(e,f){var b=e.pageX-f.left;var a=e.pageY-f.top;var g={};g.latitude=MapWidgetModel.MAP_LEFT_TOP_LOCATION.LATITUDE-(a*this._nLatitudeRatioPerPixel);g.longitude=MapWidgetModel.MAP_LEFT_TOP_LOCATION.LONGITUDE+(b*this._nLongitudeRatioPerPixel);return g},convertOffsetToLatLngForForeignMap:function(a){return this._pixelToLatLng(a.layerX,a.layerY)},convertLatLngToOffsetForLocalMap:function(g,b){var a=Math.round((MapWidgetModel.MAP_LEFT_TOP_LOCATION.LATITUDE-g.latitude)/this._nLatitudeRatioPerPixel);var e=Math.round((g.longitude-MapWidgetModel.MAP_LEFT_TOP_LOCATION.LONGITUDE)/this._nLongitudeRatioPerPixel);var f={};f.left=e;f.top=a;return f},convertLatLngToOffsetForForeignMap:function(a){var b=this._latLngToPixel(a.latitude,a.longitude);return this._setLatLngToLeftTop(b,a.longitude)},_setLatLngToLeftTop:function(b,a){b.y=(b.y/184)*300-55;if(a<=(-25)){b.x=((b.x+146)/256*413)}else{b.x=((b.x-110)/256*413)}return b},_latLngToPixel:function(h,b){var k=Math.pow(2,7),a=k*2,f=a/360,g=a/(2*Math.PI),e=Math.min(Math.max(Math.sin(h*(Math.PI/180)),-0.9999),0.9999);return{x:Math.round(k+b*f),y:Math.round(k-0.5*Math.log((1+e)/(1-e))*g)}},_pixelToLatLng:function(a,l){var e=this._getPixel(a,l),k=Math.pow(2,7),b=k*2,g=b/360,h=b/(2*Math.PI),f=Math.pow(Math.E,(2*((k-e.y)/h)));return{longitude:((e.x-k)/g),latitude:((Math.asin(Math.max(Math.min((f-1)/(f+1),0.9999),-0.9999))))/Math.PI*180}},_getPixel:function(a,f){var e=(f+55)/300*184;var b=((a/413*256)+110);if(a>420){b=((a/413*256)-146)}return{y:e,x:b}},getForeignMarker:function(){return this._oForeignMarker},getLatitudeRatioPerPixel:function(){return this._nLatitudeRatioPerPixel},getLongitudeRatioPerPixel:function(){return this._nLongitudeRatioPerPixel},setMapRegionType:function(a){this.mapRegionType=a},getMapRegionType:function(){return this.mapRegionType},setNoLocalLocationPostLayerDisplay:function(a){this._noLocationPostLayerDisplay.local=a},getNoLocalLocationPostLayerDisplay:function(){return this._noLocationPostLayerDisplay.local},setNoForeignLocationPostLayerDisplay:function(a){this._noLocationPostLayerDisplay.foreign=a},getNoForeignLocationPostLayerDisplay:function(){return this._noLocationPostLayerDisplay.foreign},setLocalMarkerCount:function(a){this._markerCount.local=a},getLocalMarkerCount:function(){return this._markerCount.local},setForeignMarkerCount:function(a){this._markerCount.foreign=a},getForeignMarkerCount:function(){return this._markerCount.foreign}});var MapWidgetView=$Class({$init:function(){this._elMapWidgetArea=$("widget-mapview")},getMarkers:function(){return $$("a._mapPins",this._elMapWidgetArea)},showForeignMarker:function(a){$Element("foreignMap").html(a)},setMapWidget:function(b,a,e){$("noLocationPostLayer").style.display=b;$("markerCount").innerHTML=a;$("mapArea").scrollLeft=e},changeTab:function(a){var b=(a=="globalTab"?"localTab":"globalTab");$Element($(a)).addClass("on");$Element($(b)).removeClass("on")},showMarker:function(a,h){var k=$Element(a);var f=9.5;var g=8;if(k.hasClass("pin100")){f=14.5;g=24}else{if(k.hasClass("pin10")){f=11.5;g=15}}var b=h.top-g;var e=h.left-f;if(b>(this.getMapAreaHeight()*5/6)){b=b*0.84}else{if(b>(this.getMapAreaHeight()*3/6)){b=b*0.87}else{if(b>(this.getMapAreaHeight()*2/6)){b=b*0.9}}}if(b+g>225){b=225-g}if((e+2*f)>172){e=172-f*2}k.css({top:(b>0?b:0)+"px",left:(e>0?e:0)+"px"});k.show()},isNotExistMapWidgetArea:function(){return this._elMapWidgetArea==null},hideNoLocationPostLayer:function(){$Element($("noLocationPostLayer")).hide()},initMapArea:function(a){this._elMapWidgetArea.innerHTML=a;this._welMapArea=$Element($("mapArea"));this._welMapHelpLayer=$Element($("mapHelpLayer"));this._welLocalMap=$Element("localMap");this._welForeignMap=$Element("foreignMap")},toggleMap:function(a){if($(a).style.display=="none"){this._welLocalMap.toggle();this._welForeignMap.toggle()}},toggleMapHelpLayer:function(){if(this._welMapHelpLayer.visible()){this._welMapHelpLayer.hide();return}this._welMapHelpLayer.show()},getMapAreaOffset:function(){return this._welMapArea.offset()},getMapAreaWidth:function(){return this._welMapArea.width()},getMapAreaHeight:function(){return this._welMapArea.height()},getElMapWidgetArea:function(){return this._elMapWidgetArea},setMapType:function(a){$("mapType").innerHTML=a}});var MapWidgetController=$Class({$jsMVC:jsMVC.$Controller,$init:function(){this._wfOnDragStart=jindo.$Fn(this._onDragStart,this);this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this);this._wfOnSelectStart=jindo.$Fn(this._onSelectStart,this)},start:function(a){this.mMapWidget=jsMVC.getModel("mapWidgetController","mapWidgetModel");this.vMapWidget=jsMVC.getView("mapWidgetController","mapWidgetView");this._setEvent();this.vMapWidget.initMapArea(a);this.mMapWidget.calculateRatioPerPixel(this.vMapWidget.getMapAreaWidth(),this.vMapWidget.getMapAreaHeight());this.mMapWidget.notifyForeignMarkerLoadComplete.attach($Fn(this._setForeignWidgetAfterAjaxCall,this).bind());this._showMarkers();this.mMapWidget.setLocalMarkerCount($("markerCount").innerHTML);this.foreignMaxMarkerPointX=null;this.foreignMaxMarkerCount=0;this._setLocalLocationPostLayerDisplay()},_setEvent:function(){$Fn(this._onMouseOver,this).attach(this.vMapWidget.getElMapWidgetArea(),"mouseover");$Fn(this._onMouseOut,this).attach(this.vMapWidget.getElMapWidgetArea(),"mouseout");$Fn(this._onMouseDown,this).attach(this.vMapWidget.getElMapWidgetArea(),"mousedown")},onClick:function(b){var f=b.element;var a=$Element(cssquery.getSingle("!a",f)?cssquery.getSingle("!a",f):f);var g=utility.getParam(a.className());if(a.hasClass("_goLocalMapViewByMouseOffset")){if(!this._isClick){return}var e=this.mMapWidget.convertOffsetToLatLngForLocalMap(b.pos(),this.vMapWidget.getMapAreaOffset());location.href=(blogURL+"/mapview/MapView.nhn?blogId="+blogId+"&latitude="+e.latitude+"&longitude="+e.longitude+"&zoomLevel=3&mapRegionType=local")}else{if(a.hasClass("_goForeignMapViewByMouseOffset")){if(!this._isClick){return}var e=this.mMapWidget.convertOffsetToLatLngForForeignMap(b.pos());location.href=(blogURL+"/mapview/MapView.nhn?blogId="+blogId+"&latitude="+e.latitude+"&longitude="+e.longitude+"&zoomLevel=3&mapRegionType=foreign")}else{if(a.hasClass("_goLocalMapViewByLatLng")){clickcr(b.element,"mpw*d.pin","","",b.$value());location.href=(blogURL+"/mapview/MapView.nhn?blogId="+blogId+"&latitude="+g[0]+"&longitude="+g[1]+"&zoomLevel=3&mapRegionType=local")}else{if(a.hasClass("_goForeignMapViewByLatLng")){clickcr(b.element,"mpw*w.pin","","",b.$value());location.href=(blogURL+"/mapview/MapView.nhn?blogId="+blogId+"&latitude="+g[0]+"&longitude="+g[1]+"&zoomLevel=5&mapRegionType=foreign")}else{if(a.hasClass("_closeNoLocationPostLayer")){this._closeNoLocationPostLayer()}else{if(a.hasClass("_localMap")){clickcr(b.element,"mpw.domestic","","",b.$value());this._changeLocalWidget()}else{if(a.hasClass("_foreignMap")){clickcr(b.element,"mpw.world","","",b.$value());this._changeForeignWidget()}else{if(a.hasClass("_goMapView")){if(this.mMapWidget.getMapRegionType()==="foreign"){clickcr(b.element,"mpw*w.fullmap","","",b.$value())}else{clickcr(b.element,"mpw*d.fullmap","","",b.$value())}location.href=(blogURL+"/mapview/MapView.nhn?blogId="+blogId+"&mapRegionType="+this.mMapWidget.getMapRegionType())}}}}}}}}if(a.hasClass("_returnFalse")){b.stop()}},_changeLocalWidget:function(){this.vMapWidget.toggleMap("localMap");this.vMapWidget.changeTab("localTab");this.vMapWidget.setMapWidget(this.mMapWidget.getNoLocalLocationPostLayerDisplay(),this.mMapWidget.getLocalMarkerCount(),MapWidgetModel.LOCAL_MAP_WIDGET.DEFAULT_SCROLL);this.mMapWidget.setMapRegionType("local");this.vMapWidget.setMapType("국내지도")},_changeForeignWidget:function(){this._getForeignMarkers();this.mMapWidget.setMapRegionType("foreign");this.vMapWidget.setMapType("해외지도")},_getForeignMarkers:function(){if(this.mMapWidget.getForeignMarkerCount()!=null){this._setForeignWidget();return}var b="/ForeignMapViewAsync.nhn";var a={blogId:blogId};this.mMapWidget.getForeignMarkerAjaxCall(b,a)},_setForeignWidgetAfterAjaxCall:function(){oResult=this.mMapWidget.getForeignMarker();this._setForeignWidgetTotalCount(oResult.totalCount);this._showForeignMarkers(oResult.mapViewList);this._setForeignLocationPostLayerDisplay();this._setForeignWidget()},_closeNoLocationPostLayer:function(){if(this.mMapWidget.getMapRegionType()=="local"){this.mMapWidget.setNoLocalLocationPostLayerDisplay("none")}else{this.mMapWidget.setNoForeignLocationPostLayerDisplay("none")}this.vMapWidget.hideNoLocationPostLayer()},_onMouseOver:function(b){var e=b.element;var a=$Element(cssquery.getSingle("!a",e)?cssquery.getSingle("!a",e):e);var f=utility.getParam(a.className());if(a.hasClass("_toggleMapHelpLayer")){this.vMapWidget.toggleMapHelpLayer()}else{if(a.hasClass("_mapPins")){a.css({zIndex:20})}}},_onMouseOut:function(b){var e=b.element;var a=$Element(cssquery.getSingle("!a",e)?cssquery.getSingle("!a",e):e);var f=utility.getParam(a.className());if(a.hasClass("_toggleMapHelpLayer")){this.vMapWidget.toggleMapHelpLayer()}else{if(a.hasClass("_mapPins")){a.css({zIndex:10})}}},_onMouseDown:function(a){this._isDragable=true;this._isClick=true;this._nClientX=a._event.clientX;this._wfOnDragStart.attach(document,"mousemove");this._wfOnMouseUp.attach(document,"mouseup");this._wfOnSelectStart.attach(document,"selectstart")},_onSelectStart:function(a){if(this._isDragable){a.stop(jindo.$Event.CANCEL_DEFAULT)}},_onMouseUp:function(a){this._isDragable=false;this._wfOnDragStart.detach(document,"mousemove");this._wfOnMouseUp.detach(document,"mouseup")},_onDragStart:function(b){this._isClick=false;var e=$("mapArea");var a=$("foreignMap");if(a.style.display=="none"){return}e.scrollLeft+=(this._nClientX-b._event.clientX);this._nClientX=b._event.clientX},_setForeignWidget:function(){if(this.foreignMaxMarkerPointX<MapWidgetModel.FOREIGN_MAP_WIDGET.SCROLL_LEFT_OFFSET){this.foreignMaxMarkerPointX=MapWidgetModel.FOREIGN_MAP_WIDGET.SCROLL_LEFT_OFFSET}this.vMapWidget.changeTab("globalTab");this.vMapWidget.toggleMap("foreignMap");var b=this.mMapWidget.getForeignMarkerCount();var a=this.foreignMaxMarkerPointX-MapWidgetModel.FOREIGN_MAP_WIDGET.SCROLL_LEFT_OFFSET;this.vMapWidget.setMapWidget(this.mMapWidget.getNoForeignLocationPostLayerDisplay(),b,a)},_setForeignWidgetTotalCount:function(a){if(a==0){this.foreignMaxMarkerPointX=MapWidgetModel.FOREIGN_MAP_WIDGET.DEFAULT_SCROLL}this.mMapWidget.setForeignMarkerCount(a)},_showForeignMarkers:function(b){var a="";$A(b).forEach($Fn(function(e){a+=this._makeMarkupForMarker(e)},this).bind());this.vMapWidget.showForeignMarker(a)},_makeMarkupForMarker:function(a){var e=this.mMapWidget.convertLatLngToOffsetForForeignMap(a);var b="";if(a.count>this.foreignMaxMarkerCount){this.foreignMaxMarkerCount=a.count;this.foreignMaxMarkerPointX=e.x}if(a.count>9&&a.count<100){b="pin10"}else{if(a.count>99){b="pin100"}}return'<a href="#" class="pin '+b+" _mapPins _goForeignMapViewByLatLng _param("+a.latitude+"|"+a.longitude+') + _returnFalse" style="display: inline; z-index: 0; left:'+e.x+"px;top : "+e.y+'px;"><strong>'+a.count+"</strong></a>"},_setLocalLocationPostLayerDisplay:function(){if(blogOwner&&this.mMapWidget.getLocalMarkerCount()==0){this.mMapWidget.setNoLocalLocationPostLayerDisplay("block")}},_setForeignLocationPostLayerDisplay:function(){if(blogOwner&&this.mMapWidget.getForeignMarkerCount()==0){this.mMapWidget.setNoForeignLocationPostLayerDisplay("block")}},_showMarkers:function(){var a=this.vMapWidget.getMarkers();if(a==null||a.length<1){return}$A(a).reverse().forEach($Fn(function(k,b,h){var g=utility.getParam($Element(k).className());var e={latitude:g[0],longitude:g[1]};var f=this.mMapWidget.convertLatLngToOffsetForLocalMap(e,this.vMapWidget.getMapAreaOffset());this.vMapWidget.showMarker(k,f)},this).bind())}});jsMVC.setController("mapWidgetController",MapWidgetController);jsMVC.setModel("mapWidgetController","mapWidgetModel",MapWidgetModel);jsMVC.setView("mapWidgetController","mapWidgetView",MapWidgetView);var mapWidgetController=jsMVC.getController("mapWidgetController");var Mapview=$Class({$init:function(){},start:function(a){mapWidgetController.start(a)}});var LibraryWidgetModel=$Class({$init:function(){this.notifyContentLoadComplete=new jsMVC.Event()},setPageInfo:function(b,e,a){this.nTotalCount=b;this.nTotalPageCount=e;this.nCurrentPageNum=a},setCurrentStatus:function(sCurrentData){this.aCurrentMaterials=eval(sCurrentData)},setWritingMaterialListType:function(a){this.sWritingMaterialListType=a},getCurrentPageNum:function(){return this.nCurrentPageNum},getTotalPageCount:function(){return this.nTotalPageCount},getCurrentMaterialList:function(){return this.aCurrentMaterials},getWritingMaterialListType:function(){return this.sWritingMaterialListType},hasNext:function(){return this.nCurrentPageNum<this.nTotalPageCount},loadNext:function(){if(this.hasNext()){this.nCurrentPageNum+=1;this._load()}},hasPrev:function(){return this.nCurrentPageNum>1},loadPrev:function(){if(this.hasPrev()){this.nCurrentPageNum-=1;this._load()}},_load:function(){new $Ajax("/library/LibraryWidgetMaterialListAsync.nhn",{type:"xhr",method:"post",onload:$Fn(function(a){if(a.status()==200){this.setCurrentStatus(a.text());this.notifyContentLoadComplete.notify()}},this).bind()}).request({blogId:blogId,pageNum:this.nCurrentPageNum,writingMaterialListType:this.sWritingMaterialListType})}});var LibraryWidgetView=$Class({$init:function(){this.elWidgetContentArea=$("widget_library_content");this.welPageNoticeArea=$Element("library_widget_paging");var a=$Element("widget_library_navigation");this.welPrev=$Element(a.query("._prev"));this.welNext=$Element(a.query("._next"))},$static:{MATERIAL_TEMPLATE:$Template('{for material in aMaterialList}<li class="{=material.postLiClass}"><div class="thmb"><a href="{=material.postUrl}" target="_blank" onclick="clickcr(this, \'lbw.list\', \'\', \'\', event)"><img src="{=material.postThumbnailUrl}" alt="{=material.title}" class="thumb_img" onerror="this.src=\'http://blogimgs.naver.net/nblog/mylog/library/w_noimg_{=material.postLiClass}.gif\';this.className=\'no_img\'"><span class="mask"></span></a></div></li>{/for}'),WIDGET_TYPE_TO_CLASS:{"1":"libr","2":"libr2","3":"libr3"}},initWidgetType:function(a){$Element("widget_library").addClass(LibraryWidgetView.WIDGET_TYPE_TO_CLASS[a])},drawWidget:function(f,e,a,g,b){this.elWidgetContentArea.innerHTML=f;this.welPageNoticeArea.html("<strong>"+a+"</strong>/"+e);if(g==true){this.welPrev.show()}else{this.welPrev.hide()}if(b==true){this.welNext.show()}else{this.welNext.hide()}}});var LibraryWidgetController=$Class({$jsMVC:jsMVC.$Controller,$init:function(){},start:function(a,f){var e=1;var b=parseInt($("library_widget_totalcount").innerHTML);this.mLibrary=jsMVC.getModel("libraryWidgetController","libraryWidgetModel");this.vLibrary=jsMVC.getView("libraryWidgetController","libraryWidgetView");this.mLibrary.setWritingMaterialListType(a);this.mLibrary.notifyContentLoadComplete.attach($Fn(this._drawCurrent,this).bind());this.mLibrary.setPageInfo(b,parseInt($("library_widget_totalPageCount").innerHTML),e);this.mLibrary.setCurrentStatus(f);this.vLibrary.initWidgetType(a);this._setEvent();if(b>0){this._drawCurrent()}},_setEvent:function(){$Fn(this._doClick,this).attach($("widget_library_navigation"),"click")},_doClick:function(e){var b=e.element;var a=$Element(cssquery.getSingle("!a",b)?cssquery.getSingle("!a",b):b);if(a.hasClass("_prev")){this._loadPrev()}else{if(a.hasClass("_next")){this._loadNext()}}e.stop()},_loadNext:function(){if(this.mLibrary.hasNext()){this.mLibrary.loadNext()}},_loadPrev:function(){if(this.mLibrary.hasPrev()){this.mLibrary.loadPrev()}},_drawCurrent:function(){var a=this.mLibrary.getCurrentMaterialList();this.vLibrary.drawWidget(LibraryWidgetView.MATERIAL_TEMPLATE.process({aMaterialList:a}),this.mLibrary.getTotalPageCount(),this.mLibrary.getCurrentPageNum(),this.mLibrary.hasPrev(),this.mLibrary.hasNext())}});var Library=$Class({$init:function(){},start:function(b,a){jsMVC.setController("libraryWidgetController",LibraryWidgetController);jsMVC.setModel("libraryWidgetController","libraryWidgetModel",LibraryWidgetModel);jsMVC.setView("libraryWidgetController","libraryWidgetView",LibraryWidgetView);jsMVC.getController("libraryWidgetController").start(b,a)}});for(var i=0;i<aWidget.length;i++){var oObj=null;var flag=true;var sWidgetKey=aWidget[i].replace(/_[\d]+/,"");for(var j=0;j<aNonWidget.length;j++){if(sWidgetKey==aNonWidget[j]){flag=false}}if(flag){var oObj=window[utility.capitalize(sWidgetKey)];if(oObj!=undefined&&typeof oObj=="function"){eval("var "+sWidgetKey+" = new "+utility.capitalize(sWidgetKey)+"()")}}}var WidgetLoader=$Class({URL:"/WidgetListAsync.nhn",$init:function(){this._load()},_load:function(){if((ePapermain=$("papermain"))!=null){if(ePapermain.src&&(ePapermain.src.indexOf("/PostWriteForm.nhn")>-1||ePapermain.src.indexOf("/PostUpdateForm.nhn")>-1)){return}}var e=true;if(typeof visitor=="undefined"){isVisitorOpen=false}if(typeof buddy=="undefined"){e=false}this.elLogtype=$("logtype");this.path="/"+this.elLogtype.value;if(this.path=="/"){this.path=""}var b=this.path+this.URL;var a={blogId:blogId,listNumVisitor:listNumVisitor,isVisitorOpen:isVisitorOpen,isBuddyOpen:e,selectCategoryNo:selectCategoryNo,skinId:skinId,skinType:skinType,isCategoryOpen:isCategoryOpen,isEnglish:isEnglish,listNumComment:listNumComment,areaCode:areaCode,weatherType:weatherType,currencySign:currencySign,enableWidgetKeys:aWidget.toString(),writingMaterialListType:writingMaterialListType};new $Ajax(b,{method:"post",onerror:function(){alert("위젯 로딩중 오류가 발생하였습니다.")},onload:$Fn(function(f){if(typeof f!="undefined"){this._onLoaded(f.json())}},this).bind()}).request(a)},_onLoaded:function(result){this.result=result;var aEl=cssquery(".widget");var el;for(i=0,nCount=aEl.length;i<nCount;i++){el=aEl[i];try{eval("this._"+(el.id).replace(/-/g,"_")+"_load()")}catch(e){}}if(this.result.visitor.isOpen&&typeof visitor!="undefined"){visitor.replaceHTML(this.result.visitor.content)}if(typeof challengeGoalTrack!="undefined"){maxSubWidgetIndex=result.challengegoaltrack.maxSubwidgetIndex;for(var count=0;count<maxSubWidgetIndex;count++){widgetId=this._getChallengeSubwidgetId("challengeGoalTrack",count);if(typeof eval("result.challengegoaltrack."+widgetId+"_content")!="undefined"){challengeGoalTrack.replaceHTML(widgetId,eval("result.challengegoaltrack."+widgetId+"_content"))}}}if(typeof challengeMasterTrack!="undefined"){maxSubWidgetIndex=result.challengemastertrack.maxSubwidgetIndex;for(var count=0;count<maxSubWidgetIndex;count++){widgetId=this._getChallengeSubwidgetId("challengeMasterTrack",count);if(typeof eval("result.challengemastertrack."+widgetId+"_content")!="undefined"){challengeMasterTrack.replaceHTML(widgetId,eval("result.challengemastertrack."+widgetId+"_content"))}}}if(typeof focusing!="undefined"){focusing._gotoTagForPost()}},_getChallengeSubwidgetId:function(e,b){var a=e;if(b==0){a=a}else{a=a+"_"+(b+1)}return a},_widget_business_load:function(){if(typeof business!="undefined"&&this.result.business){business.replaceHTML(this.result.business.content);business.bindSaleTipEvent()}},_blog_buddy_load:function(){if(this.result.buddy.isOpen&&typeof buddy!="undefined"){buddy.replaceBuddyGroupHTML(this.result.buddy.content)}},_blog_stat_load:function(){this.elBlogStat=$("blog-stat");if(this.elBlogStat&&typeof stat!="undefined"){stat.replaceHTML(this.result.stat.content)}},_blog_profile_load:function(){if(typeof profile!="undefined"){profile.replaceHTML(this.result.profile.content);this.elNickNameArea=$("nickNameArea");if(this.elNickNameArea){$("nickNameArea").innerHTML=utility.wordBreak($("nickNameArea").innerHTML)}}},_widget_currency_load:function(){if(typeof currency!="undefined"){currency.replaceHTML(this.result.currency.content)}},_widget_weather_load:function(){if(typeof weather!="undefined"){weather.replaceHTML(this.result.weather.content)}},_widget_saying_load:function(){if(typeof wisesaying!="undefined"){wisesaying.replaceHTML(this.result.wisesaying.content)}},_blog_tag_load:function(){if(typeof tag!="undefined"){tag.replaceHTML(this.result.tag.content)}},_blog_counter_load:function(){if(typeof counter!="undefined"){counter.replaceHTML(this.result.counter.content)}},_blog_calendar_load:function(){if(typeof calendar!="undefined"){calendar.replaceHTML(this.result.calendar.content)}},_blog_category_load:function(){if(typeof category!="undefined"){category.replaceHTML(this.result.category.content);category.doTasksAfterCategoryLoad()}},_blog_recent_comment_load:function(){if(typeof comment!="undefined"){comment.replaceHTML(this.result.comment.content)}},_widget_mapview_load:function(){if(typeof mapview=="undefined"){return}mapview.start(this.result.mapview.content)},_widget_library_load:function(){if(typeof library=="undefined"){return}library.start(writingMaterialListType,this.result.library.content)}});var widgetLoader=new WidgetLoader();var SympathyLayer=$Class({$init:function(){this.el=$("sympathyDeleteLayer");this.elDeleteBtn=$("sympathyLayer_deleteBtn");this.elBlockCheck=$("registerBlacklistCheck");this._setEvent()},_setEvent:function(){$Fn(this._onClick,this).attach(this.el,"click")},_onClick:function(e){var f=e.element;var b=$Element(f);var a=$$.getSingle("!a",f)||f;var h=$Element(a);var g=utility.getParam(h.className());if(oReadOnly.checkReadOnly(e)==true){return}if(h.hasClass("_deleteHistoryWithBlock")){this.deleteHistoryWithBlock(g[0],g[1],g[2])}if(h.hasClass("_deleteFormClose")){this.deleteFormClose()}if(b.hasClass("_returnFalse")||h.hasClass("_returnFalse")){e.stop()}},deleteHistoryWithBlock:function(g,a,f){try{if(this.elBlockCheck.checked){var b="/NVisitorBlock4Ajax.nhn?blogId="+g+"&blockId="+f;var h=new $Ajax(b,{method:"post",onerror:function(){alert("요청이 일시적으로 정상처리되지 못했습니다.\n잠시 후에 다시 시도해 주세요.")},onload:$Fn(function(e){if(G_ajaxHandler(e.text())){this.deleteHistoryAsync(g,a,f);alert("신고가 완료되었습니다.\n추가된 블랙리스트는 스팸차단 설정\n페이지에서 확인하실 수 있습니다.");location.href=document.location=adminURL+"/"+g+"?Redirect=UserFilter"}else{this.deleteFormClose();this.deleteHistory(f,a)}},this).bind()});h.request();h=null}else{this.deleteFormClose();this.deleteHistory(f,a)}}catch(k){}},deleteHistory:function(b,a){var h=$("sympathyFrm"+a);var g=h.contentDocument||h.contentWindow.document;var f=$$.getSingle("#searchForm",g);var e=$$.getSingle("#targetId",g);f.action="/SympathyDelete.nhn";e.value=b;f.submit()},deleteHistoryAsync:function(g,a,f){try{var b="/SympathyDeleteWithBlockAsync.nhn?blogId="+g+"&logNo="+a+"&targetId="+f;var h=new $Ajax(b,{method:"post",onerror:function(){alert("요청이 일시적으로 정상처리되지 못했습니다.\n잠시 후에 다시 시도해 주세요.")},onload:$Fn(function(e){this.deleteFormClose()},this).bind()});h.request();h=null}catch(k){}},deleteFormClose:function(){$Element(this.el).css({display:"none"})}});var oSympathyLayer=new SympathyLayer();var FoldSide=$Class({mainPageRemoveParameters:$A(["Redirect","isMrblogPost","reqparam","isHappyBeanLeverage","isAfterWrite"]),contentPageRemoveParameters:$A(["widgetTypeCall","topReferer","isAfterWrite"]),$init:function(a){this.el=$(a);this._setEvent()},_setEvent:function(){},_onClickFoldSideIcon:function(e){var f=e.element;var b=$Element(f);var a=utility.getElement(f,"a")||f;var h=$Element(a);var g=utility.getParam(h.className());if((b.hasClass("_returnFalse"))||(h.hasClass("_returnFalse"))){e.stop()}if(h.hasClass("_foldSide1")){this.modifySide(1,foldSideType)}else{if(h.hasClass("_foldSide2")){this.modifySide(2,foldSideType)}else{if(h.hasClass("_openSide1")){this.modifySide(1,openSideType)}else{if(h.hasClass("_openSide2")){this.modifySide(2,openSideType)}}}}},modifySide:function(e,f){var b=document.location.href;if(this._isAllowPage(b)){var a="";if($("papermain")){if($("papermain").contentDocument){a=$("papermain").contentDocument.location.href}else{a=$("papermain").Document.location.href}}var g="&skinTemp.side"+e+"Fold="+f;document.location.href=this._generateMainPageUrl(b,g)+this._generateContentFrameUrl(a)}},_isAllowPage:function(a){return a.indexOf("Preview.nhn")==-1},_generateMainPageUrl:function(a,b){return this._filterUrl(a,"main")+b},_generateContentFrameUrl:function(a){var b=this._filterUrl(a,"content");return"&Redirect="+encodeURIComponent(b)},_filterUrl:function(pageUrl,type){if(type=="main"){if(pageUrl.indexOf("&skinTemp.")>-1){pageUrl=pageUrl.substring(0,pageUrl.indexOf("&skinTemp."))}this.mainPageRemoveParameters.forEach(function(removeParamter,index){var pattern="/"+removeParamter+"[^(&|$)]*(&|$)/g";pageUrl=pageUrl.replace(eval(pattern),"")})}else{if(type=="content"){this.contentPageRemoveParameters.forEach(function(removeParamter,index){var pattern="/"+removeParamter+"[^(&|$)]*(&|$)/g";pageUrl=pageUrl.replace(eval(pattern),"")});pageUrl=this._filterUrlForTag(pageUrl);pageUrl=pageUrl.replace(/&$/g,"")}}pageUrl=pageUrl.replace("#","&");return pageUrl},_filterUrlForTag:function(f){var b=f.match(/tagName=[^(&|$)]*(&|$)/g);if(b){b=b+"";var a=b.substring(b.indexOf("=")+1,b.indexOf("&")>-1?b.indexOf("&"):b.length);var e=encodeURIComponent(a);f=f.replace(a,e)}return f}});var oFoldSide=new FoldSide(document.body);var HappyBeanLayer=$Class({$init:function(){this.sLayerId="happyBean_Layer";this.nTop=150},callHappyBean:function(h,a,b,g){if(b.length>3&&g.length>3){var f=b;var e=new $Ajax(f,{method:"POST",onLoad:$Fn(this._onLoad,this).bind()}).request({reqparam:g})}},_onLoad:function(a){var b=a.json()["html"];if(b.length>10){this.showLayer(b)}b=null},bean_close:function(){$Element(this.sLayerId).hide()},showLayer:function(b){var a=$Element($("<div>"));document.body.appendChild(a.$value());a.attr("id",this.sLayerId);a.html(b);this._setLayerPos(a.$value());a=null},_setLayerPos:function(a){var f;try{f=parseInt(a.firstChild.style.width,10)}catch(g){f=parseInt(a.firstChild.nextSibling.style.width,10)}var b=this._getCenterLeft(f);$Element(a).css({position:"absolute",top:this.nTop+"px",left:b+"px",zIndex:10})},_getCenterLeft:function(e){var a;var b=parent;if(window.innerWidth){a=window.innerWidth}else{if($Agent().IE55){a=b.document.body.clientWidth}else{if(b.document.documentElement.clientWidth!=0){a=b.document.documentElement.clientWidth}else_width=b.document.body.clientWidth}}var f=(a/2)-(e/2)+b.document.documentElement.scrollLeft;if(f<0){f=0}return f}});var blog_happyBeanLayer=new HappyBeanLayer();var bean_close=$Fn(blog_happyBeanLayer.bean_close,blog_happyBeanLayer).bind();var TagReadOnly=$Class({_checkTagReadOnly:function(a){var b=$Element(utility.getElement(a.element,"a"));if(!b){return false}if(b.hasClass("_tagRosRestrict")){if(sIsTagReadOnly=="true"){alert(sTagSorryText);a.stop();return true}}return false}});var oTagReadOnly=new TagReadOnly();var LayoutExecutor=$Class({nBgImgHeight:null,elDoc:null,_sAppInstallationLayerLogNo:"",$init:function(){this.rxImageUrl=/[^/]*$/;this.submitPostPreview();utility.checkRClickYN(rightClickOpenYn,blogOwner);this.elDoc=document.documentElement||document;this.elHeadSkin=$("head-skin");this.nBgImgHeight=0;this.checkTopLayoutExist();this.setTimeoutForFlashPlay();this.setTimeoutForCheckMusic();this._setEvent();this.hideSaveOptionLayer()},_setEvent:function(){$Fn(this._onClick,this).attach(document,"click");$Fn(this._onUnload,this).attach(window,"unload");$Fn(this._onLoad,this).attach(window,"load");$Fn(this._onScroll,this).attach(window,"scroll");$Fn(this._onResize,this).attach(window,"resize");$Fn(this._onError,this).attach(document,"error");var a=$("content-area");$Fn(this._onMouseOverOrOut,this).attach(a,"mouseover");$Fn(this._onMouseOverOrOut,this).attach(a,"mouseout");this._setConfigLayerFocusOutEvent()},_closeConfigLayer:function(){configMenu.hideLayers()},_setConfigLayerFocusOutEvent:function(a){var f=$$("div._configPostLayer");if(!f||f.length==0){return}for(var e=0;e<f.length;e++){var b=$$("a",f[e]);if(!b||b.length==0){continue}$Fn(this._closeConfigLayer,this).attach(b[b.length-1],"focusout")}},_onEnterKeyUp:function(a){if(a.key().enter){this._onClick(a)}a.stop()},_onClick:function(g){if(oReadOnly.checkReadOnly(g)==true){return}if(typeof oTagReadOnly!="undefined"&&oTagReadOnly._checkTagReadOnly(g)==true){return}var e=g.element;var a=$Element(e);var o=utility.getElement(e,"a")||e;var m=$Element(o);var q=utility.getParam(m.className()!=""?m.className():a.className());if((a.hasClass("_returnFalse"))||(m.hasClass("_returnFalse"))){g.stop()}var p=$Element(cssquery.getSingle("!div",e)?cssquery.getSingle("!div",e):e);if(bIsPreview){if(!utility.getElement(e,"div","post-view")){g.stop();return}else{if(o){o.target="_blank"}}}if(bIsRemocon){g.stop();return}if(!p.hasClass("_configPostLayer")){configMenu.hideLayers()}if(a.hasClass("_configPost")){configMenu.showLayer(e,q[0],q[1])}else{if(a.hasClass("_scrapHistory")){configMenu.openScrapHistory(q[0],q[1])}else{if(a.hasClass("_printPost")){configMenu.printPost(q[0])}else{if(a.hasClass("_noticePostAdd")){configMenu.noticePostAdd(q[0],q[1])}else{if(a.hasClass("_noticePostRemove")){configMenu.noticePostRemove(q[0],q[1],q[2])}else{if(a.hasClass("_prologue")){configMenu.addPrologue(q[0])}else{if(a.hasClass("_filesave")){configMenu.exportPostTransToFile(q[0])}else{if(m.hasClass("_noticePost.remove")){noticePostController.remove(q)}else{if(m.hasClass("_getSummaryContent")){oSummaryContent.getSummaryContent(q[0],q[1],q[2]|false)}else{if(m.hasClass("_moreOpen")){oSummaryContent.moreOpen(q[0],q[2])}else{if(m.hasClass("_moreClose")){oSummaryContent.moreClose(q[0],q[1]|false)}else{if(m.hasClass("_checkBlock")){postListTable.checkBlock(g)}else{if((m.hasClass("_showTagEditBox"))&&q.join("|").indexOf("EDIT")>-1){var t=q[1];if(q.join("|").indexOf("TOP")==-1){postListTag.showTagEditBox(t,$("tagList_"+t))}else{postListTag.showTagEditBox(t,$("tagTopName_"+t))}}else{if(a.hasClass("_saveTag")){if(q.join("|").indexOf("TOP")==-1){var t=q[0];postListTag.saveTag(t,$("tagList_"+t))}else{var t=q[1];postListTag.saveTag(t,$("tagTopName_"+t))}}else{if(a.hasClass("_cancelTag")){if(q.join("|").indexOf("TOP")==-1){var t=q[0];postListTag.hideTagEditBox(t,$("tagList_"+t))}else{var t=q[1];postListTag.hideTagEditBox(t,$("tagTopName_"+t))}}else{if(a.hasClass("_toggleTopList")){postListTable.toggleTopList()}else{if(m.hasClass("_goPageTop")){postListTable.goPageList(q[0],postListTable.TOP);g.stop()}else{if(m.hasClass("_goPageBottom")){postListTable.goPageList(q[0],postListTable.BOTTOM);g.stop()}else{if(m.hasClass("_toggleListTopManager")){postListTable.toggleListTopManager()}else{if(a.hasClass("_checkAllPost")){postListTable.checkAllPost()}else{if(m.hasClass("_cfmPostRegistTagName")){postListTable.cfmPostRegistTagName()}else{if(m.hasClass("_cfmAuthUpdatePost")){postListTable.cfmAuthUpdatePost()}else{if(m.hasClass("_cfmMovePost")){postListTable.cfmMovePost()}else{if(m.hasClass("_cfmDeletePost")){postListTable.cfmDeletePost()}else{if(a.hasClass("_cmtList")||a.hasClass("_repList")||a.hasClass("_symList")){postView.cmtControl(q[0],q[1],q[2],q[3])}else{if(a.hasClass("_event_sublayer")){postView.event_sublayer(q)}else{if(m.hasClass("_sympathy")){postView.sympathy(q[0],q[1],q[2])}else{if(m.hasClass("_deletePost")){postView.deletePost(o,q[0],null,q[1])}else{if(m.hasClass("_deletePostConfirm")){postView.deletePost(o,null,"realDelete")}else{if(m.hasClass("_modifyPost")){if(q[1]!=undefined&&q[1]=="false"){alert("일시적인 장애로 글을 수정할 수 없습니다. 잠시 후 다시 시도해 주세요.")}else{postView.modifyPost(o,q[0])}}else{if(m.hasClass("_showFileLayer")){postView.showFileLayer(e,q[0],q[1],q[2])}else{if(m.hasClass("_showMalwareAlertLayer")){postView.showMalwareAlertLayer(o,q[0],q[1],q[2])}else{if(m.hasClass("_showAhfLicenseAlertLayer")){postView.showAhfLicenseAlertLayer(o,q[0],q[1],q[2])}else{if(m.hasClass("_closeMalwareAlertLayer")){postView.closeMalwareAlertLayer(e)}else{if(m.hasClass("_showBlockAlertLayer")){postView.showBlockAlertLayer(o,q[0],q[1],q[2],q[3])}else{if(m.hasClass("_closeBlockAlertLayer")){postView.closeBlockAlertLayer(e)}else{if(m.hasClass("_showSendInfoLayer")){postView.showSendInfoLayer(e,q[0],q[1])}else{if(m.hasClass("_open_magazineviewer")){postView.openMagazineViewer(e,q[0],q[1],q[2],q[3],g.$value())}else{if(m.hasClass("_magazineViewerPromotionLayerClose")){postView.cloaseMagazineViewPromotionLayer()}else{if(m.hasClass("_open_mapview")){postView.openMapView(m,q[0],q[1],q[2])}else{if(m.hasClass("_open_foreign_mapview")){postView.openForeignMapView(m,q[0],q[1],q[2])}else{if(m.hasClass("_releaseRequest")){oMonitoring.releaseRequest(q[0],q[1],q[2],q[3],q[4])}else{if(m.hasClass("_monitorToggle")){oMonitoring.monitorToggle(q[0],o)}else{if(m.hasClass("_monitorToggleNew")){oMonitoring.monitorToggleNew(q[0],o)}else{if(m.hasClass("_blockContentToggle")){oMonitoring.blockContentToggle(q[0],o)}else{if(a.hasClass("_stopqmsg")){postView.stopqmsg()}else{if(m.hasClass("_closeLayer")){switch(q[0]){case"sendPostLayer":oCurtain.hideCurtain();break}utility.closeLayer(q[0])}else{if(m.hasClass("_sendInfoUrl")){postView.checkSendInfoUrl(g,q[0])}else{if(m.hasClass("_oPhotoPaginateMove")){oPhotoPaginate.move(q[0])}else{if(a.hasClass("_reloadByUser")){postView.reloadByUser()}else{if(m.hasClass("_showExifInfoLayer")&&oExif){oExif.toggleExifInfoLayer()}else{if(m.hasClass("_saveSourceImage")&&oExif){this.toggleSaveOptionLayer()}else{if(m.hasClass("toPC")&&oExif){window.location.href=oExif.changeImageSaveInfoUrl(oExif.elCurrentImage.src)}else{if(m.hasClass("toNDrive")&&oExif){var h;var s;var l="";var k="";var f="/"+oExif.elCurrentImage.id;var e=$Element(cssquery.getSingle("!.post-view",oExif.elCurrentImage));var q=utility.getParam(e.className()!=""?e.className():e.className());var n=q[0];h=$H(aPostImageFileSizeInfo[n]);if(h.$(f)!=undefined){s=h.$(f).split("|");l=s[0].split(",").join("");k=s[1];this.openNdrive(oExif.changeImageSaveInfoUrl(oExif.elCurrentImage.src),k,l)}}else{if(m.hasClass("_checkAttachFileAlive")){var q=utility.getParam(m.className()!=""?m.className():a.className());var r=m.attr("href");var b=""+m.hasClass("_scrapPost");if(m.hasClass("_toNDriveFromAttachFile")){r=q[0];b=q[3]}if(postView.isDeadAttachFile(r,b)){g.stop();alert("원본 포스트가 삭제되어 첨부파일을 확인할 수 없습니다.");return}if(m.hasClass("_toNDriveFromAttachFile")){this.openNdrive(q[0],q[1],q[2])}}else{if(m.hasClass("_foldSide1")){oFoldSide.modifySide(1,foldSideType)}else{if(m.hasClass("_foldSide2")){oFoldSide.modifySide(2,foldSideType)}else{if(m.hasClass("_openSide1")){oFoldSide.modifySide(1,openSideType)}else{if(m.hasClass("_openSide2")){oFoldSide.modifySide(2,openSideType)}else{if(m.hasClass("_setTop")){utility.setTop()}else{if(a.hasClass("_closeRosMsg")){postView.closeRosMsg()}else{if(a.hasClass("_closeCommentRosMsg")){commentReadOnlyNoticeModel.closeRosNotice()}else{if(a.hasClass("_postSize")){oQuickBannerController.expandEditor(false);g.stop()}else{if(m.hasClass("_closeQuickPostPromotion")){oQuickPromotionController.closePromotion()}else{if(m.hasClass("_goToQuickPostSetting")){}else{if(a.hasClass("_postSize")){oQuickBannerController.expandEditor(false);g.stop()}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}if(!m.hasClass("_showFileLayer")&&typeof postView!="undefined"){postView.closeFileLayer()}if(!m.hasClass("_showSendInfoLayer")&&$("sendInfoLayer")){utility.closeLayer("sendInfoLayer")}if(!m.hasClass("_showExifInfoLayer")&&oExif&&!utility.getElement(e,"div","detail_exif")){oExif.hideExifLayer()}if(!m.hasClass("_saveSourceImage")&&oExif&&!utility.getElement(e,"div","SaveOption")){this.hideSaveOptionLayer()}if(m.hasClass("_setTopListUrl")){this.setTopListUrl(o)}if(isMemolog){this.checkMemologPage(g)}mapWidgetController.onClick(g)},toggleSaveOptionLayer:function(){if($Element(this.getSaveOptionLayer()).visible()&&oExif.elCurrentImage){this.hideSaveOptionLayer()}else{this.showSaveOptionLayer()}},_onMouseOverOrOut:function(f){var g,e,b,k,h;g=f.element;e=$Element(g);b=utility.getElement(g,"a")||g;k=$Element(b);h=utility.getParam(k.className()!=""?k.className():e.className());if(f.type=="mouseover"){if(k.hasClass("_cclInfoWindow")){$Element(h[0]).show()}else{if(typeof oSetClipboard!="undefined"&&oSetClipboard&&e.hasClass("_setClipboard")){e.removeClass("_setClipboard");oSetClipboard.setData(g,g.title)}}if(!oExif){return}this.hideSaveOptionLayer();if(e.hasClass("_ExifCloseBtn")){oExif.mouseoverCloseButton(g)}if(utility.getElement(g,"div","btn_exif")){return}if(oExif.checkPostImage(g)&&!userAgentUtil.isIPadRequest()){var a=$$.getSingle("!div.post-view",g);if(!a){return}h=utility.getParam(a.className);if(!h){return}h=aPostBaseInfo[h[0]].split("|");if(h&&h[6]&&h[6]=="true"){oExif.showButton(g)}}else{oExif.hideButton(g)}}else{if(k.hasClass("_cclInfoWindow")){$Element(h[0]).hide()}if(oExif&&e.hasClass("_ExifCloseBtn")&&!userAgentUtil.isIPadRequest()){oExif.mouseoutCloseButton(g)}}},_onUnload:function(){utility.actOnUnload()},_onLoad:function(){this.callHappybeanLayer();this.checkHeadSkin()},_onScroll:function(){this.resizeHeadSkin(this.elHeadSkin)},_onResize:function(){this.resizeHeadSkin(this.elHeadSkin)},getSaveOptionLayer:function(){if(!this.elSaveOptionLayer){this.elSaveOptionLayer=$("SaveOption")}return this.elSaveOptionLayer},hideSaveOptionLayer:function(){$Element(this.getSaveOptionLayer()).hide()},showSaveOptionLayer:function(){$Element(this.getSaveOptionLayer()).show()},openNdrive:function(a,g,e){a=a.replace(this.rxImageUrl,g);var b=gsNDriveUrl+"/downloadfile.nhn?serviceType=BLOG&availableShare=true&attachtype=normal&downloadurl="+a+"&filename="+g+"&filesize="+e;var f=window.open(b,"ndrivePopup","scrollbars=no,toolbar=no,location=no,resizable=no,menubar=1,status=no,menubar=no,width=476,height=360");if(f!=null){f.focus()}},getTopListUrlOption:function(){var a="&userTopListOpen="+$Element(postListTable.elTopList).visible();a+="&userTopListCount="+postListTable.getCurrentTopListCount();a+="&userTopListManageOpen="+$Element(postListTable.elTopList).hasClass("show-list-manager-mode");a+="&userTopListCurrentPage="+postListTable.currentPage;return a},setTopListUrl:function(a){a.href=a.href+this.getTopListUrlOption()},checkMemologPage:function(b){var f=b.element;var a=utility.getElement(f,"a")||f;var e=utility.getElement(f,"table")||f;if($Element(e).hasClass("page-navigation")&&a){if($Element(postListTable.elTopList).hasClass("show-list-manager-mode")){a.href=a.href+"&userTopListManageOpen=true"}}},_onError:function(a){utility.nvl_error(a)},isBgImage:function(a){var b=$Element(a).css("backgroundImage");if(b=="none"||b==""){return false}else{return true}},resizeHeadSkin:function(b){if($Agent().Opera||!this.isBgImage(this.elHeadSkin)){return}var a=this.elDoc.scrollWidth;b.style.width=(this.elDoc.offsetWidth>=a)?"":a+"px";if(this.elHeadSkin.offsetHeight<this.nBgImgHeight){$Element(this.elHeadSkin).height(this.nBgImgHeight)}},checkHeadSkin:function(){var g,a,b,f,e;if(!this.isBgImage(this.elHeadSkin)){return}else{g=$Element(this.elHeadSkin).css("backgroundImage").replace(/url\(([\w\W]*)\)/ig,"$1").replace(/\"/g,"")}a=$("<div>");b=$("<img>");b.src=g;a.appendChild(b);f=$Element(a);e=$Element(this.elHeadSkin);f.css({position:"absolute",left:"-9999px",top:"-9999px"});this.elHeadSkin.appendChild(a);this.nBgImgHeight=f.height;if(e.height()<this.nBgImgHeight){e.height(this.nBgImgHeight)}this.elHeadSkin.removeChild(a);this.resizeHeadSkin(this.elHeadSkin);b=a=g=null},checkTopLayoutExist:function(){if(isTopLayoutEmpty){alert("지원되지 않는 레이아웃입니다.\n 레이아웃 상단에 타이틀 및 블로그 메뉴를 설정해주시기 바랍니다.")}},submitPostPreview:function(){if(document.postPreviewDummyForm){document.postPreviewDummyForm.submit()}},_checkMusic:function(){if(isParentHiddenFrame()&&typeof music!="undefined"&&parent.hiddenFrame.playType!="blogMusic"){music.stop("js")}},setTimeoutForCheckMusic:function(){setTimeout($Fn(this._checkMusic,this).bind(),600)},setTimeoutForFlashPlay:function(){if(isParentHiddenFrame()&&parent.hiddenFrame.isPlayMusic&&parent.hiddenFrame.playType=="blogMusic"){setTimeout("music.flashPlay(parent.hiddenFrame.SongIdx)",600)}},callHappybeanLayer:function(){if(typeof blog_happyBeanLayer!="undefined"&&happyBeanApiURL!=""){blog_happyBeanLayer.callHappyBean(serviceId,naverId,happyBeanApiURL,reqparam)}}});var oLayoutExecutor=new LayoutExecutor();var hb_clickcrVersion="1.2.0";var nclkDetect=navigator.userAgent.toLowerCase();var nclkIsSafari=(nclkDetect.indexOf("safari")!=-1?true:false);var nclkMaxDepth=4;var nclkModule="cc";if(!g_pid){var g_pid=""}if(!g_sid){var g_sid=""}if(!ccsrv){var ccsrv="cc.naver.com"}if(!HAPPYBEAN_API_NSC){var HAPPYBEAN_API_NSC="happybean.api"}var nClkImg=[];function hb_clickcr(ah,af,ad,ab,aa,Z,X){var W,A,O,V,G;var U="";var T=window.event?window.event:aa;var S=-1;var Q=-1;var P=-1;var N=-1;var M,C,Y;var L,F,B;var R,H,E,ac;var K;var J=0;if(!Z){Z=0}if(!X){X=""}if(window.g_ssc!=undefined&&window.g_query!=undefined){J=1}else{J=0}try{ac=xWindowSize(window);Y=checkIframe(ah);if(Y){var I=findPos(document.getElementById(Y));if(T.clientX&&T.clientX!=undefined){M=document.body;if(M.clientLeft&&M.clientTop){ifrSx=T.clientX-M.clientLeft;ifrSy=T.clientY-M.clientTop}else{ifrSx=T.clientX;ifrSy=T.clientY}}P=I[0]+ifrSx;N=I[1]+ifrSy;if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){M=document.body;S=P-M.scrollLeft;Q=N-M.scrollTop}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){C=document.documentElement;S=P-C.scrollLeft;Q=N-C.scrollTop}else{S=P;Q=N}}}else{if(T.clientX&&T.clientX!=undefined){M=document.body;if(M.clientLeft&&M.clientTop){S=T.clientX-M.clientLeft;Q=T.clientY-M.clientTop}else{S=T.clientX;Q=T.clientY}}if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){P=document.body.scrollLeft+(S<0?0:S);N=document.body.scrollTop+(Q<0?0:Q)}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){C=document.documentElement;if(C.scrollLeft!=undefined){P=C.scrollLeft+(S<0?0:S)}if(C.scrollTop!=undefined){N=C.scrollTop+(Q<0?0:Q)}}else{P=(S<0?0:S);N=(Q<0?0:Q)}}if(T.pageX){P=T.pageX}if(T.pageY){N=T.pageY}}}catch(ae){}if(af!=""){G=af.split(".");U=G[0]+"."+G[1]}else{H=ah.parentNode;E=H.parentNode;A=getparent(ah);if(A==null){return false}W=getparent(A);if(W==null){return false}U=W.id+"."+A.id}if(Z==1){L=0}else{if(ah.href){if((ah.target&&ah.target!="_self"&&ah.target!="_top"&&ah.target!="_parent")||(ah.href.toLowerCase().indexOf("javascript:")!=-1)||(ah.getAttribute("href",2)&&ah.getAttribute("href",2).charAt(0)=="#")||(ah.href.indexOf("#")!=-1&&(ah.href.substr(0,ah.href.indexOf("#"))==document.URL))||ah.nodeName.toLowerCase()=="img"){L=0}else{L=1}}else{L=0}}if(ah.href&&ah.href.indexOf("http://"+ccsrv)==0){B=ah.href}else{B="http://"+ccsrv+"/"+nclkModule+"?a="+U+"&r="+ab+"&i="+ad;B+="&bw="+ac+"&px="+P+"&py="+N+"&sx="+S+"&sy="+Q+"&m="+L;if(J==0){B+="&nsc="+HAPPYBEAN_API_NSC}else{if(J==1){B+="&ssc="+g_ssc+"&q="+g_query+"&s="+g_sid+"&p="+g_pid+"&g="+X}}}if(ah.href&&ah.href.indexOf("http://"+ccsrv)==0){F=B}else{if(ah.href&&ah.href.indexOf("http://"+ccsrv)!=0&&ah.nodeName.toLowerCase()!="img"){F=B+"&u="+encodeURIComponent(ah.href)}else{F=B+"&u=about%3Ablank"}}if(L==1){K=ah.innerHTML;ah.href=F;if(ah.innerHTML!=K){ah.innerHTML=K}}else{if(document.images){var D=new Date().getTime();F+="&time="+D;if(nclkIsSafari&&!ah.href){var ag=c=new Date();while((ag.getTime()-c.getTime())<100){ag=new Date()}var R=new Image();nClkImg.push(R);R.src=F}else{var R=new Image();nClkImg.push(R);R.src=F}}}return true}function getparent(f){var g=f.parentNode;var e=0;while(1){if(g.id!=null&&g.id!=""){return g}else{e++;g=g.parentNode}if(e>=nclkMaxDepth){return null}}}function xWindowSize(f){if(!f){f=window}var e=0;if(f.innerWidth){e=f.innerWidth;if(typeof(f.innerWidth)=="number"){var g=getScrollBarWidth();e=f.innerWidth-g}}else{if(document.documentElement&&document.documentElement.clientWidth){e=document.documentElement.clientWidth}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){e=document.body.clientWidth}}}return e}function getScrollBarWidth(){var f=document.createElement("p");f.style.width="200px";f.style.height="200px";var e=document.createElement("div");e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.style.visibility="hidden";e.style.width="200px";e.style.height="150px";e.style.overflow="hidden";e.appendChild(f);document.body.appendChild(e);var h=f.offsetWidth;e.style.overflow="scroll";var g=f.offsetWidth;if(h==g){g=e.clientWidth}document.body.removeChild(e);return(h-g)}function findPos(f){var e=curtop=0;if(f.offsetParent){do{e+=f.offsetLeft;curtop+=f.offsetTop}while(f=f.offsetParent)}else{if(f.x||f.y){if(f.x){e+=f.x}if(f.y){curtop+=f.y}}}return[e,curtop]}function checkIframe(g){var f=document.URL;var k=g.parentNode;var m;var l;while(1){if(k.nodeName.toLowerCase()=="#document"){if(k.parentWindow){m=k.parentWindow}else{m=k.defaultView}try{if(m.frameElement!=null&&m.frameElement!=undefined){if(m.frameElement.nodeName.toLowerCase()=="iframe"){l=m.frameElement.id;if(!l){return false}return l}else{return false}}else{return false}}catch(h){return false}}else{k=k.parentNode;if(k==null||k==undefined){return false}}}}if(typeof console=="undefined"){console={log:function(){},debug:function(){}}}if(!window.nhn){window.nhn={}}if(!window.nhn.Blog){window.nhn.Blog={}}if(!window.nhn.Blog.SocialApp){window.nhn.Blog.SocialApp={}}nhn.Blog.SocialApp.Util=$Class({$init:function(){this.wfStopEvent=$Fn(this._stopEvent,this).bindForEvent()},_stopEvent:function(a){a.stopDefault()},getFormObject:function(a){var f={};for(var e=0,g=a.elements.length;e<g;e++){var b=a.elements[e];if(!b.type||!b.name){continue}switch(b.type.toLowerCase()){case"radio":f[b.name]=b.checked?b.value:f[b.name];break;case"checkbox":f[b.name]=b.checked;break;default:f[b.name]=b.value;break}}return f},getParam:function(a,e){if(a){e=e||"param";var f=new RegExp("_"+e+"\\((.*?)\\)");var b=a.match(f);if(b&&b[0]&&b[1]){return b[1].split("|")}}return null},getElement:function(e,b,a){if(!e||!e.tagName){return}if(typeof a=="undefined"){if(e.tagName.toLowerCase()==b){return e}else{return $$.getSingle("!"+b,e)}}else{if(e.tagName.toLowerCase()==b&&$Element(e).hasClass(a)){return e}else{return $$.getSingle("!"+b+"."+a,e)}}},processEvent:function(e){var b=$Element(e.element);var g,a,f;a=$Element(this.getElement(b.$value(),"a"))||$Element(this.getElement(b.$value(),"img"))||$Element(this.getElement(b.$value(),"input"))||$Element(this.getElement(b.$value(),"button"));f=$Element(this.getElement(b.$value(),"div"))||$Element(this.getElement(b.$value(),"li"));g=this.getParam(a?a.attr("class"):b.attr("class"),e.type);g=(!g||g.length===0)&&f?this.getParam(f.attr("class"),e.type):g;if(!g){return false}else{if(a&&a.attr("class").indexOf("_"+e.type)>-1){g.push(a.$value());return g}else{if(f&&f.attr("class").indexOf("_"+e.type)>-1){g.push(f.$value());return g}}}},checkEvent:function(e){var b=$Element(e.element);var a=$Element(this.getElement(e.element,"a"));if(b.hasClass("_stopDefault")||(a&&a.hasClass("_stopDefault"))){e.stopDefault()}if(b.hasClass("_stopBubble")||(a&&a.hasClass("_stopBubble"))){e.stopBubble()}if(b.hasClass("_disabled")||(a&&a.hasClass("_disabled"))){return false}return true},createAjax:function(f,e,a){var b=this;return new $Ajax(f,{type:"post",onload:function(g){var h=g.json();if(!h||!h.isSuccess||h.isSuccess=="false"){b._onError(h.errorMsg);if(a){a()}return}e(h.result);try{oController.start("_activeId")}catch(k){}},onerror:function(g){b._onError("요청이 실패하였습니다.")},ontimeout:function(){b._onError("지정된 대기시간이 초과되었습니다.")}})},_onError:function(a){a=a||"서버가 응답하지 않습니다. 잠시 후 다시 시도해 주십시오.";alert(a)},openWindow:function(f,k,o){if(/appstore\.naver\.com/.test(f)){var g=/(width|height)=(\d+)/g;var l;var h={};while((l=g.exec(o))!=null){h[l[1]]=l[2]}var m=parseInt(h.width||496);var n=parseInt(h.height||442);var a=Math.round((window.screen.availLeft||0)+(screen.availWidth-m)*0.5);var b=Math.round((window.screen.availTop||0)+(screen.availHeight-n)*0.5);o="left="+a+", top="+b+","+o}var e=window.open(f,k,o);if(e){if($Agent().navigator().ie){e.opener=window}e.focus()}return e},emptyFunction:function(){},decodeURIComponentForJava:function(a){var b=a.replace(/\+/g,"%20");b=decodeURIComponent(b);b=b.replace(/\$/g,"&#0036;");return b}});var SocialAppExcutor=$Class({$init:function(){this.nWidth=1000;this.nHeight=screen.availHeight;this.serviceType="BLG";this.sUrl;this.nLeftPosition=(screen.availWidth-this.nWidth)/2;this.nTopPosition=0;this.sPosition="left="+this.nLeftPosition+", top="+this.nTopPosition+",";this.sAppPlayerId;this._setEvent()},_setEvent:function(){var a=$$("._socialAppExcute");$Fn(this._excuteAppPlayerPopup,this).attach(a,"click")},_excuteAppPlayerPopup:function(e){var f=e.element;var b=$Element(f);var a=utility.getElement(f,"a")||f;var h=$Element(a);var g=utility.getParam(b.className())||utility.getParam(h.className());if((b.hasClass("_returnFalse"))||(h.hasClass("_returnFalse"))){e.stop()}if(g[2]!=""){this.sUrl=g[0]+"/appPlayer/"+g[2];this.sAppPlayerId="appPlayer"+g[2];if(g[3]==""){if(!blogOwner){this.sUrl=this.sUrl+"/"+g[1];this.sAppPlayerId="appPlayer"+g[1]}}this.sUrl=this.sUrl+"?serviceType="+this.serviceType}else{this.sUrl=g[0]+"/appManagement";this.sAppPlayerId="appManagement"}window.open(this.sUrl,this.sAppPlayerId,this.sPosition+" scrollbars=yes, toolbar=no, location=no, status=no, menubars=no, resizable=yes, width="+this.nWidth+", height="+this.nHeight)}});var socialAppExcutor=new SocialAppExcutor();var SocialAppAppBoxModel=$Class({_oConfig:{api:{getMyAppList:"/socialapp/SocialAppAppBoxMyAppListAsync.nhn"}},_nCurrentPage:1,_aListObservers:[],_oAjax:null,$init:function(){},addListObserver:function(a){this._aListObservers.push(a)},notifyListObservers:function(e){for(var a=0,b=this._aListObservers.length;a<b;a++){this._aListObservers[a].update(e)}},getListData:function(b){b=b||this._nCurrentPage;var a={blogId:blogId,currentPage:b};this._oAjax=new $Ajax(this._oConfig.api.getMyAppList,{onload:$Fn(function(f){var e=f.json();if(e.isSuccess=="false"||e.isSuccess==undefined){return}this._processListData(e)},this).bind()});this._oAjax.request(a)},_processListData:function(a){this.notifyListObservers(a)}});var SocialAppAppBoxView=$Class({$static:{PAGE_SIZE:9},$init:function(h){this._oViewObserver=null;this._elAppBox=null;this._oTemplate={};this._sHtml={};this._oUtil=null;this._bIsValidPageForAppBox=true;this._oUtil=new nhn.Blog.SocialApp.Util();if(!h){throw new Error("View에 Model이 지정되지 않았습니다.")}h.addListObserver(this);var o=$("appBox");var p=$("appBoxDownTime");if(o==null||p){this._bIsValidPageForAppBox=false;return}var m=$("_tpl_app_appbox_socialapp_error");var b=$("_tpl_app_appbox_left_arrow");var a=$("_tpl_app_appbox_arrow_seperator");var f=$("_tpl_app_appbox_right_arrow");var g=$("_tpl_app_appbox_header");var q=$("_tpl_app_appbox_item");var n=$("_tpl_app_appbox_best_item");var l=$("_tpl_app_appbox_footer");var k=$("_tpl_app_appbox_noapp");var e=$("_tpl_app_appbox_bestapp_viewmore");this._sHtml.appBoxSocialAppError=m.innerHTML;this._oTemplate.appBoxLeftArrow=$Template(b.innerHTML);this._sHtml.appBoxArrowSeperator=a.innerHTML;this._oTemplate.appBoxRightArrow=$Template(f.innerHTML);this._sHtml.appBoxHeader=g.innerHTML;this._oTemplate.appBoxItem=$Template(q.innerHTML);this._oTemplate.appBoxBestItem=$Template(n.innerHTML);this._sHtml.appBoxFooter=l.innerHTML;this._sHtml.appBoxNoAppNotice=k.innerHTML;this._sHtml.appBoxBestAppViewMore=e.innerHTML;this._elAppBox=o;$Fn(this._onClickAppBox,this).attach(this._elAppBox,"click")},isValidPageForAppBox:function(){return this._bIsValidPageForAppBox},addViewObserver:function(a){this._oViewObserver=a},update:function(a){this.redrawList(a)},redrawList:function(k){var f=k.result;var h=k.isSocialAppError;var e=f.myAppViewList;var g=f.bestAppList;var b=(e.length==0);var a=[];if(h=="true"){this._makeErrorMsg();return}if(b){this._makeBestAppList(f)}else{this._makeMyAppList(f)}},_makeErrorMsg:function(){this._elAppBox.innerHTML=this._sHtml.appBoxSocialAppError},_makeBestAppList:function(g){var f=g.bestAppList;var a=[];a.push(this._sHtml.appBoxNoAppNotice);a.push(this._sHtml.appBoxHeader);for(var b=0,e=f.length;b<e;b++){a.push(this._makeBestAppItem(f[b],b))}a.push(this._sHtml.appBoxFooter);a.push(this._sHtml.appBoxBestAppViewMore);this._elAppBox.innerHTML=a.join("")},_makeMyAppList:function(h){var f=h.myAppViewList;var b=h.totalCount;var a=[];a.push(this._sHtml.appBoxHeader);for(var e=0,g=f.length;e<g;e++){a.push(this._makeSocialAppItem(f[e],e))}a.push(this._sHtml.appBoxFooter);if(b>9){a.push(this._makeAppBoxLeftArrow(h));a.push(this._sHtml.appBoxArrowSeperator);a.push(this._makeAppBoxRightArrow(h))}$Element(this._elAppBox).html(a.join(""))},_makeAppBoxLeftArrow:function(a){var b=parseInt(a.currentPage);var e=(b==1);return this._oTemplate.appBoxLeftArrow.process({leftEndReached:e,prevPage:b-1})},_makeAppBoxRightArrow:function(f){var g=parseInt(f.currentPage);var b=f.pageSize;var a=f.totalCount;var e=((g*b)>=a);return this._oTemplate.appBoxRightArrow.process({rightEndReached:e,nextPage:g+1})},_makeSocialAppItem:function(b,a){return this._oTemplate.appBoxItem.process({blogId:blogId,socialAppId:b.socialAppId,socialAppTitle:b.title,socialAppTitleAbbreviated:b.title.substring(0,4),socialAppThumbUrl:b.appThumbnailUrl44x44,index:a+1})},_makeBestAppItem:function(b,a){return this._oTemplate.appBoxBestItem.process({blogId:blogId,socialAppId:b.socialAppId,socialAppTitle:b.title,socialAppTitleAbbreviated:b.title.substring(0,4),socialAppThumbUrl:b.appThumbnailUrl44x44,index:a+1})},_onClickAppBox:function(a){this._notifyViewObserver(a)},_notifyViewObserver:function(l){var f=$Element(l.element);var e=f.className();if(this._isElementNavigationArrorw(f)){var m=e.split(" ")[1];this._oViewObserver.update(m);l.stop()}else{var b=l.element;var a=$Element(b);var h=utility.getElement(b,"a")||b;var g=$Element(h);var k=utility.getParam(a.className())||utility.getParam(g.className());if((a.hasClass("_returnFalse"))||(g.hasClass("_returnFalse"))){l.stop()}if(g.hasClass("_appExcute")){this._excuteAppPlayerPopup(l)}}},_excuteAppPlayerPopup:function(q){var g=1000;var m=screen.availHeight;var f="BLG";var b;var o=(screen.availWidth-g)/2;var k=0;var p="left="+o+", top="+k+",";var e=q.element;var a=$Element(e);var l=utility.getElement(e,"a")||e;var h=$Element(l);var n=utility.getParam(a.className())||utility.getParam(h.className());if((a.hasClass("_returnFalse"))||(h.hasClass("_returnFalse"))){q.stop()}b=n[0]+"/appPlayer/"+n[2]+"/"+n[1]+"?serviceType="+f;window.open(b,"appPlayer"+n[2],p+" scrollbars=yes, toolbar=no, location=no, status=no, menubars=no, resizable=yes, width="+g+", height="+m)},_isElementNavigationArrorw:function(a){return a.hasClass("cm-col1")&&!a.hasClass("fil5")&&!a.hasClass("title")&&!a.hasClass("viewmore")}});var SocialAppAppBoxController=$Class({_oCommandList:{},$init:function(){this._oAppBoxModel=new SocialAppAppBoxModel();this._oAppBoxView=new SocialAppAppBoxView(this._oAppBoxModel);if(this._oAppBoxView.isValidPageForAppBox()){this._oAppBoxView.addViewObserver(this);this.cmdDrawList(1)}},cmdDrawList:function(a){this._oAppBoxModel.getListData(a)},update:function(a){this.cmdDrawList(a)}});var CommentReadOnlyNoticeModel=function(){this.closeRosNotice=function(){$Element($("commentreadonlynotice")).hide();var a=new $Cookie();a.set(CookieHolder.CLOSE_COMMENTROS_NOTICE.KEY+"|"+blogId,"1",CookieHolder.CLOSE_COMMENTROS_NOTICE.DURATION)}};var commentReadOnlyNoticeModel=new CommentReadOnlyNoticeModel();var PopupEnableChecker=$Class({$init:function(){this.sDefaultPopupBlockedNoticeMessage="선택하신 기능이 차단되었습니다.\n해당 기능을 사용하려면\n팝업차단을 해제해주세요."},checkOpenedWindowAndAlertWhenDisabledStatus:function(e,b,a){if(e!=null||b!=true){return true}if(a==null){a=this.sDefaultPopupBlockedNoticeMessage}alert(a);return false}});var popupEnableChecker=new PopupEnableChecker();var Focusing=$Class({$init:function(){this._setEvent()},_setEvent:function(){$Fn(this._onLoad,this).attach(window,"load")},_onLoad:function(){},_gotoTagForPost:function(){if(typeof isFirstPage=="undefined"||sFocusingCommentNo!=""){return}if(isFirstPage&&from=="search"){var a;if(searchImg!=""){a=$(searchImg);if(a){utility.gotoTag(searchImg)}}else{if(searchVid!=""){a=$(searchVid);if(a){utility.gotoTag(searchVid)}}}if(!a){utility.gotoTag("category-name")}}else{if(isAfterWrite){utility.gotoTag("post_1")}else{utility.gotoTag(forFocusingTargetId)}}}});var focusing=new Focusing();if(typeof(window.defineNHNJS)=="undefined"){window.defineNHNJS={}}window.defineNHNJS["LayoutBottomCommon-7984513_js"]=true;